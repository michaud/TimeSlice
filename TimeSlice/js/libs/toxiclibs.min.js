var toxi={};(function(){var d,e,g;(function(a){function j(a,b){if(a&&a.charAt(0)==="."&&b){b=b.split("/"),b=b.slice(0,b.length-1),a=b.concat(a.split("/"));var c,d;for(c=0;d=a[c];c++)if(d===".")a.splice(c,1),c-=1;else if(d==="..")if(c!==1||a[2]!==".."&&a[0]!=="..")c>0&&(a.splice(c-1,2),c-=2);else break;a=a.join("/")}return a}function k(b,c){return function(){return i.apply(a,f.call(arguments,0).concat([b,c]))}}function l(a){return function(b){return j(b,a)}}function m(a){return function(c){b[a]=c}}function n(d){if(c.hasOwnProperty(d)){var e=c[d];delete c[d],h.apply(a,e)}return b[d]}function o(a,b){var c,d,e=a.indexOf("!");return e!==-1?(c=j(a.slice(0,e),b),a=a.slice(e+1),d=n(c),d&&d.normalize?a=d.normalize(a,l(b)):a=j(a,b)):a=j(a,b),{f:c?c+"!"+a:a,n:a,p:d}}var b={},c={},f=[].slice,h,i;if(typeof g=="function")return;h=function(d,e,f,g){var h=[],i,j,l,p,q,r;g||(g=d);if(typeof f=="function"){!e.length&&f.length&&(e=["require","exports","module"]);for(p=0;p<e.length;p++){r=o(e[p],g),l=r.f;if(l==="require")h[p]=k(d);else if(l==="exports")h[p]=b[d]={},i=!0;else if(l==="module")j=h[p]={id:d,uri:"",exports:b[d]};else if(b.hasOwnProperty(l)||c.hasOwnProperty(l))h[p]=n(l);else if(r.p)r.p.load(r.n,k(g,!0),m(l),{}),h[p]=b[l];else throw d+" missing "+l}q=f.apply(b[d],h),d&&(j&&j.exports!==a?b[d]=j.exports:i||(b[d]=q))}else d&&(b[d]=f)},d=i=function(b,c,d,e){return typeof b=="string"?n(o(b,c).f):(b.splice||(c.splice?(b=c,c=arguments[2]):b=[]),e?h(a,b,c,d):setTimeout(function(){h(a,b,c,d)},15),i)},i.config=function(){return i},e||(e=i),g=function(a,b,d){b.splice||(d=b,b=[]),g.unordered?c[a]=[a,b,d]:h(a,b,d)},g.amd={jQuery:!0}})(),g("almond",function(){}),g.unordered=!0,g("almondSettings",function(){}),g("toxi/math/mathUtils",["require","exports","module"],function(a,b,c){MathUtils={},MathUtils.SQRT2=Math.sqrt(2),MathUtils.SQRT3=Math.sqrt(3),MathUtils.LOG2=Math.log(2),MathUtils.PI=3.141592653589793,MathUtils.INV_PI=1/MathUtils.PI,MathUtils.HALF_PI=MathUtils.PI/2,MathUtils.THIRD_PI=MathUtils.PI/3,MathUtils.QUARTER_PI=MathUtils.PI/4,MathUtils.TWO_PI=MathUtils.PI*2,MathUtils.THREE_HALVES_PI=MathUtils.TWO_PI-MathUtils.HALF_PI,MathUtils.PI_SQUARED=MathUtils.PI*MathUtils.PI,MathUtils.EPS=1.1920928955078125e-7,MathUtils.DEG2RAD=MathUtils.PI/180,MathUtils.RAD2DEG=180/MathUtils.PI,MathUtils.SHIFT23=1<<23,MathUtils.INV_SHIFT23=1/MathUtils.SHIFT23,MathUtils.SIN_A=-4/(MathUtils.PI*MathUtils.PI),MathUtils.SIN_B=4/MathUtils.PI,MathUtils.SIN_P=.225,MathUtils.abs=Math.abs,MathUtils.ceilPowerOf2=function(a){var b=1;while(b<a)b<<=1;return b},MathUtils.clip=function(a,b,c){return a<b?b:a>c?c:a},MathUtils.clipNormalized=function(a){return a<0?0:a>1?1:a},MathUtils.cos=Math.cos,MathUtils.degrees=function(a){return a*this.RAD2DEG},MathUtils.fastCos=function(a){return MathUtils.fastSin(a+(a>MathUtils.HALF_PI?-MathUtils.THREE_HALVES_PI:MathUtils.HALF_PI))},MathUtils.fastSin=function(a){return a=MathUtils.SIN_B*a+MathUtils.SIN_A*a*Math.abs(a),MathUtils.SIN_P*(a*Math.abs(a)-a)+a},MathUtils.flipCoin=function(a){return Math.random()<.5},MathUtils.floor=function(a){var b=parseInt(a,10);return a<0&&a!=b&&b--,b},MathUtils.floorPowerOf2=function(a){return parseInt(Math.pow(2,parseInt(Math.log(a)/MathUtils.LOG2,10)),10)},MathUtils.max=function(a,b,c){return c?a>b?a>c?a:c:b>c?b:c:Math.max(a,b)},MathUtils.min=function(a,b,c){return c?a<b?a<c?a:c:b<c?b:c:Math.min(a,b)},MathUtils.normalizedRandom=function(){return Math.random()*2-1},MathUtils.radians=function(a){return a*MathUtils.DEG2RAD},MathUtils.random=function(a,b,c){return arguments.length==2&&(c=b,b=a,a=Math.random),!b&&!c?Math.random():c?a()*(c-b)+b:(c=b,a()*c)},MathUtils.reduceAngle=function(a){return a%=MathUtils.TWO_PI,Math.abs(a)>MathUtils.PI&&(a-=MathUtils.TWO_PI),Math.abs(a)>MathUtils.HALF_PI&&(a=MathUtils.PI-a),a},MathUtils.sign=function(a){return a<0?-1:a>0?1:0},MathUtils.sin=function(a){return a=MathUtils.reduceAngle(a),Math.abs(a)>MathUtils.QUARTER_PI?MathUtils.fastCos(MathUtils.HALF_PI-a):MathUtils.fastSin(a)},c.exports=MathUtils}),g("toxi/geom/Line3D",["require","exports","module","../math/mathUtils"],function(a,b,c){var d=a("../math/mathUtils"),e=function(a,b){this.a=a,this.b=b};e.prototype={closestLineTo:function(a){var b=a.a.sub(a.b);if(b.isZeroVector())return new e.LineIntersection(e.LineIntersection.Type.NON_INTERSECTING);var c=this.b.sub(this.a);if(c.isZeroVector())return new e.LineIntersection(e.LineIntersection.Type.NON_INTERSECTING);var f=this.a.sub(a.a),g=f.x*b.x+f.y*b.y+f.z*b.z,h=b.x*c.x+b.y*c.y+b.z*c.z,i=f.x*c.x+f.y*c.y+f.z*c.z,j=b.x*b.x+b.y*b.y+b.z*b.z,k=c.x*c.x+c.y*c.y+c.z*c.z,l=k*j-h*h;if(Math.abs(l)<d.EPS)return new e.LineIntersection(e.LineIntersection.Type.NON_INTERSECTING);var m=g*h-i*j,n=m/l,o=(g+h*n)/j,p=this.a.add(c.scaleSelf(n)),q=a.a.add(b.scaleSelf(o));return new e.LineIntersection(e.LineIntersection.Type.INTERSECTING,new e(p,q),n,o)},closestPointTo:function(a){var b=this.b.sub(this.a),c=a.sub(this.a).dot(b)/b.magSquared();return c<0?this.a.copy():c>1?this.b.copy():this.a.add(b.scaleSelf(c))},copy:function(){return new e(this.a.copy(),this.b.copy())},equals:function(a){return this==a?!0:typeof a!=e?!1:(this.a.equals(a.a)||this.a.equals(l.b))&&(this.b.equals(l.b)||this.b.equals(l.a))},getDirection:function(){return this.b.sub(this.a).normalize()},getLength:function(){return this.a.distanceTo(this.b)},getLengthSquared:function(){return this.a.distanceToSquared(this.b)},getMidPoint:function(){return this.a.add(this.b).scaleSelf(.5)},getNormal:function(){return this.b.cross(this.a)},hasEndPoint:function(a){return this.a.equals(a)||this.b.equals(a)},offsetAndGrowBy:function(a,b,c){var d=this.getMidPoint(),e=this.getDirection(),f=this.a.cross(e).normalize();return c!==undefined&&d.sub(c).dot(f)<0&&f.invert(),f.normalizeTo(a),this.a.addSelf(f),this.b.addSelf(f),e.scaleSelf(b),this.a.subSelf(e),this.b.addSelf(e),this},set:function(a,b){return this.a=a,this.b=b,this},splitIntoSegments:function(a,b,c){return e.splitIntoSegments(this.a,this.b,b,a,c)},toString:function(){return this.a.toString()+" -> "+this.b.toString()}},e.splitIntoSegments=function(a,b,c,d,e){d===undefined&&(d=[]),e&&d.push(a.copy());var f=a.distanceTo(b);if(f>c){var g=a.copy(),h=b.sub(a).limit(c);while(f>c)g.addSelf(h),d.push(g.copy()),f-=c}return d.push(b.copy()),d},e.LineIntersection=function(a,b,c,d){this.type=a,c===undefined&&(c=0),d===undefined&&(d=0),this.line=b,this.coeff=[c,d]},e.LineIntersection.prototype={getCoefficient:function(){return this.coeff},getLength:function(){return this.line===undefined?undefined:this.line.getLength()},getLine:function(){return this.line===undefined?undefined:this.line.copy()},getType:function(){return this.type},isIntersectionInside:function(){return this.type==e.LineIntersection.Type.INTERSECTING&&this.coeff[0]>=0&&this.coeff[0]<=1&&this.coeff[1]>=0&&this.coeff[1]<=1},toString:function(){return"type: "+this.type+" line: "+this.line}},e.LineIntersection.Type={NON_INTERSECTING:0,INTERSECTING:1},c.exports=e}),g("toxi/geom/BernsteinPolynomial",["require","exports","module"],function(a,b,c){var d=function(a){this.resolution=a;var b=new Array(a),c=new Array(a),d=new Array(a),e=new Array(a),f=0,g=1/(a-1);for(var h=0;h<a;h++){var i=1-f,j=i*i,k=f*f;b[h]=i*j,c[h]=3*f*j,d[h]=3*k*i,e[h]=f*k,f+=g}this.b0=b,this.b1=c,this.b2=d,this.b3=e};c.exports=d}),g("toxi/geom/CircleIntersector",["require","exports","module"],function(a,b,c){var d=function(a){this.circle=a,this.isec=undefined};d.prototype={getIntersectionData:function(){return this.isec},intersectsRay:function(a){this.isec.clear();var b=circle.sub(a),c=b.magSquared(),d=b.dot(a.getDirection()),e=circle.getRadius(),f=e*e-(c-d*d);return f>=0&&(this.isec.isIntersection=!0,this.isec.dist=d-Math.sqrt(f),this.isec.pos=a.getPointAtDistance(isec.dist),this.isec.normal=this.isec.pos.sub(this.circle).normalize()),this.isec.isIntersection}},c.exports=d}),g("toxi/geom/mesh/SphericalHarmonics",["require","exports","module","../../math/mathUtils"],function(a,b,c){var d=a("../../math/mathUtils"),e=function(a){this.m=a};e.prototype={computeVertexFor:function(a,b,c){var e=0;e+=Math.pow(d.sin(this.m[0]*c),this.m[1]),e+=Math.pow(d.cos(this.m[2]*c),this.m[3]),e+=Math.pow(d.sin(this.m[4]*b),this.m[5]),e+=Math.pow(d.cos(this.m[6]*b),this.m[7]);var f=d.sin(c);return a.x=e*f*d.cos(b),a.y=e*d.cos(c),a.z=e*f*d.sin(b),a},getPhiRange:function(){return d.TWO_PI},getPhiResolutionLimit:function(a){return a},getThetaRange:function(){return d.PI},getThetaResolutionLimit:function(a){return a}},c.exports=e}),g("toxi/geom/mesh/VertexSelector",["require","exports","module"],function(a,b,c){var d=function(a){this.mesh=a,this.selection=[]};d.prototype={addSelection:function(a){return this.checkMeshIdentity(a.getMesh()),this.selection.addAll(a.getSelection()),this},checkMeshIdentity:function(a){if(a!=this.mesh)throw new Error("The given selector is not using the same mesh instance")},clearSelection:function(){return this.selection.clear(),this},getMesh:function(){return this.mesh},getSelection:function(){return this.selection},invertSelection:function(){var a=[],b=mesh.getVertices(),c=b.length;for(var d=0;d<c;d++){var e=b[d];selection.contains(e)||a.add(e)}return this.selection=a,this},selectSimilar:function(a){var b=a.length;for(var c=0;c<b;c++){var d=a[c];this.selection.add(this.mesh.getClosestVertexToPoint(d))}return this},selectVertices:function(){return this},setMesh:function(a){this.mesh=a,this.clearSelection()},size:function(){return this.selection.size()},subtractSelection:function(a){return this.checkMeshIdentity(a.getMesh()),this.selection.removeAll(a.getSelection()),this}},c.exports=d}),g("toxi/internals",["require","exports","module"],function(a,b,c){var d=function(a,b){return typeof a!="undefined"?a:b};c.exports.extend=function(a,b){a.prototype=new b,a.constructor=a,a.prototype.parent=b.prototype};var e=Array.isArray||function(a){return a.toString()=="[object Array]"};c.exports.isArray=e;var f=function(a,b){if(a===undefined||typeof a!="object")return!1;var c=0,d=b.length,e;for(c=0;c<d;c++){e=b[c];if(!(e in a))return!1}return!0};c.exports.tests={hasXY:function(a){return f(a,["x","y"])},hasXYZ:function(a){return f(a,["x","y","z"])},hasXYWidthHeight:function(a){return f(a,["x","y","width","height"])},isArray:e,isAABB:function(a){return f(a,["setExtent","getNormalForPoint"])},isCircle:function(a){return f(a,["getCircumference","getRadius","intersectsCircle"])},isLine2D:function(a){return f(a,["closestPointTo","intersectLine","getLength"])},isMatrix4x4:function(a){return f(a,["identity","invert","setFrustrum"])},isRect:function(a){return f(a,["x","y","width","height","getArea","getCentroid","getDimensions"])},isSphere:function(a){return f(a,["x","y","z","radius","toMesh"])},isTColor:function(a){return f(a,["rgb","cmyk","hsv"])},isParticleBehavior:function(a){return f(a,["applyBehavior","configure"])},isVerletParticle2D:function(a){return f(a,["x","y","weight"])}};var g={};c.exports.each=function(a,b,c){if(a==null)return;if(Array.prototype.forEach&&a.forEach===Array.prototype.forEach)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,e=a.length;d<e;d++)if(d in a&&b.call(c,a[d],d,a)===g)return}else for(var f in a)if(hasOwnProperty.call(a,f)&&b.call(c,a[f],f,a)===g)return},c.exports.removeItemFrom=function(a,b){var c=b.indexOf(a);return c>-1?b.splice(c,1):undefined},c.exports.mixin=function(a,b){c.exports.each(b,function(b,c){a[c]=b})},c.exports.numberCompare=function(a,b){if(a==b)return 0;if(a<b)return-1;if(a>b)return 1},c.exports.Int32Array=typeof Int32Array!="undefined"?Int32Array:Array,c.exports.Float32Array=typeof Float32Array!="undefined"?Float32Array:Array;var h=function(a){this.__it=a.slice(0)};h.prototype={hasNext:function(){return this.__it.length>0},next:function(){return this.__it.shift()}};var i=function(a){this.__obj={},this.__keys=[];for(var b in a)this.__obj[b]=a[b],this.__keys.push(b);this.__it=new h(this.__keys)};i.prototype={hasNext:function(){return this.__it.hasNext()},next:function(){var a=this.__it.next();return this.__obj[a]}};var j=function(a){return c.exports.isArray(a)?new h(a):new i(a)};c.exports.Iterator=j}),g("toxi/geom/mesh/BoxSelector",["require","exports","module","../../internals","./VertexSelector"],function(a,b,c){var d=a("../../internals").extend,e=a("./VertexSelector"),f=function(a,b){e.apply(this,[a]),this.box=b};d(f,e),f.prototype.selectVertices=function(){this.clearSelection();var a=this.mesh.getVertices(),b=a.length;for(var c=0;c<b;c++){var d=a[c];this.box.containsPoint(d)&&this.selection.add(d)}return this},c.exports=f}),g("toxi/geom/mesh/DefaultSelector",["require","exports","module","../../internals","./VertexSelector"],function(a,b,c){var d=a("../../internals").extend,e=a("./VertexSelector"),f=function(a){e.apply(this,[a])};d(f,e),f.prototype.selectVertices=function(){return this.clearSelection(),this.selection.addAll(this.mesh.getVertices()),this},c.exports=f}),g("toxi/geom/mesh/PlaneSelector",["require","exports","module","../../internals","./VertexSelector"],function(a,b,c){var d=a("../../internals").extend,e=a("./VertexSelector"),f=function(a,b,c,d){e.apply(this,[a]),this.plane=b,this.classifier=c,this.tolerances=d===undefined?1e-4:d};d(f,e),f.prototype.selectVertices=function(){this.clearSelection();var a=this.mesh.getVertices(),b=a.length;for(var c=0;c<b;c++){var d=a[c];this.plane.classifyPoint(d,this.tolerance)==this.classifier&&this.selection.add(d)}return this},c.exports=f}),g("toxi/math/BezierInterpolation",["require","exports","module"],function(a,b,c){var d=function(a,b){this.c1=a,this.c2=b};d.prototype={interpolate:function(a,b,c){var d=c*c,e=1-c,f=e*e;return a*f*e+3*(this.c1*(b-a)+a)*c*f+3*(this.c2*(b-a)+b)*d*e+b*d*c},setCoefficients:function(a,b){this.c1=a,this.c2=b}},c.exports=d}),g("toxi/math/CircularInterpolation",["require","exports","module"],function(a,b,c){var d=function(a){a===undefined&&(this.isFlipped=!1)};d.prototype={interpolate:function(a,b,c){return this.isFlipped?a-(b-a)*(Math.sqrt(1-c*c)-1):(c=1-c,a+(b-a)*Math.sqrt(1-c*c))},setFlipped:function(a){this.isFlipped=a}},c.exports=d}),g("toxi/math/CosineInterpolation",["require","exports","module"],function(a,b,c){var d=function(){};d.prototype={interpolate:function(a,b,c){return b+(a-b)*(.5+.5*Math.cos(c*Math.PI))}},c.exports=d}),g("toxi/math/ExponentialInterpolation",["require","exports","module"],function(a,b,c){var d=function(a){this.exponent=a===undefined?2:a};d.prototype={interpolate:function(a,b,c){return a+(b-a)*Math.pow(c,this.exponent)}},c.exports=d}),g("toxi/math/Interpolation2D",["require","exports","module"],function(a,b,c){var d={};d.bilinear=function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t;internals.tests.hasXY(a)?(k=a.x,l=a.y,m=b.x,n=b.y,o=c.x,p=c.y,q=d,r=e,s=f,t=g):(k=a,l=b,m=c,n=d,o=e,p=f,q=g,r=h,s=i,t=j);var u=1/((o-m)*(p-n)),v=(k-m)*u,w=(o-k)*u,x=l-n,y=p-l;return q*w*y+r*v*y+s*w*x+t*v*x},c.exports=d}),g("toxi/math/LinearInterpolation",["require","exports","module"],function(a,b,c){var d=function(){};d.prototype={interpolate:function(a,b,c){return a+(b-a)*c}},c.exports=d}),g("toxi/math/DecimatedInterpolation",["require","exports","module","./LinearInterpolation"],function(a,b,c){var d=a("./LinearInterpolation"),e=function(a,b){if(a===undefined)throw new Error("steps was not passed to constructor");this.numSteps=a,this.strategy=b===undefined?new d:b};e.prototype={interpolate:function(a,b,c){var d=Math.floor(c*this.numSteps)/this.numSteps;return this.strategy.interpolate(a,b,d)}},c.exports=e}),g("toxi/math/ScaleMap",["require","exports","module","./mathUtils","./LinearInterpolation"],function(a,b,c){var d=a("./mathUtils"),e=a("./LinearInterpolation"),f=function(a,b){this.min=a,this.max=b};f.prototype.toString=function(){return"{ min: "+this.min+", max: "+this.max+"}"};var g=function(a,b,c,d){if(arguments.length==1&&arguments[0].input!==undefined&&arguments[0].output!==undefined){var f=arguments[0];c=f.output.min,d=f.output.max,b=f.input.max,a=f.input.min}this.mapFunction=new e,this.setInputRange(a,b),this.setOutputRange(c,d)};g.prototype={getClippedValueFor:function(a){var b=d.clipNormalized((a-this._in.min)/this._interval);return this.mapFunction.interpolate(0,this.mapRange,b)+this._out.min},getInputMedian:function(){return(this._in.min+this._in.max)*.5},getInputRange:function(){return this._in},getMappedMedian:function(){return this.getMappedValueFor(.5)},getMappedValueFor:function(a){var b=(a-this._in.min)/this._interval;return this.mapFunction.interpolate(0,this.mapRange,b)+this._out.min},getOutputMedian:function(){return(this._out.min+this._out.max)*.5},getOutputRange:function(){return this._out},setInputRange:function(a,b){this._in=new f(a,b),this._interval=b-a},setMapFunction:function(a){this.mapFunction=a},setOutputRange:function(a,b){this._out=new f(a,b),this.mapRange=b-a},toString:function(){return"ScaleMap, inputRange: "+this._in.toString()+" outputRange: "+this._out.toString()}},c.exports=g}),g("toxi/math/SigmoidInterpolation",["require","exports","module"],function(a,b,c){var d=function(a){a===undefined&&(a=2),this.setSharpness(a)};d.prototype={getSharpness:function(){return this.sharpness},interpolate:function(a,b,c){return c=(c*2-1)*this.sharpPremult,c=1/(1+Math.exp(-c)),a+(b-a)*c},setSharpness:function(a){this.sharpness=a,this.sharpPremult=5*a}},c.exports=d}),g("toxi/math/SinCosLUT",["require","exports","module","./mathUtils"],function(a,b,c){var d=a("./mathUtils"),e=function(a){a||(a=e.DEFAULT_PRECISION),this.precision=a,this.period=360/this.precision,this.quadrant=this.period>>2,this.deg2rad=Math.PI/180*this.precision,this.rad2deg=180/Math.PI/this.precision,this.sinLUT=[];for(var b=0;b<this.period;b++)this.sinLUT[b]=Math.sin(b*this.deg2rad)};e.prototype={cos:function(a){while(a<0)a+=d.TWO_PI;return this.sinLUT[(a*this.rad2deg+this.quadrant)%this.period]},getPeriod:function(){return this.period},getPrecision:function(){return this.precision},getSinLUT:function(){return this.sinLUT},sin:function(a){while(a<0)a+=d.TWO_PI;return this.sinLUT[a*this.rad2deg%this.period]}},e.DEFAULT_PRECISION=.25,e.DEFAULT_INSTANCE=undefined,e.getDefaultInstance=function(){return e.DEFAULT_INSTANCE===undefined&&(e.DEFAULT_INSTANCE=new e),e.DEFAULT_INSTANCE},c.exports=e}),g("toxi/math/ThresholdInterpolation",["require","exports","module"],function(a,b,c){var d=function(a){this.threshold=a};d.prototype={interpolate:function(a,b,c){return c<this.threshold?a:b}},c.exports=d}),g("toxi/math/ZoomLensInterpolation",["require","exports","module","./mathUtils","./CircularInterpolation"],function(a,b,c){var d=a("./mathUtils"),e=a("./CircularInterpolation"),f=function(a,b){this.leftImpl=new e,this.rightImpl=new e,this.lensPos=a||.5,this.lensStrength=b||1,this.absStrength=Math.abs(this.lensStrength),this.leftImpl.setFlipped(this.lensStrength>0),this.rightImpl.setFlipped(this.lensStrength<0)};f.prototype={interpolate:function(a,b,c){var d=a+(b-a)*c;return c<this.lensPos?d+=(this.leftImpl.interpolate(a,a+(b-a)*this.lensPos,c/this.lensPos)-d)*this.absStrength:d+=(this.rightImpl.interpolate(a+(b-a)*this.lensPos,b,(c-this.lensPos)/(1-this.lensPos))-d)*this.absStrength,d},setLensPos:function(a,b){this.lensPos+=(d.clipNormalized(a)-this.lensPos)*b},setLensStrength:function(a,b){this.lensStrength+=(d.clip(a,-1,1)-this.lensStrength)*b,this.absStrength=d.abs(this.lensStrength),this.leftImpl.setFlipped(this.lensStrength>0),this.rightImpl.setFlipped(this.lensStrength<0)}},c.exports=f}),g("toxi/math/noise/PerlinNoise",["require","exports","module","../SinCosLUT"],function(a,b,c){var d=a("../SinCosLUT"),e={};e.pow=Math.pow,e.random=Math.random,function(a,b,c,d,e,f,g){function h(a){var b,d,e=this,f=a.length,g=0,h=e.i=e.j=e.m=0;e.S=[],e.c=[],f||(a=[f++]);while(g<c)e.S[g]=g++;for(g=0;g<c;g++)b=e.S[g],h=k(h+b+a[g%f]),d=e.S[h],e.S[g]=d,e.S[h]=b;e.g=function i(a){var b=e.S,d=k(e.i+1),f=b[d],g=k(e.j+f),h=b[g];b[d]=h,b[g]=f;var i=b[k(f+h)];while(--a)d=k(d+1),f=b[d],g=k(g+f),h=b[g],b[d]=h,b[g]=f,i=i*c+b[k(f+h)];return e.i=d,e.j=g,i},e.g(c)}function i(a,b,c,d,e){c=[],e=typeof a;if(b&&e=="object")for(d in a)if(d.indexOf("S")<5)try{c.push(i(a[d],b-1))}catch(f){}return c.length?c:a+(e!="string"?"\0":"")}function j(a,b,c,d){a+="",c=0;for(d=0;d<a.length;d++)b[k(d)]=k((c^=b[k(d)]*19)+a.charCodeAt(d));a="";for(d in b)a+=String.fromCharCode(b[d]);return a}function k(a){return a&c-1}b.seedrandom=function l(k,l){var m=[],n;return k=j(i(l?[k,a]:arguments.length?k:[(new Date).getTime(),a,window],3),m),n=new h(m),j(n.S,a),b.random=function(){var a=n.g(d),b=g,h=0;while(a<e)a=(a+h)*c,b*=c,h=n.g(1);while(a>=f)a/=2,b/=2,h>>>=1;return(a+h)/b},k},g=b.pow(c,d),e=b.pow(2,e),f=e*2,j(b.random(),a)}([],e,256,6,52);var f=4,g=1<<f,h=8,i=1<<h,j=4095,k=.001,l=function(a,b){var c=(b+.5)*a._perlin_PI%a._perlin_TWOPI;return.5*(1-a._perlin_cosTable[c])},m=function(){this._perlin_octaves=4,this._perlin_amp_falloff=.5};m.prototype={noise:function(a,b,c){var m=0,a=a||0,b=b||0,c=c||0;if(!this._perlin){this._perlin=[];var n=j-1;for(m=0;m<j+1;m++)this._perlin[m]=e.random()}this._perlin_cosTable=d.getDefaultInstance().getSinLUT(),this._perlin_TWOPI=this._perlin_PI=d.getDefaultInstance().getPeriod(),this._perlin_PI>>=1,a<0&&(a=-a),b<0&&(b=-b),c<0&&(c=-c);var o=a,p=b,q=c,r=a-o,s=b-p,t=c-q,u,v,w=0,x=.5,y,z,A,B;for(m=0;m<this._perlin_octaves;m++){B=o+(p<<f)+(q<<h),u=l(this,r),v=l(this,s),y=this._perlin[B&j],y+=u*(this._perlin[B+1&j]-y),z=this._perlin[B+g&j],z+=u*(this._perlin[B+g+1&j]-z),y+=v*(z-y),B+=i,z=this._perlin[B&j],z+=u*(this._perlin[B+1&j]-z),A=this._perlin[B+g&j],A+=u*(this._perlin[B+g+1&j]-A),z+=v*(A-z),y+=l(this,t)*(z-y),w+=y*x,x*=this._perlin_amp_falloff;if(x<k)break;o<<=1,r*=2,p<<=1,s*=2,q<<=1,t*=2,r>=1&&(o++,r--),s>=1&&(p++,s--),t>=1&&(q++,t--)}return w},noiseDetail:function(a,b){a>0&&(this._perlin_octaves=a),b&&b>0&&(this._perlin_amp_falloff=b)},noiseSeed:function(a){e.seedrandom(a)}},c.exports=m}),g("toxi/math/noise/simplexNoise",["require","exports","module","../../internals"],function(a,b,c){var d=a("../../internals").Int32Array,e=0,f=Math.sqrt(3),g=Math.sqrt(5),h=.5*(f-1),i=(3-f)/6,j=i*2-1,k=1/3,l=1/6,m=(g-1)/4,n=(5-g)/20,o=n*2,p=n*3,q=n*4-1,r=[new d([1,1,0]),new d([-1,1,0]),new d([1,-1,0]),new d([-1,-1,0]),new d([1,0,1]),new d([-1,0,1]),new d([1,0,-1]),new d([-1,0,-1]),new d([0,1,1]),new d([0,-1,1]),new d([0,1,-1]),new d([0,-1,-1])],s=[new d([0,1,1,1]),new d([0,1,1,-1]),new d([0,1,-1,1]),new d([0,1,-1,-1]),new d([0,-1,1,1]),new d([0,-1,1,-1]),new d([0,-1,-1,1]),new d([0,-1,-1,-1]),new d([1,0,1,1]),new d([1,0,1,-1]),new d([1,0,-1,1]),new d([1,0,-1,-1]),new d([-1,0,1,1]),new d([-1,0,1,-1]),new d([-1,0,-1,1]),new d([-1,0,-1,-1]),new d([1,1,0,1]),new d([1,1,0,-1]),new d([1,-1,0,1]),new d([1,-1,0,-1]),new d([-1,1,0,1]),new d([-1,1,0,-1]),new d([-1,-1,0,1]),new d([-1,-1,0,-1]),new d([1,1,1,0]),new d([1,1,-1,0]),new d([1,-1,1,0]),new d([1,-1,-1,0]),new d([-1,1,1,0]),new d([-1,1,-1,0]),new d([-1,-1,1,0]),new d([-1,-1,-1,0])],t=new d([151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180]),u=function(){var a=new d(512);for(var b=0;b<512;b++)a[b]=t[b&255];return a}(),v=[new d([0,1,2,3]),new d([0,1,3,2]),new d([0,0,0,0]),new d([0,2,3,1]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([1,2,3,0]),new d([0,2,1,3]),new d([0,0,0,0]),new d([0,3,1,2]),new d([0,3,2,1]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([1,3,2,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([1,2,0,3]),new d([0,0,0,0]),new d([1,3,0,2]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([2,3,0,1]),new d([2,3,1,0]),new d([1,0,2,3]),new d([1,0,3,2]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([2,0,3,1]),new d([0,0,0,0]),new d([2,1,3,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([2,0,1,3]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([3,0,1,2]),new d([3,0,2,1]),new d([0,0,0,0]),new d([3,1,2,0]),new d([2,1,0,3]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([3,1,0,2]),new d([0,0,0,0]),new d([3,2,0,1]),new d([3,2,1,0])],w=function(a,b,c,d,e){var f=a[0]*b+a[1]*c;return d&&(f+=a[2]*d,e&&(f+=a[3]*e)),f},x=function(a){return a<0?Math.floor(a-1):Math.floor(a)},y={noise:function(a,b,c,d){var e=arguments.length,f=0,g=0,t=0,y=0,z=0,A=function(){switch(e){case 2:return(a+b)*h;case 3:return(a+b+c)*k;case 4:return(a+b+c+d)*m;default:throw new Error("Wrong arguments supplied to SimplexNoise.noise()")}}(),B=x(a+A),C=x(b+A),D=c!==undefined?x(c+A):undefined,E=d!==undefined?x(d+A):undefined,F=function(){switch(e){case 2:return(B+C)*i;case 3:return(B+C+D)*l;case 4:return(B+C+D+E)*n}}(),G=a-(B-F),H=b-(C-F),I=c!==undefined?c-(D-F):undefined,J=d!==undefined?d-(E-F):undefined;return e==2?function(){var a,b,c,d,e,h,k,l,m,n,o,p,q;return G>H?(a=1,b=0):(a=0,b=1),c=G-a+i,d=H-b+i,e=G+j,h=H+j,k=B&255,l=C&255,m=.5-G*G-H*H,m>0&&(m*=m,n=u[k+u[l]]%12,f=m*m*w(r[n],G,H)),t1=.5-c*c-d*d,t1>0&&(t1*=t1,o=u[k+a+u[l+b]]%12,g=t1*t1*w(r[o],c,d)),q=.5-e*e-h*h,q>0&&(q*=q,p=u[k+1+u[l+1]]%12,t=q*q*w(r[p],e,h)),70*(f+g+t)}():e==3?function(){var a,b,c,d,e,h,i,j,m,n,o,p,q,s,v,x,z,A,E,F,J,K,L,M,N,O;return G<H?H<I?(a=0,b=0,c=1,d=0,e=1,h=1):G<I?(a=0,b=1,c=0,d=0,e=1,h=1):(a=0,b=1,c=0,d=1,e=1,h=0):H<I?G<I?(a=0,b=0,c=1,d=1,e=0,h=1):(a=1,b=0,c=0,d=1,e=0,h=1):(a=1,b=0,c=0,d=1,e=1,h=0),i=G-a+l,j=H-b+l,m=I-c+l,n=G-d+k,o=H-e+k,p=I-h+k,q=G-.5,s=H-.5,v=I-.5,x=B&255,z=C&255,A=D&255,E=.6-G*G-H*H-I*I,E>0&&(E*=E,F=u[x+u[z+u[A]]]%12,f=E*E*w(r[F],G,H,I)),J=.6-i*i-j*j-m*m,J>0&&(J*=J,K=u[x+a+u[z+b+u[A+c]]]%12,g=J*J*w(r[K],i,j,m)),L=.6-n*n-o*o-p*p,L>0&&(L*=L,M=u[x+d+u[z+e+u[A+h]]]%12,t=L*L*w(r[M],n,o,p)),N=.6-q*q-s*s-v*v,N>0&&(N*=N,O=u[x+1+u[z+1+u[A+1]]]%12,y=N*N*w(r[O],q,s,v)),32*(f+g+t+y)}():function(){var a,b,c,d,e,h,i,j,k,l,m,r,x=v[function(){var a=0;return G>H&&(a=32),G>I&&(a|=16),H>I&&(a|=8),G>J&&(a|=4),H>J&&(a|=2),I>J&&(a|=1),a}()],A,F,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj;return a=x[0]<3?0:1,b=x[1]<3?0:1,c=x[2]<3?0:1,d=x[3]<3?0:1,e=x[0]<2?0:1,h=x[1]<2?0:1,i=x[2]<2?0:1,j=x[3]<2?0:1,k=x[0]<1?0:1,l=x[1]<1?0:1,m=x[2]<1?0:1,r=x[3]<1?0:1,A=G-a+n,F=H-b+n,K=I-c+n,L=J-d+n,M=G-e+o,N=H-h+o,O=I-i+o,P=J-j+o,Q=G-k+p,R=H-l+p,S=I-m+p,T=J-r+p,U=G+q,V=H+q,W=I+q,X=J+q,Y=B&255,Z=C&255,$=D&255,_=E&255,ba=.6-G*G-H*H-I*I-J*J,ba>0&&(ba*=ba,bb=u[Y+u[Z+u[$+u[_]]]]%32,f=ba*ba*w(s[bb],G,H,I,J)),bc=.6-A*A-F*F-K*K-L*L,bc>0&&(bc*=bc,bd=u[Y+a+u[Z+b+u[$+c+u[_+d]]]]%32,g=bc*bc*w(s[bd],A,F,K,L)),be=.6-M*M-N*N-O*O-P*P,be>0&&(be*=be,bf=u[Y+e+u[Z+h+u[$+i+u[_+j]]]]%32,t=be*be*w(s[bf],M,N,O,P)),bg=.6-Q*Q-R*R-S*S-T*T,bg>0&&(bg*=bg,bh=u[Y+k+u[Z+l+u[$+m+u[_+r]]]]%32,y=bg*bg*w(s[bh],Q,R,S,T)),bi=.6-U*U-V*V-W*W-X*X,bi>0&&(bi*=bi,bj=u[Y+1+u[Z+1+u[$+1+u[_+1]]]]%32,z=bi*bi*w(s[bj],U,V,W,X)),27*(f+g+t+y+z)}()}};c.exports=y}),g("toxi/math/noise",["require","exports","module","./noise/PerlinNoise","./noise/simplexNoise"],function(a,b,c){c.exports={PerlinNoise:a("./noise/PerlinNoise"),simplexNoise:a("./noise/simplexNoise")}}),g("toxi/math/waves/WaveState",["require","exports","module"],function(a,b,c){var d=function(a,b,c,d){this.phase=a,this.frequency=b,this.amp=c,this.offset=d};c.exports=d}),g("toxi/math/waves/AbstractWave",["require","exports","module","./WaveState"],function(a,b,c){var d=a("./WaveState"),e=function(a,b,c,d){if(a!==undefined||b!==undefined||c!==undefined||d!==undefined)this.setPhase(a),this.frequency=b,c===undefined&&(c=1),d===undefined&&(d=1),this.amp=c,this.offset=d};e.prototype={cyclePhase:function(a){return a===undefined&&(a=0),this.phase=(this.phase+a)%e.TWO_PI,this.phase<0&&(this.phase+=e.TWO_PI),this.phase},getClass:function(){return"AbstractWave"},pop:function(){if(this.stateStack===undefined||this.stateStack!==undefined&&this.stateStack.length<=0)console.log(this.toString()),console.log("no wave states on stack");else{var a=this.stateStack.pop();this.phase=a.phase,this.frequency=a.frequency,this.amp=a.amp,this.offset=a.offset}},push:function(){this.stateStack===undefined&&(this.stateStack=[]),this.stateStack.push(new d(this.phase,this.frequency,this.amp,this.offset))},reset:function(){this.phase=this.origPhase},setPhase:function(a){this.phase=a,this.cyclePhase(),this.origPhase=a},toString:function(){return this.getClass()+" phase:"+this.phase+" frequency: "+this.frequency+" amp: "+this.amp+" offset: "+this.offset},update:function(){console.log(this.getClass()+" this should be overridden")}},e.PI=3.141592653589793,e.TWO_PI=2*e.PI,e.hertzToRadians=function(a,b){return a/b*e.TWO_PI},e.radiansToHertz=function(a,b){return a/e.TWO_PI*b},c.exports=e}),g("toxi/math/waves/AMFMSineWave",["require","exports","module","../../internals","./AbstractWave"],function(a,b,c){var d=a("../../internals").extend,e=a("./AbstractWave"),f=function(a,b,c,d,f){typeof c=="number"?(e.apply(this,[a,b,1,c]),this.amod=d,this.fmod=f):(e.apply(this,[a,b]),this.amod=c,this.fmod=d)};d(f,e),f.prototype.getClass=function(){return"AMFMSineWave"},f.prototype.pop=function(){this.parent.pop.call(this),this.amod.pop(),this.fmod.pop()},f.prototype.push=function(){this.parent.push.call(this),this.amod.push(),this.fmod.push()},f.prototype.reset=function(){this.parent.reset.call(this),this.fmod.reset(),this.amod.reset()},f.prototype.update=function(){return this.amp=this.amod.update(),this.value=this.amp*Math.sin(this.phase)+this.offset,this.cyclePhase(this.frequency+this.fmod.update()),this.value},c.exports=f}),g("toxi/math/waves/ConstantWave",["require","exports","module","../../internals","./AbstractWave"],function(a,b,c){var d=a("../../internals").extend,e=a("./AbstractWave"),f=function(a){e.apply(this),this.value=a};d(f,e),f.prototype.getClass=function(){return"ConstantWave"},f.prototype.update=function(){return this.value},c.exports=f}),g("toxi/math/waves/FMHarmonicSquareWave",["require","exports","module","../../internals","./AbstractWave"],function(a,b,c){var d=a("../../internals").extend,e=a("./AbstractWave"),f=function(a,b,c,d,f){this.maxHarmonics=3,typeof c=="number"?(f===undefined&&(f=new ConstantWave(0)),e.apply(this,[a,b,c,d]),this.fmod=f):(e.apply(this,[a,b]),this.fmod=c)};d(f,e),f.prototype.getClass=function(){return"FMHarmonicSquareWave"},f.prototype.pop=function(){this.parent.pop.call(this),this.fmod.pop()},f.prototype.push=function(){this.parent.push.call(this),this.fmod.push()},f.prototype.reset=function(){this.parent.reset.call(this),this.fmod.reset()},f.prototype.update=function(){this.value=0;for(var a=1;a<=this.maxHarmonics;a+=2)this.value+=1/a*Math.sin(a*this.phase);return this.value*=this.amp,this.value+=this.offset,this.cyclePhase(this.frequency+this.fmod.update()),this.value},c.exports=f}),g("toxi/math/waves/FMSawtoothWave",["require","exports","module","../../internals","./AbstractWave"],function(a,b,c){var d=a("../../internals").extend,e=a("./AbstractWave"),f=function(a,b,c,d,f){typeof c=="number"?(e.apply(this,[a,b,c,d]),this.fmod=f):(e.apply(this,[a,b]),this.fmod=c)};d(f,e),f.prototype.getClass=function(){return"FMSawtoothWave"},f.prototype.pop=function(){this.parent.pop.call(this),this.fmod.pop()},f.prototype.push=function(){this.parent.push.call(this),this.fmod.push()},f.prototype.reset=function(){this.parent.reset.call(this),this.fmod.reset()},f.prototype.update=function(){return this.value=(this.phase/e.TWO_PI*2-1)*this.amp+this.offset,this.cyclePhase(this.frequency+this.fmod.update()),this.value},c.exports=f}),g("toxi/math/waves/FMSineWave",["require","exports","module","../../internals","./AbstractWave"],function(a,b,c){var d=a("../../internals").extend,e=a("./AbstractWave"),f=function(a,b,c,d,f){typeof c=="number"?(e.apply(this,[a,b,c,d]),this.fmod=f):(e.apply(this,[a,b]),this.fmod=c)};d(f,e),f.prototype.getClass=function(){return"FMSineWave"},f.prototype.pop=function(){this.parent.pop.call(this),this.fmod.pop()},f.prototype.push=function(){this.parent.push.call(this),this.fmod.push()},f.prototype.reset=function(){this.parent.reset.call(this),this.fmod.reset()},f.prototype.update=function(){return this.value=Math.sin(this.phase)*this.amp+this.offset,this.cyclePhase(this.frequency+this.fmod.update()),this.value},c.exports=f}),g("toxi/math/waves/FMSquareWave",["require","exports","module","../../internals","./AbstractWave","./ConstantWave"],function(a,b,c){var d=a("../../internals").extend,e=a("./AbstractWave"),f=a("./ConstantWave"),g=function(a,b,c,d,g){typeof c=="number"?g===undefined?e.apply(this,[a,b,c,d,new f(0)]):(e.apply(this,[a,b,c,d]),this.fmod=g):(e.apply(this,[a,b]),this.fmod=c)};d(g,e),g.prototype.getClass=function(){return"FMSquareWave"},g.prototype.pop=function(){this.parent.pop.call(this),this.fmod.pop()},g.prototype.push=function(){this.parent.push.call(this),this.fmod.push()},g.prototype.reset=function(){this.parent.reset.call(this),this.fmod.reset()},g.prototype.update=function(){return this.value=(this.phase/e.TWO_PI<.5?1:-1)*this.amp+this.offset,this.cyclePhase(this.frequency+this.fmod.update()),this.value},c.exports=g}),g("toxi/math/waves/FMTriangleWave",["require","exports","module","../../internals","../mathUtils","./AbstractWave","./ConstantWave"],function(a,b,c){var d=a("../../internals").extend,e=a("../mathUtils"),f=a("./AbstractWave"),g=a("./ConstantWave"),h=function(a,b,c,d,e){typeof c=="number"?e!==undefined?(f.apply(this,[a,b,c,d]),this.fmod=e):f.apply(this,[a,b,c,d,new g(0)]):f.apply(this,[a,b,1,0])};d(h,f),h.prototype.getClass=function(){return"FMTriangleWave"},h.prototype.pop=function(){this.parent.pop.call(this),this.fmod.pop()},h.prototype.push=function(){this.parent.push.call(this),this.fmod.push()},h.prototype.reset=function(){this.parent.reset.call(this),this.fmod.reset()},h.prototype.update=function(){return this.value=2*this.amp*(Math.abs(f.PI-this.phase)*e.INV_PI-.5)+this.offset,this.cyclePhase(this.frequency+this.fmod.update()),this.value},c.exports=h}),g("toxi/math/waves/SineWave",["require","exports","module","../../internals","./AbstractWave"],function(a,b,c){var d=a("../../internals").extend,e=a("./AbstractWave"),f=function(a,b,c,d){e.apply(this,[a,b,c,d])};d(f,e),f.prototype.getClass=function(){return"SineWave"},f.prototype.pop=function(){this.parent.pop.call(this)},f.prototype.push=function(){this.parent.push.call(this)},f.prototype.update=function(){return this.value=Math.sin(this.phase)*this.amp+this.offset,this.cyclePhase(this.frequency),this.value},c.exports=f}),g("toxi/math/waves",["require","exports","module","./waves/AbstractWave","./waves/AMFMSineWave","./waves/ConstantWave","./waves/FMHarmonicSquareWave","./waves/FMSawtoothWave","./waves/FMSineWave","./waves/FMSquareWave","./waves/FMTriangleWave","./waves/SineWave","./waves/WaveState"],function(a,b,c){c.exports={AbstractWave:a("./waves/AbstractWave"),AMFMSineWave:a("./waves/AMFMSineWave"),ConstantWave:a("./waves/ConstantWave"),FMHarmonicSquareWave:a("./waves/FMHarmonicSquareWave"),FMSawtoothWave:a("./waves/FMSawtoothWave"),FMSineWave:a("./waves/FMSineWave"),FMSquareWave:a("./waves/FMSquareWave"),FMTriangleWave:a("./waves/FMTriangleWave"),SineWave:a("./waves/SineWave"),WaveState:a("./waves/WaveState")}}),g("toxi/math",["require","exports","module","./math/BezierInterpolation","./math/CircularInterpolation","./math/CosineInterpolation","./math/DecimatedInterpolation","./math/ExponentialInterpolation","./math/Interpolation2D","./math/LinearInterpolation","./math/mathUtils","./math/mathUtils","./math/ScaleMap","./math/SigmoidInterpolation","./math/SinCosLUT","./math/ThresholdInterpolation","./math/ZoomLensInterpolation","./math/noise","./math/waves"],function(a,b,c){c.exports={BezierInterpolation:a("./math/BezierInterpolation"),CircularInterpolation:a("./math/CircularInterpolation"),CosineInterpolation:a("./math/CosineInterpolation"),DecimatedInterpolation:a("./math/DecimatedInterpolation"),ExponentialInterpolation:a("./math/ExponentialInterpolation"),Interpolation2D:a("./math/Interpolation2D"),LinearInterpolation:a("./math/LinearInterpolation"),mathUtils:a("./math/mathUtils"),MathUtils:a("./math/mathUtils"),ScaleMap:a("./math/ScaleMap"),SigmoidInterpolation:a("./math/SigmoidInterpolation"),SinCosLUT:a("./math/SinCosLUT"),ThresholdInterpolation:a("./math/ThresholdInterpolation"),ZoomLensInterpolation:a("./math/ZoomLensInterpolation")},c.exports.noise=a("./math/noise"),c.exports.waves=a("./math/waves")}),g("toxi/physics2d/VerletSpring2D",["require","exports","module"],function(a,b,c){var d=function(a,b,c,d){this.a=a,this.b=b,this.restLength=c,this.strength=d};d.EPS=1e-6,d.prototype={getRestLength:function(){return this.restLength},getStrength:function(){return this.strength},lockA:function(a){return this.isALocked=a,this},lockB:function(a){return this.isALocked=a,this},setRestLength:function(a){return this.restLength=a,this.restLengthSquared=a*a,this},setStrength:function(a){return this.strength=a,this},update:function(a){var b=this.b.sub(this.a),c=b.magnitude()+d.EPS,e=(c-this.restLength)/(c*(this.a.invWeight+this.b.invWeight))*this.strength;!this.a.isLocked&&!this.isALocked&&(this.a.addSelf(b.scale(e*this.a.invWeight)),a&&this.a.applyConstraints()),!this.b.isLocked&&!this.isBLocked&&(this.b.addSelf(b.scale(-e*this.b.invWeight)),a&&this.b.applyConstraints())}},c.exports=d}),g("toxi/physics2d/PullBackString2D",["require","exports","module","../internals","./VerletSpring2D"],function(a,b,c){var d=a("../internals"),e=a("./VerletSpring2D"),f=function(a,b,c){e.apply(this,[a,b,0,c]),a.lock(),this.setRestLength(.5)};d.extend(f,e),f.prototype.update=function(a){this.b.distanceToSquared(this.a)>this.restLengthSquared&&this.parent.update.call(this,a)},c.exports=f}),g("toxi/physics2d/VerletConstrainedSpring2D",["require","exports","module","../internals","./VerletSpring2D"],function(a,b,c){var d=a("../internals"),e=a("./VerletSpring2D"),f=function(a,b,c,d,f){e.call(this,a,b,c,d),this.limit=f===undefined?Number.MAX_VALUE:f};d.extend(f,e),f.update=function(a){var b=this.b.sub(this.a),c=b.magnitude()+e.EPS,d=(c-this.restLength)/(c*(this.a.invWeight+this.b.invWeight))*this.strength;!this.a.isLocked&&!this.isALocked&&(this.a.addSelf(b.scale(d*this.a.invWeight).limit(this.limit)),a&&this.a.applyConstraints()),!this.b.isLocked&&!this.isBLocked&&(this.b.subSelf(b.scale(d*this.b.invWeight).limit(this.limit)),a&&this.b.applyConstraints())},c.exports=f}),g("toxi/physics2d/VerletMinDistanceSpring2D",["require","exports","module","../internals","./VerletSpring2D"],function(a,b,c){var d=a("../internals"),e=a("./VerletSpring2D"),f=function(a,b,c,d){e.call(this,a,b,c,d),this.setRestLength(c)};d.extend(f,e),f.prototype.update=function(a){this.b.distanceToSquared(this.a)<this.restLengthSquared&&this.parent.update.call(this,a)},c.exports=f}),g("toxi/physics2d/behaviors/AttractionBehavior",["require","exports","module"],function(a,b,c){var d=function(a,b,c,d){if(arguments.length<3)throw{name:"IncorrectParameters",message:"Constructor received incorrect Parameters"};this.jitter=d||0,this.attractor=a,this.strength=c,this.setRadius(b)};d.prototype={applyBehavior:function(a){var b=this.attractor.sub(a),c=b.magSquared();if(c<this.radiusSquared){var d=b.normalizeTo(1-c/this.radiusSquared).jitter(this.jitter).scaleSelf(this.attrStrength);a.addForce(d)}},configure:function(a){this.timeStep=a,this.setStrength(this.strength)},getAttractor:function(){return this.attractor},getJitter:function(){return this.jitter},getRadius:function(){return this.radius},getStrength:function(){return this.strength},setAttractor:function(a){this.attractor=a},setJitter:function(a){this.jitter=a},setRadius:function(a){this.radius=a,this.radiusSquared=a*a},setStrength:function(a){this.strength=a,this.attrStrength=a*this.timeStep}},c.exports=d}),g("toxi/physics2d/constraints/AxisConstraint",["require","exports","module"],function(a,b,c){var d=function(a,b){this.axis=a,this.constraint=b};d.prototype.applyConstraint=function(a){a.setComponent(this.axis,this.constraint)},c.exports=d}),g("toxi/physics2d/constraints/CircularConstraint",["require","exports","module"],function(a,b,c){var d=function(a,b){arguments.length==1?this.circle=a:(console.log("a: "+a),this.circle=new toxi.Circle(a,b))};d.prototype.applyConstraint=function(a){this.circle.containsPoint(a)&&a.set(this.circle.add(a.sub(this.circle).normalizeTo(this.circle.getRadius())))},c.exports=d}),g("toxi/physics2d/constraints/MaxConstraint",["require","exports","module"],function(a,b,c){var d=function(a,b){this.axis=a,this.threshold=b};d.prototype.applyConstraint=function(a){a.getComponent(this.axis)>this.threshold&&a.setComponent(this.axis,this.threshold)},c.exports=d}),g("toxi/physics2d/constraints/MinConstraint",["require","exports","module"],function(a,b,c){var d=function(a,b){this.axis=a,this.threshold=b};d.prototype.applyConstraint=function(a){a.getComponent(this.axis)<this.threshold&&a.setComponent(this.axis,this.threshold)},c.exports=d}),g("toxi/physics2d/constraints/RectConstraint",["require","exports","module"],function(a,b,c){var d=function(a,b){arguments.length==1?this.rect=a.copy():arguments.length>1&&(this.rect=new toxi.Rect(a,b)),this.intersectRay=new toxi.Ray2D(this.rect.getCentroid(),new toxi.Vec2D)};d.prototype={applyConstraint:function(a){this.rect.containsPoint(a)&&a.set(this.rect.intersectsRay(this.intersectRay.setDirection(this.intersectRay.sub(a)),0,Number.MAX_VALUE))},getBox:function(){return this.rect.copy()},setBox:function(a){this.rect=a.copy(),this.intersectRay.set(this.rect.getCentroid())}},c.exports=d}),g("toxi/THREE/ToxiclibsSupport",["require","exports","module","../internals"],function(a,b,c){var d=a("../internals"),e=function(a){if(THREE===undefined)throw new Error("THREE.js has not been loaded");this.scene=a,this.objectDictionary={}},f=function(a,b,c,d){a.faces.push(new THREE.Face3(b,c,d))},g=function(a,b){var c=new THREE.Vector3(b.x,b.y,b.z);a.vertices.push(new THREE.Vertex(c))};e.createLineGeometry=function(a){var b=new THREE.Geometry;return g(b,a.a),g(b,a.b),b.computeCentroids(),b.computeFaceNormals(),b.computeVertexNormals(),b},e.createMeshGeometry=function(a){var b=new THREE.Geometry,c=function(a){var c=[a.a,a.b,a.c],d=b.vertices.length,e=0,h=3;for(e=0;e<h;e++){var i=c[e];g(b,i)}f(b,d,d+1,d+2)};for(var d=0,e=a.faces.length;d<e;d++)c(a.faces[d]);return b.computeCentroids(),b.computeFaceNormals(),b.computeVertexNormals(),b},e.createMesh=function(a,b){b===undefined&&(b=new THREE.MeshBasicMaterial);var c=e.createMeshGeometry(a);return new THREE.Mesh(c,b)},e.createParticle=function(a,b){var c=new THREE.Particle(b);return c.position.x=a.x,c.position.y=a.y,c.position.z=a.z,c},e.prototype={addLine:function(a,b,c){b===undefined&&(b=new THREE.LineBasicMaterial),c===undefined&&(c=!0);var d=e.createLineGeometry(a),f=new THREE.Line(d,b);return c&&(this.objectDictionary[a]=f),this.scene.add(f),f},addMesh:function(a,b,c){var d=undefined;arguments.length==1?(d==a.geometry,b=a.materials,c=obj_or_holdInDictionary):d=a,c===undefined&&(c=!0);var e=this.createMesh(d,b);return c&&(this.objectDictionary[d]=e),this.scene.add(e),e},addParticles:function(a,b,c){b===undefined&&(b=new THREE.ParticleBasicMaterial),a=d.tests.isArray(a)?a:[a];var e=new THREE.Geometry;for(var f=0,h=a.length;f<h;f++)g(e,a[f]);c&&(this.objectDictionary[position]=e);var i=new THREE.ParticleSystem(e,b);return this.scene.add(i),e},createMeshGeometry:function(a){return e.createMeshGeometry(a)},createMesh:function(a,b){return e.createMesh(a,b)},removeObject:function(a){var b=this.objectDictionary[a];scene.removeObject(b),delete this.objectDictionary[a]}},c.exports=e}),g("toxi/THREE",["require","exports","module","./THREE/ToxiclibsSupport"],function(a,b,c){c.exports={ToxiclibsSupport:a("./THREE/ToxiclibsSupport")}}),g("toxi/utils/datatypes/ArraySet",["require","exports","module","../../internals"],function(a,b,c){var d=a("../../internals"),e=function(a){Array.apply(this);if(arguments.length>=1)for(var b=0,c=a.length;b<c;b++){var d=a[b];this.indexOf(d)<0&&this.push(d)}};d.extend(e,Array),d.mixin(e.prototype,{add:function(a){return this.contains(a)?!1:(this.push(a),!0)},addAll:function(a){var b=this;for(var c=0,d=a.length;c<d;c++)this.push(a[c])},clear:function(){this.retainAll([])},clone:function(){return new e(this)},contains:function(a){return this.indexOf(a)>=0},containsAll:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];if(!this.contains(d))return!1}return!0},containsAny:function(a){for(var b=0,c=a.length;b<c;b++)if(this.contains(a[b]))return!0;return!1},equals:function(a){return this===a},get:function(a){return this[a]},iterator:function(){return new d.Iterator(this)},isEmpty:function(){return this.length<1},remove:function(a){var b=this.indexOf(a);return b<0?!1:(this.splice(b,1),!0)},removeAll:function(){this.retainAll([])},retainAll:function(a){var b=this,c=!1;for(var d=0;d<this.length;d++){var e=this[d];a.indexOf(e)<0&&(this.splice(d,1),c=!0,d--)}return c},size:function(){return this.length},toArray:function(a){a=a||[];for(var b=0;b<this.length;b++)this.hasOwnProperty()&&(a[b]=this[b]);return a}}),c.exports=e}),g("toxi/utils/datatypes/FloatRange",["require","exports","module","../../math/mathUtils"],function(a,b,c){var d=a("../../math/mathUtils"),e=function(a,b){a=a||.1,b=b||1;if(a>b){var c=b;b=a,a=c}this.min=a,this.max=b,this.currValue=a};e.prototype={adjustCurrentBy:function(a){return this.setCurrent(this.currValue+a)},copy:function(){var a=new e(this.min,this.max);return a.currValue=this.currValue,a},getAt:function(a){return this.min+(this.max-this.min-d.EPS)*a},getCurrent:function(){return this.currValue},getMedian:function(){return(this.min+this.max)*.5},getRange:function(){return this.max-this.min},isValueInRange:function(a){return a>=this.min&&a<=this.max},pickRandom:function(){return this.currValue=d.random(min,max),this.currValue},toArray:function(a){var b=[],c=this.min;while(c<this.max)b.push(c),c+=a;return b},toString:function(){return"FloatRange: "+this.min+" -> "+this.max}},c.exports=e}),g("toxi/utils/datatypes/UndirectedGraph",["require","exports","module","./ArraySet"],function(a,b,c){var d=a("./ArraySet"),e=function(){this._nodeLinks={},this._nodeIDs=[]};e.prototype={add:function(a){if(this._nodeLinks[a]!==undefined)return;this._nodeLinks[a]=new d,this._nodeIDs.push(a)},connect:function(a,b){if(this._nodeLinks[a]===undefined)throw new Error("nodeA has not been added");if(this._nodeLinks[b]===undefined)throw new Error("nodeB has not been added");this._nodeLinks[a].push(b),this._nodeLinks[b].push(a)},disconnect:function(a,b){if(this._nodeLinks[a]===undefined)throw new Error("nodeA has not been added");if(this._nodeLinks[b]===undefined)throw new Error("nodeB has not been added");this._nodeLinks[a].splice(this._nodeLinks[a].indexOf(b),1),this._nodeLinks[b].splice(this._nodeLinks[b].indexOf(a),1)},getConnectedNodesFor:function(a){if(this._nodeLinks[a]===undefined)throw new Error("node has not been added");return this._nodeLinks[a]},getNodes:function(){return this._nodeIDs},remove:function(a){var b=this._nodeLinks[a];if(b===undefined)return;for(var c=0,d=b.length;c<d;c++){var e=b[c],f=e.indexOf(a);e.splice(f,1)}delete this._nodeLinks[a];var c=this._nodeIDs.indexOf(a);this._nodeIDs.splice(a,1)}},c.exports=e}),g("toxi/utils/datatypes",["require","exports","module","./datatypes/ArraySet","./datatypes/FloatRange","./datatypes/UndirectedGraph"],function(a,b,c){c.exports={ArraySet:a("./datatypes/ArraySet"),FloatRange:a("./datatypes/FloatRange"),UndirectedGraph:a("./datatypes/UndirectedGraph")}}),g("toxi/utils",["require","exports","module","./utils/datatypes"],function(a,b,c){c.exports={},c.exports.datatypes=a("./utils/datatypes")}),g("toxi/geom/Matrix4x4",["require","exports","module","../math/mathUtils","./Vec3D","../internals"],function(a,b,c){var d=a("../math/mathUtils"),e=a("../internals"),f=a("./Vec3D"),g=function(a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q){this.temp=[],this.matrix=[];var r=this;if(arguments.length===0)this.matrix[0]=[1,0,0,0],this.matrix[1]=[0,1,0,0],this.matrix[2]=[0,0,1,0],this.matrix[3]=[0,0,0,1];else if(typeof a=="number"){var s=[a,b,c,d],t=[f,g,h,i],u=[j,k,l,m],v=[n,o,p,q];this.matrix=[s,t,u,v]}else if(e.tests.isArray(a)){var w=a;if(w.length!=9&&w.length!=16)throw new Error("Matrix4x4: Array length must == 9 or 16");w.length==16?(this.matrix=[],this.matrix[0]=w.slice(0,4),this.matrix[1]=w.slice(4,8),this.matrix[2]=w.slice(8,12),this.matrix[3]=w.slice(12)):(this.matrix[0]=w.slice(0,3),this.matrix[0][3]=NaN,this.matrix[1]=w.slice(3,6),this.matrix[1][3]=NaN,this.matrix[2]=w.slice(6,9),this.matrix[2][3]=NaN,this.matrix[3]=[NaN,NaN,NaN,NaN])}else if(e.tests.isMatrix4x4(a)){var x=a,y=0,z=0,A,B;if(x.matrix.length==16)for(y=0;y<4;y++)this.matrix[y]=[x.matrix[y][0],x.matrix[y][1],x.matrix[y][2],x.matrix[y][3]];else if(x.matrix.length==4){A=x.matrix.length;for(y=0;y<A;y++){B=x.matrix[y].length,r.matrix[y]=[];for(z=0;z<B;z++)r.matrix[y][z]=x.matrix[y][z]}}}else console.error("Matrix4x4: incorrect parameters used to construct new instance")};g.prototype={add:function(a){var b=new g(this);return b.addSelf(a)},addSelf:function(a){for(var b=0;b<4;b++){var c=this.matrix[b],d=a.matrix[b];c[0]+=d[0],c[1]+=d[1],c[2]+=d[2],c[3]+=d[3]}return this},applyTo:function(a){return this.applyToSelf(new f(a))},applyToSelf:function(a){for(var b=0;b<4;b++){var c=this.matrix[b];this.temp[b]=a.x*c[0]+a.y*c[1]+a.z*c[2]+c[3]}return a.set(this.temp[0],this.temp[1],this.temp[2]).scaleSelf(1/this.temp[3]),a},copy:function(){return new g(this)},getInverted:function(){return(new g(this)).invert()},getRotatedAroundAxis:function(a,b){return(new g(this)).rotateAroundAxis(a,b)},getRotatedX:function(a){return(new g(this)).rotateX(a)},getRotatedY:function(a){return(new g(this)).rotateY(a)},getRotatedZ:function(a){return(new g(this)).rotateZ(a)},getTransposed:function(){return(new g(this)).transpose()},identity:function(){var a=this.matrix[0];return a[1]=a[2]=a[3]=0,a=this.matrix[1],a[0]=a[2]=a[3]=0,a=this.matrix[2],a[0]=a[1]=a[3]=0,a=this.matrix[3],a[0]=a[1]=a[2]=0,this.matrix[0][0]=1,this.matrix[1][1]=1,this.matrix[2][2]=1,this.matrix[3][3]=1,this},invert:function(){var a=[],b=[],c=[],d=this.toArray(),e=0;for(e=0;e<4;e++){var f=e<<2;b[e]=d[f],b[e+4]=d[f+1],b[e+8]=d[f+2],b[e+12]=d[f+3]}a[0]=b[10]*b[15],a[1]=b[11]*b[14],a[2]=b[9]*b[15],a[3]=b[11]*b[13],a[4]=b[9]*b[14],a[5]=b[10]*b[13],a[6]=b[8]*b[15],a[7]=b[11]*b[12],a[8]=b[8]*b[14],a[9]=b[10]*b[12],a[10]=b[8]*b[13],a[11]=b[9]*b[12];var g=b[0],h=b[1],i=b[2],j=b[3],l=b[4],m=b[5],n=b[6],o=b[7];c[0]=a[0]*m+a[3]*n+a[4]*o,c[0]-=a[1]*m+a[2]*n+a[5]*o,c[1]=a[1]*l+a[6]*n+a[9]*o,c[1]-=a[0]*l+a[7]*n+a[8]*o,c[2]=a[2]*l+a[7]*m+a[10]*o,c[2]-=a[3]*l+a[6]*m+a[11]*o,c[3]=a[5]*l+a[8]*m+a[11]*n,c[3]-=a[4]*l+a[9]*m+a[10]*n,c[4]=a[1]*h+a[2]*i+a[5]*j,c[4]-=a[0]*h+a[3]*i+a[4]*j,c[5]=a[0]*g+a[7]*i+a[8]*j,c[5]-=a[1]*g+a[6]*i+a[9]*j,c[6]=a[3]*g+a[6]*h+a[11]*j,c[6]-=a[2]*g+a[7]*h+a[10]*j,c[7]=a[4]*g+a[9]*h+a[10]*i,c[7]-=a[5]*g+a[8]*h+a[11]*i,a[0]=i*o,a[1]=j*n,a[2]=h*o,a[3]=j*m,a[4]=h*n,a[5]=i*m,a[6]=g*o,a[7]=j*l,a[8]=g*n,a[9]=i*l,a[10]=g*m,a[11]=h*l,g=b[8],h=b[9],i=b[10],j=b[11],l=b[12],m=b[13],n=b[14],o=b[15],c[8]=a[0]*m+a[3]*n+a[4]*o,c[8]-=a[1]*m+a[2]*n+a[5]*o,c[9]=a[1]*l+a[6]*n+a[9]*o,c[9]-=a[0]*l+a[7]*n+a[8]*o,c[10]=a[2]*l+a[7]*m+a[10]*o,c[10]-=a[3]*l+a[6]*m+a[11]*o,c[11]=a[5]*l+a[8]*m+a[11]*n,c[11]-=a[4]*l+a[9]*m+a[10]*n,c[12]=a[2]*i+a[5]*j+a[1]*h,c[12]-=a[4]*j+a[0]*h+a[3]*i,c[13]=a[8]*j+a[0]*g+a[7]*i,c[13]-=a[6]*i+a[9]*j+a[1]*g,c[14]=a[6]*h+a[11]*j+a[3]*g,c[14]-=a[10]*j+a[2]*g+a[7]*h,c[15]=a[10]*i+a[4]*g+a[9]*h,c[15]-=a[8]*h+a[11]*i+a[5]*g;var p=1/(b[0]*c[0]+b[1]*c[1]+b[2]*c[2]+b[3]*c[3]);for(e=0,k=0;e<4;e++){var q=this.matrix[e];for(var r=0;r<4;r++)q[r]=c[k++]*p}return this},multiply:function(a){return typeof a=="number"?(new g(this)).multiply(a):(new g(this)).multiplySelf(a)},multiplySelf:function(a){var b=0,c;if(typeof a=="number"){for(b=0;b<4;b++)c=this.matrix[b],c[0]*=a,c[1]*=a,c[2]*=a,c[3]*=a;return this}var d=a.matrix[0],e=a.matrix[1],f=a.matrix[2],g=a.matrix[3];for(b=0;b<4;b++){c=this.matrix[b];for(var h=0;h<4;h++)this.temp[h]=c[0]*d[h]+c[1]*e[h]+c[2]*f[h]+c[3]*g[h];c[0]=this.temp[0],c[1]=this.temp[1],c[2]=this.temp[2],c[3]=this.temp[3]}return this},rotateAroundAxis:function(a,b){var c,d,e,f,g,i,j,k;return c=a.x,d=a.y,e=a.z,f=Math.sin(b),g=Math.cos(b),i=1-g,j=i*c,k=i*d,h.set(j*c+g,j*d+f*e,j*e-f*d,0,j*d-f*e,k*d+g,k*e+f*c,0,j*e+f*d,k*e-f*c,i*e*e+g,0,0,0,0,1),this.multiplySelf(h)},rotateX:function(a){return h.identity(),h.matrix[1][1]=h.matrix[2][2]=Math.cos(a),h.matrix[2][1]=Math.sin(a),h.matrix[1][2]=-h.matrix[2][1],this.multiplySelf(h)},rotateY:function(a){return h.identity(),h.matrix[0][0]=h.matrix[2][2]=Math.cos(a),h.matrix[0][2]=Math.sin(a),h.matrix[2][0]=-h.matrix[0][2],this.multiplySelf(h)},rotateZ:function(a){return h.identity(),h.matrix[0][0]=h.matrix[1][1]=Math.cos(a),h.matrix[1][0]=Math.sin(a),h.matrix[0][1]=-h.matrix[1][0],this.multiplySelf(h)},scale:function(a,b,c){return(new g(this)).scaleSelf(a,b,c)},scaleSelf:function(a,b,c){if(e.tests.hasXYZ(a))b=a.y,c=a.z,a=a.x;else if(b===undefined||c===undefined)b=a,c=a;return h.identity(),h.matrix[0][0]=a,h.matrix[1][1]=b,h.matrix[2][2]=c,this.multiplySelf(h)},set:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q;if(typeof a=="number")q=this.matrix[0],q[0]=a,q[1]=b,q[2]=c,q[3]=d,q=this.matrix[1],q[0]=e,q[1]=f,q[2]=g,q[3]=h,q=this.matrix[2],q[0]=i,q[1]=j,q[2]=k,q[3]=l,q=this.matrix[3],q[0]=m,q[1]=n,q[2]=o,q[3]=p;else for(var r=0;r<4;r++){q=this.matrix[r];var s=q.matrix[r];q[0]=s[0],q[1]=s[1],q[2]=s[2],q[3]=s[3]}return this},setFrustrum:function(a,b,c,d,e,f){var g=b-a,h=c-d,i=f-e;return this.set(2*e/g,0,(a+b)/g,0,0,2*e/h,(c+d)/h,0,0,0,-(e+f)/i,-2*e*f/i,0,0,-1,0)},setOrtho:function(a,b,c,d,e,f){var g=[2/(b-a),0,0,(a+b)/(b-a),0,2/(c-d),0,(c+d)/(c-d),0,0,-2/(f-e),(f+e)/(f-e),0,0,0,1];return this.set.apply(this,g)},setPerspective:function(a,b,c,e){var f=c*Math.tan(.5*d.radians(a)),g=b*f;return this.setFrustrum(-g,g,f,-f,c,e)},setPosition:function(a,b,c){return this.matrix[0][3]=a,this.matrix[1][3]=b,this.matrix[2][3]=c,this},setScale:function(a,b,c){return this.matrix[0][0]=a,this.matrix[1][1]=b,this.matrix[2][2]=c,this},sub:function(a){return(new g(this)).subSelf(a)},subSelf:function(a){for(var b=0;b<4;b++){var c=this.matrix[b],d=a.matrix[b];c[0]-=d[0],c[1]-=d[1],c[2]-=d[2],c[3]-=d[3]}return this},toArray:function(a){a===undefined&&(a=[]);for(var b=0,c=0;b<4;b++){var d=this.matrix[b];for(var e=0;e<4;e++)a[c++]=d[e]}return a},toFloatArray:function(a){return new Float32Array(this.toArray(a))},toString:function(){return"| "+this.matrix[0][0]+" "+this.matrix[0][1]+" "+this.matrix[0][2]+" "+this.matrix[0][3]+" |\n"+"| "+this.matrix[1][0]+" "+this.matrix[1][1]+" "+this.matrix[1][2]+" "+this.matrix[1][3]+" |\n"+"| "+this.matrix[2][0]+" "+this.matrix[2][1]+" "+this.matrix[2][2]+" "+this.matrix[2][3]+" |\n"+"| "+this.matrix[3][0]+" "+this.matrix[3][1]+" "+this.matrix[3][2]+" "+this.matrix[3][3]+" |"},toTransposedFloatArray:function(a){a===undefined&&(a=[]);for(var b=0,c=0;b<4;b++)for(var d=0;d<4;d++)a[c++]=this.matrix[d][b];return a},translate:function(a,b,c){return(new g(this)).translateSelf(a,b,c)},translateSelf:function(a,b,c){return e.tests.hasXYZ(a)&&(b=a.y,c=a.z,a=a.x),h.identity(),h.setPosition(a,b,c),this.multiplySelf(h)},transpose:function(){return this.set(this.matrix[0][0],this.matrix[1][0],this.matrix[2][0],this.matrix[3][0],this.matrix[0][1],this.matrix[1][1],this.matrix[2][1],this.matrix[3][1],this.matrix[0][2],this.matrix[1][2],this.matrix[2][2],this.matrix[3][2],this.matrix[0][3],this.matrix[1][3],this.matrix[2][3],this.matrix[3][3])}};var h=new g;c.exports=g}),g("toxi/geom/Quaternion",["require","exports","module","../math/mathUtils","./Matrix4x4"],function(a,b,c){var d=a("../math/mathUtils"),e=a("./Matrix4x4"),f=function(a,b,c,d){arguments.length==4?(this.w=a,this.x=b,this.y=c,this.z=d):arguments.length==2?(this.x=b.x,this.y=b.y,this.z=b.z,this.w=a):arguments.length==1&&(this.w=q.w,this.x=q.x,this.y=q.y,this.z=q.z)};f.prototype={add:function(a){return new f(this.x+a.x,this.y+a.y,this.z+a.z,this.w+a.w)},addSelf:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this},copy:function(){return new f(this.w,this.x,this.y,this.z)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},getConjugate:function(){var a=new f;return a.x=-this.x,a.y=-this.y,a.z=-this.z,a.w=w,a},identity:function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},interpolateTo:function(a,b,c){return arguments.length==3?this.copy().interpolateTo(a,c.interpolate(0,1,b)):this.copy().interpolateToSelf(a,b)},interpolateToSelf:function(a,b,c){arguments.length==3&&(b=c.interpolate(0,1,b));var e,f,g=d.clip(this.dot(a),-1,1);if(1-g<d.EPS)e=1-b,f=b;else{var h=Math.acos(g),i=1/Math.sin(h);e=Math.sin(h*(1-b))*i,f=Math.sin(h*b)*i}return g<0?(this.w=e*this.w-f*a.w,this.x=e*this.x-f*a.x,this.y=e*this.y-f*a.y,this.z=e*this.z-f*a.z):(this.w=e*w+f*a.w,this.x=e*x+f*a.x,this.y=e*y+f*a.y,this.z=e*z+f*a.z),this},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},multiply:function(a){var b=new f;return b.w=this.w*a.w-x*a.x-y*a.y-z*a.z,b.x=this.w*a.x+x*a.w+y*a.z-z*a.y,b.y=this.w*a.y+y*a.w+z*a.x-x*a.z,b.z=this.w*a.z+z*a.w+x*a.y-y*a.x,b},normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return a>d.EPS&&(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a),this},scale:function(a){return new f(this.x*a,this.y*a,this.z*a,this.w*a)},scaleSelf:function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},set:function(a,b,c,d){return arguments.length==4?(this.w=a,this.x=b,this.y=c,this.z=d):arguments.length==2?(this.w=a,this.x=v.x,this.y=v.y,this.z=v.z):(this.w=q.w,this.x=q.x,this.y=q.y,this.z=q.z),this},sub:function(a){return new f(this.x-a.x,this.y-a.y,this.z-a.z,this.w-a.w)},subSelf:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this},toArray:function(){return[this.w,this.x,this.y,this.z]},toAxisAngle:function(){var a=[],b=Math.sqrt(1-this.w*this.w);return b<d.EPS?b=1:b=1/b,a[0]=Math.acos(this.w)*2,a[1]=this.x*b,a[2]=this.y*b,a[3]=this.z*b,a},toMatrix4x4:function(a){a===undefined&&(a=new e);var b=this.x+this.x,c=this.y+this.y,d=this.z+this.z,f=this.x*b,g=this.x*c,h=this.x*d,i=this.y*c,j=this.y*d,k=this.z*d,l=this.w*b,m=this.w*c,n=this.w*d,o=b+","+c+","+d+","+f+","+g+","+h+","+i+","+j+","+k+","+l+","+m+","+n;return a.set(1-(i+k),g-n,h+m,0,g+n,1-(f+k),j-l,0,h-m,j+l,1-(f+i),0,0,0,0,1)},toString:function(){return"{axis: ["+this.x+","+this.y+","+this.z+"], w: "+this.w+"}"}},f.DOT_THRESHOLD=.9995,f.createFromAxisAngle=function(a,b){b*=.5;var c=d.sin(b),e=d.cos(b),g=new f(e,a.getNormalizedTo(c));return g},f.createFromEuler=function(a,b,c){a*=.5,b*=.5,c*=.5;var e=d.sin(a),g=d.cos(a),h=d.sin(b),i=d.cos(b),j=d.sin(c),k=d.cos(c),l=g*i,m=e*h,n=new f;return n.x=j*l-k*m,n.y=k*e*i+j*g*h,n.z=k*g*h-j*e*i,n.w=k*l+j*m,n},f.createFromMatrix=function(a){var b=0,c=[],d=a.matrix[0][0]+a.matrix[1][1]+a.matrix[2][2];if(d>0)b=Math.sqrt(d+1),c[3]=b*.5,b=.5/b,c[0]=a.matrix[1][2]-a.matrix[2][1]*b,c[1]=a.matrix[2][0]-a.matrix[0][2]*b,c[2]=a.matrix[0][1]-a.matrix[1][0]*b;else{var e=[1,2,0],g=0,h=0,i=0;a.matrix[1][1]>a.matrix[0][0]&&(g=1),a.matrix[2][2]>a.matrix[g][g]&&(g=2),h=e[g],i=e[h],b=Math.sqrt(a.matrix[g][g]-(a.matrix[h][h]+a.matrix[i][i])+1),c[g]=b*.5,b=.5/b,c[3]=(a.matrix[h][i]-a.matrix[i][h])*b,c[h]=(a.matrix[g][h]+a.matrix[h][g])*b,c[i]=(a.matrix[g][i]+a.matrix[i][g])*b}return new f(c[3],c[0],c[1],c[2])},f.getAlignmentQuat=function(a,b){var c=a.getNormalized(),d=b.cross(c),e=d.magnitude()+1e-4,f=Math.atan2(e,b.dot(c));return this.createFromAxisAngle(d,f)},c.exports=f}),g("toxi/geom/Triangle3D",["require","exports","module","../math/mathUtils","./Vec3D","./Line3D","./AABB"],function(d,e,f){var g=d("../math/mathUtils"),h=d("./Vec3D"),i=d("./Line3D"),j=d("./AABB"),k=function(a,b,c){arguments.length==3&&(this.a=a,this.b=b,this.c=c)};k.createEquilateralFrom=function(a,b){var c=a.interpolateTo(b,.5),d=b.sub(a),e=a.cross(d.normalize());return c.addSelf(e.normalizeTo(d.magnitude()*g.SQRT3/2)),new k(a,b,c)},k.isClockwiseInXY=function(a,b,c){var d=(b.x-a.x)*(c.y-a.y)-(c.x-a.x)*(b.y-a.y);return d<0},k.isClockwiseInXZ=function(a,b,c){var d=(b.x-a.x)*(c.z-a.z)-(c.x-a.x)*(b.z-a.z);return d<0},k.isClockwiseInYZ=function(a,b,c){var d=(b.y-a.y)*(c.z-a.z)-(c.y-a.y)*(b.z-a.z);return d<0},k.prototype={closestPointOnSurface:function(d){var e=this.b.sub(this.a),f=this.c.sub(this.a),g=this.c.sub(this.b),h=d.sub(this.a),i=d.sub(this.b),j=d.sub(this.c),k=a.sub(this.p),l=b.sub(this.p),m=c.sub(this.p),n=h.dot(e),o=h.dot(f);if(n>0||o>0){var p=i.dot(this.a.sub(this.b)),q=j.dot(this.a.sub(this.c)),r=i.dot(g),s=j.dot(this.b.sub(this.c));if(p>0||r>0){if(q>0||s>0){var t=e.cross(f),u=t.dot(k.crossSelf(l));if(u>0||n<0||p<0){var v=t.dot(l.crossSelf(m));if(v>0||r<0||s<0){var w=t.dot(m.crossSelf(k));if(w>0||o<0||q<0){var x=v/(v+w+u),y=w/(v+w+u),z=1-x-y;return this.a.scale(x).addSelf(this.b.scale(y)).addSelf(this.c.scale(z))}return this.a.add(f.scaleSelf(o/(o+q)))}return this.b.add(g.scaleSelf(r/(r+s)))}return this.a.add(e.scaleSelf(n/(n+p)))}return this.c}return this.b}return this.a},computeCentroid:function(){return this.centroid=this.a.add(this.b).addSelf(this.c).scaleSelf(1/3),this.centroid},computeNormal:function(){return this.normal=this.a.sub(this.c).crossSelf(this.a.sub(this.b)).normalize(),this.normal},containsPoint:function(a){if(a.equals(this.a)||a.equals(this.b)||a.equals(this.c))return!0;var b=a.sub(this.a).normalize(),c=a.sub(this.b).normalize(),d=a.sub(this.c).normalize(),e=Math.acos(b.dot(c));return e+=Math.acos(c.dot(d)),e+=Math.acos(d.dot(b)),g.abs(e-g.TWO_PI)<=.005},flipVertexOrder:function(){var a=this.a;return this.a=this.c,this.c=this.t,this},fromBarycentric:function(a){return new h(this.a.x*a.x+this.b.x*a.y+this.c.x*a.z,this.a.y*a.x+this.b.y*a.y+this.c.y*a.z,this.a.z*a.x+this.b.z*a.y+this.c.z*a.z)},getBoundingBox:function(){var a=h.min(h.min(this.a,this.b),this.c),b=h.max(h.max(this.a,this.b),this.c);return j.fromMinMax(a,b)},getClosestPointTo:function(a){var b=new i(this.a,this.b),c=b.closestPointTo(a),d=b.set(this.b,this.c).closestPointTo(a),e=b.set(this.c,this.a).closestPointTo(a),f=a.sub(c).magSquared(),g=a.sub(d).magSquared(),h=a.sub(e).magSquared(),j=f,k=c;return g<j&&(j=g,k=d),h<j&&(k=e),k},isClockwiseInXY:function(){return k.isClockwiseInXY(this.a,this.b,this.c)},isClockwiseInXZ:function(){return k.isClockwiseInXY(this.a,this.b,this.c)},isClockwiseInYZ:function(){return k.isClockwiseInXY(this.a,this.b,this.c)},set:function(a,b,c){this.a=a,this.b=b,this.c=c},toBarycentric:function(a){var c=b.sub(this.a).cross(this.c.sub(this.a)),d=c.getNormalized(),e=d.dot(c),f=d.dot(this.b.sub(a).cross(this.c.sub(a))),g=f/e,i=d.dot(this.c.sub(a).cross(this.a.sub(a))),j=i/e,k=1-g-j;return new h(g,j,k)},toString:function(){return"Triangle: "+this.a+","+this.b+","+this.c}},f.exports=k}),g("toxi/geom/mesh/Face",["require","exports","module","../Triangle3D"],function(a,b,c){var d=a("../Triangle3D"),e=function(a,b,c,d,e,f){this.a=a,this.b=b,this.c=c,this.normal=this.a.sub(this.c).crossSelf(this.a.sub(this.b)).normalize(),this.a.addFaceNormal(this.normal),this.b.addFaceNormal(this.normal),this.c.addFaceNormal(this.normal),d!==undefined&&(this.uvA=d,this.uvB=e,this.uvC=f)};e.prototype={computeNormal:function(){this.normal=this.a.sub(this.c).crossSelf(this.a.sub(this.b)).normalize()},flipVertexOrder:function(){var a=this.a;this.a=this.b,this.b=a,this.normal.invert()},getCentroid:function(){return this.a.add(this.b).addSelf(this.c).scale(1/3)},getClass:function(){return"Face"},getVertices:function(a){return a!==undefined?(a[0]=this.a,a[1]=this.b,a[2]=this.c):a=[this.a,this.b,this.c],a},toString:function(){return this.getClass()+" "+this.a+", "+this.b+", "+this.c},toTriangle:function(){return new d(this.a.copy(),this.b.copy(),this.c.copy())}},c.exports=e}),g("toxi/geom/mesh/SphereFunction",["require","exports","module","../../math/mathUtils","../Vec3D","../Sphere"],function(a,b,c){var d=a("../../math/mathUtils"),e=a("../Vec3D"),f=a("../../internals"),g=a("../Sphere"),h=function(a){a===undefined&&(this.sphere=new g(new e,1)),f.tests.isSphere(a)?this.sphere=a:this.sphere=new g(new e,a),this.phiRange=d.PI,this.thetaRange=d.TWO_PI};h.prototype={computeVertexFor:function(a,b,c){b-=d.HALF_PI;var e=d.cos(b),f=d.cos(c),g=d.sin(b),h=d.sin(c),i=d.sign(e)*d.abs(e);return a.x=i*d.sign(f)*d.abs(f),a.y=d.sign(g)*d.abs(g),a.z=i*d.sign(h)*d.abs(h),a.scaleSelf(this.sphere.radius).addSelf(this.sphere)},getPhiRange:function(){return this.phiRange},getPhiResolutionLimit:function(a){return a},getThetaRange:function(){return this.thetaRange},getThetaResolutionLimit:function(a){return a},setMaxPhi:function(a){this.phiRange=d.min(a/2,d.PI)},setMaxTheta:function(a){this.thetaRange=d.min(a,d.TWO_PI)}},c.exports=h}),g("toxi/geom/mesh/SurfaceMeshBuilder",["require","exports","module","./TriangleMesh","../Vec3D"],function(a,b,c){var d=a("./TriangleMesh"),e=a("../Vec3D"),f=function(a){this.func=a};f.prototype={createMesh:function(){var a={mesh:undefined,resolution:0,size:1,isClosed:!0};if(arguments.length==1)if(typeof arguments[0]=="object"){var b=arguments[0];a.mesh=b.mesh,a.resolution=b.res||b.resoultion||0,b.size!==undefined&&(a.size=b.size),b.isClosed!==undefined&&(a.isClosed=b.isClosed)}else a.resolution=arguments[0];else arguments.length>2&&(a.mesh=arguments[0],a.resolution=arguments[1],a.size=arguments[2],arguments.length==4&&(a.isClosed=arguments[3]));var c=a.mesh;if(c===undefined||c===null)c=new d;var f=new e,g=new e,h=new e,i=new e,j=new e,k=new e,l=this.func.getPhiResolutionLimit(a.resolution),m=this.func.getPhiRange(),n=this.func.getThetaResolutionLimit(a.resolution),o=this.func.getThetaRange(),p=1/(1==a.resolution%2?a.resolution-0:a.resolution);for(var q=0;q<l;q++){var r=q*m*p,s=(q+1)*m*p;for(var t=0;t<=n;t++){var u=t*o/a.resolution,v=this.func;f=v.computeVertexFor(f,s,u).scaleSelf(a.size),g=v.computeVertexFor(g,r,u).scaleSelf(a.size),g.distanceTo(f)<1e-4&&g.set(f),t>0?(t==n&&a.isClosed&&(f.set(j),g.set(k)),c.addFace(h,i,f),c.addFace(i,g,f)):(j.set(f),k.set(g)),h.set(f),i.set(g)}}return c},getFunction:function(){return this.func},setFunction:function(a){this.func=a}},b.SurfaceMeshBuilder=f,c.exports=f}),g("toxi/geom/Sphere",["require","exports","module","../internals","./Vec3D","./mesh/SphereFunction"],function(a,b,c){var d=a("../internals"),e=a("./Vec3D"),f=a("./mesh/SphereFunction"),g;a(["./mesh/SurfaceMeshBuilder"],function(a){g=a});var h=function(a,b){a===undefined?(e.apply(this,[new e]),this.radius=1):d.tests.hasXYZ(a)?(e.apply(this,[a]),d.tests.isSphere(a)?this.radius=a.radius:this.radius=b):(e.apply(this,[new e]),this.radius=a)};d.extend(h,e),h.prototype.containsPoint=function(a){var b=this.sub(a).magSquared();return b<=this.radius*this.radius},h.prototype.intersectRay=function(a){var b,c,d,e,f=a.sub(this),g=f.magSquared(),h=-f.dot(a.getDirection()),i=this.radius*this.radius-(g-h*h);if(i>=0){i=Math.sqrt(i),c=h+i,d=h-i;if(c>=0||d>=0)c>0&&d>0?c>d&&(e=c,c=d,d=e):d>0&&(e=c,c=d,d=e);b=[c,d]}return b},h.prototype.intersectSphereTriangle=function(a,b){b.set(a.closestPointOnSurface(this));var c=b.sub(this);return c.magSquared()<=this.radius*this.radius},h.prototype.tangentPlaneNormalAt=function(a){return this.sub(a).normalize()},h.prototype.toMesh=function(){var a={mesh:undefined,resolution:0};arguments.length===1?typeof arguments[0]=="object"?(a.mesh=arguments[0].mesh,a.resolution=arguments[0].res||arguments[0].resolution):a.resolution=arguments[0]:(a.mesh=arguments[0],a.resolution=arguments[1]);var b=new g(new f(this));return b.createMesh(a.mesh,a.resolution,1)},c.exports=h}),g("toxi/geom/mesh/Vertex",["require","exports","module","../../internals","../Vec3D"],function(a,b,c){var d=a("../../internals").extend,e=a("../Vec3D"),f=function(a,b){e.apply(this,[a]),this.id=b,this.normal=new e};d(f,e),f.prototype.addFaceNormal=function(a){this.normal.addSelf(a)},f.prototype.clearNormal=function(){this.normal.clear()},f.prototype.computeNormal=function(){this.normal.normalize()},f.prototype.toString=function(){return this.id+": p: "+this.parent.toString.call(this)+" n:"+this.normal.toString()},c.exports=f}),g("toxi/geom/mesh/TriangleMesh",["require","exports","module","../../math/mathUtils","../Matrix4x4","./Face","../Vec3D","../AABB","../Sphere","../Triangle3D","../Quaternion","./Vertex"],function(a,b,c){var d=a("../../math/mathUtils"),e=a("../Matrix4x4"),g=a("./Face"),h=a("../Vec3D"),i=a("../Sphere"),j=a("../Triangle3D"),k=a("../Quaternion"),l=a("./Vertex"),m;a(["../AABB"],function(a){m=a});var n=function(a,b,c){return a===undefined&&(a="untitled"),b===undefined&&(b=n.DEFAULT_NUM_VERTICES),c===undefined&&(c=n.DEFAULT_NUM_FACES),this.setName(a),this.matrix=new e,this.vertices=[],this.__verticesObject={},this.faces=[],this.numVertices=0,this.numFaces=0,this.uniqueVertexID=-1,this};n.DEFAULT_NUM_VERTICES=1e3,n.DEFAULT_NUM_FACES=3e3,n.DEFAULT_STRIDE=4,n.prototype={addFace:function(a,b,c,d,e,f,h){h===undefined&&(f===undefined?e===undefined?(d=undefined,e=undefined,f=undefined,h=undefined):(e=undefined,f=undefined,h=undefined):(h=f,f=e,e=d));var i=this.__checkVertex(a),j=this.__checkVertex(b),k=this.__checkVertex(c);if(i.id!==j.id&&i.id!==k.id&&j.id!==k.id){if(d!==undefined){var l=i.sub(k).crossSelf(i.sub(j));if(d.dot(l)<0){var m=i;i=j,j=m}}var n=new g(i,j,k,e,f,h);this.faces.push(n),this.numFaces++}return this},addMesh:function(a){var b=a.getFaces().length;for(var c=0;c<b;c++){var d=a.getFaces()[c];this.addFace(d.a,d.b,d.c)}return this},center:function(a){this.computeCentroid();var b=a!==undefined?a.sub(this.centroid):this.centroid.getInverted(),c=this.vertices.length;for(var d=0;d<c;d++){var e=this.vertices[d];e.addSelf(b)}return this.getBoundingBox(),this.bounds},__checkVertex:function(a){var b=a.toString(),c=this.__verticesObject[b];return c===undefined&&(c=this.createVertex(a,this.uniqueVertexID++),this.__verticesObject[b]=c,this.vertices.push(c),this.numVertices++),c},clear:function(){return this.vertices=[],this.faces=[],this.bounds=undefined,this.numVertices=0,this.numFaces=0,this},computeCentroid:function(){this.centroid.clear();var a=this.vertices.length;for(var b=0;b<a;b++)this.centroid.addSelf(this.vertices[b]);return this.centroid.scaleSelf(1/this.numVertices).copy()},computeFaceNormals:function(){var a=this.faces.length;for(var b=0;b<a;b++)this.faces[b].computeNormal()},computeVertexNormals:function(){var a=this.vertices.length,b=0;for(b=0;b<a;b++)this.vertices[b].clearNormal();a=this.faces.length;for(b=0;b<a;b++){var c=this.faces[b];c.a.addFaceNormal(c),c.b.addFaceNormal(c),c.c.addFaceNormal(c)}a=this.vertices.length;for(b=0;b<a;b++)this.vertices[b].computeNormal();return this},copy:function(){var a=new n(this.name+"-copy",this.numVertices,this.numFaces),b=this.faces.length;for(var c=0;c<b;c++){var d=this.faces[c];a.addFace(d.a,d.b,d.c,d.normal,d.uvA,d.uvB,d.uvC)}return a},createVertex:function(a,b){return new l(a,b)},faceOutwards:function(){this.computeCentroid();var a=this.faces.length;for(var b=0;b<a;b++){var c=this.faces[b],d=c.getCentroid().sub(this.centroid),e=d.dot(c.normal);e<0&&c.flipVertexOrder()}return this},flipVertexOrder:function(){var a=this.faces.length;for(var b=0;b<a;b++){var c=this.faces[b],d=c.a;c.a=c.b,c.b=d,c.normal.invert()}return this},flipYAxis:function(){return this.transform((new e).scaleSelf(1,-1,1)),this.flipVertexOrder(),this},getBoundingBox:function(){var a=h.MAX_VALUE.copy(),b=h.MIN_VALUE.copy(),c=this.vertices.length;for(var d=0;d<c;d++){var e=this.vertices[d];a.minSelf(e),b.maxSelf(e)}return this.bounds=m.fromMinMax(a,b),this.bounds},getBoundingSphere:function(){var a=0;this.computeCentroid();var b=this.vertices.length;for(var c=0;c<b;c++){var e=this.vertices[c];a=d.max(a,e.distanceToSquared(this.centroid))}return new i(this.centroid,Math.sqrt(a))},getClosestVertexToPoint:function(a){var b,c=Number.MAX_VALUE,d=this.vertices.length;for(var e=0;e<d;e++){var f=this.vertices[e],g=f.distanceToSquared(a);g<c&&(b=f,c=g)}return b},getFaceNormalsAsArray:function(a,b,c){if(arguments.length===0)a=undefined,b=0,c=n.DEFAULT_STRIDE;else if(arguments.length==1&&typeof arguments[0]=="object"){var e=arguments[0];a=e.normals,b=e.offset,c=e.stride}c=d.max(c,3),a===undefined&&(a=[]);var f=b,g=this.faces.length;for(var h=0;h<g;h++){var i=this.faces[h];a[f]=i.normal.x,a[f+1]=i.normal.y,a[f+2]=i.normal.z,f+=c,a[f]=i.normal.x,a[f+1]=i.normal.y,a[f+2]=i.normal.z,f+=c,a[f]=i.normal.x,a[f+1]=i.normal.y,a[f+2]=i.normal.z,f+=c}return a},getFaces:function(){return this.faces},getFacesAsArray:function(){var a=[],b=0,c=this.faces.length;for(var d=0;d<c;d++){var e=this.faces[d];a[b++]=e.a.id,a[b++]=e.b.id,a[b++]=e.c.id}return a},getIntersectionData:function(){return this.intersector.getIntersectionData()},getMeshAsVertexArray:function(a,b,c){a===undefined&&(a=undefined),b===undefined&&(b=0),c===undefined&&(c=n.DEFAULT_STRIDE),c=d.max(c,3),a===undefined&&(a=[]);var e=0,f=this.faces.length;for(var g=0;g<f;++g){var h=this.faces[g];a[e]=h.a.x,a[e+1]=h.a.y,a[e+2]=h.a.z,e+=c,a[e]=h.b.x,a[e+1]=h.b.y,a[e+2]=h.b.z,e+=c,a[e]=h.c.x,a[e+1]=h.c.y,a[e+2]=h.c.z,e+=c}return a},getNumFaces:function(){return this.numFaces},getNumVertices:function(){return this.numVertices},getRotatedAroundAxis:function(a,b){return this.copy().rotateAroundAxis(a,b)},getRotatedX:function(a){return this.copy().rotateX(a)},getRotatedY:function(a){return this.copy().rotateY(a)},getRotatedZ:function(a){return this.copy().rotateZ(a)},getScaled:function(a){return this.copy().scale(a)},getTranslated:function(a){return this.copy().translate(a)},getUniqueVerticesAsArray:function(){var a=[],b=0,c=this.vertices.length;for(var d=0;b<c;d++){var e=this.vertices[d];a[b++]=e.x,a[b++]=e.y,a[b++]=e.z}return a},getVertexAtPoint:function(a){var b;for(var c=0;c<this.vertices.length;c++)this.vertices[c].equals(a)&&(b=c);return this.vertices[b]},getVertexIndex:function(a){var b=-1,c=this.vertices.length;for(var d=0;d<c;d++){var e=this.vertices[d];e.equals(a)&&(matchedVertex=d)}return matchedVertex},getVertexForID:function(a){var b,c=this.vertices.length;for(var d=0;d<c;d++){var e=this.vertices[d];if(e.id==a){b=e;break}}return b},getVertexNormalsAsArray:function(a,b,c){b===undefined&&(b=0),c===undefined&&(c=n.DEFAULT_STRIDE),c=d.max(c,3),a===undefined&&(a=[]);var e=b,f=this.faces.length;for(var g=0;g<f;g++){var h=this.faces[g];a[e]=h.a.normal.x,a[e+1]=h.a.normal.y,a[e+2]=h.a.normal.z,e+=c,a[e]=h.b.normal.x,a[e+1]=h.b.normal.y,a[e+2]=h.b.normal.z,e+=c,a[e]=h.c.normal.x,a[e+1]=h.c.normal.y,a[e+2]=h.c.normal.z,e+=c}return a},getVertices:function(){return this.vertices},handleSaveAsSTL:function(a,b){console.log("TriangleMesh.handleSaveAsSTL() currently not implemented")},intersectsRay:function(a){var b=this.intersector.getTriangle(),c=this.faces.length;for(var d=0;d<c;d++){b.a=f.a,b.b=f.b,b.c=f.c;if(this.intersector.intersectsRay(a))return!0}return!1},perforateFace:function(a,b){var c=a.getCentroid(),d=1-b,e=a.a.interpolateTo(c,d),f=a.b.interpolateTo(c,d),g=a.c.interpolateTo(c,d);return this.removeFace(a),this.addFace(a.a,f,e),this.addFace(a.a,a.b,f),this.addFace(a.b,g,f),this.addFace(a.b,a.c,g),this.addFace(a.c,e,g),this.addFace(a.c,a.a,e),new j(e,f,g)},pointTowards:function(a){return this.transform(k.getAlignmentQuat(a,h.Z_AXIS).toMatrix4x4(),!0)},removeFace:function(a){var b=-1,c=this.faces.length;for(var d=0;d<c;d++)if(this.faces[d]==a){b=d;break}b>-1&&this.faces.splice(b,1)},rotateAroundAxis:function(a,b){return this.transform(this.matrix.identity().rotateAroundAxis(a,b))},rotateX:function(a){return this.transform(this.matrix.identity().rotateX(a))},rotateY:function(a){return this.transform(this.matrix.identity().rotateY(a))},rotateZ:function(a){return this.transform(this.matrix.identity().rotateZ(a))},saveAsOBJ:function(a){console.log("TriangleMesh.saveAsOBJ() currently not implemented")},saveAsSTL:function(a,b,c){console.log("TriangleMesh.saveAsSTL() currently not implemented")},scale:function(a){return this.transform(this.matrix.identity().scaleSelf(a))},setName:function(a){return this.name=a,this},toString:function(){return"TriangleMesh: "+this.name+" vertices: "+this.getNumVertices()+" faces: "+this.getNumFaces()},toWEMesh:function(){console.log("TriangleMesh.toWEMesh() currently not implemented")},transform:function(a,b){b===undefined&&(b=!0);var c=this.vertices.length;for(var d=0;d<c;d++){var e=this.vertices[d];e.set(a.applyTo(e))}return b&&this.computeFaceNormals(),this},translate:function(a,b,c){return arguments.length==1&&(b=a.y,c=a.z,a=a.x),this.transform(this.matrix.identity().translateSelf(a,b,c))},updateVertex:function(a,b){var c=this.getVertexIndex(a);return c>-1&&(this.vertices.splice(v,1),this.vertices[c].set(b),this.vertices.push(v)),this}},c.exports=n}),g("toxi/geom/AABB",["require","exports","module","../internals","./Vec3D","./mesh/TriangleMesh","../math/mathUtils"],function(a,b,c){var d=a("../internals"),e=a("./Vec3D"),f=a("./mesh/TriangleMesh"),g=a("../math/mathUtils"),h=function(a,b){var c,f;a===undefined?(e.apply(this),this.setExtent(new e)):typeof a=="number"?(e.apply(this,[new e]),this.setExtent(a)):d.tests.hasXYZ(a)&&(e.apply(this,[a]),b===undefined&&d.tests.isAABB(a)?this.setExtent(a.getExtent()):typeof b=="number"?this.setExtent(new e(b,b,b)):this.setExtent(b))};d.extend(h,e),h.fromMinMax=function(a,b){var c=e.min(a,b),d=e.max(a,b);return new h(c.interpolateTo(d,.5),d.sub(c).scaleSelf(.5))},h.prototype.containsPoint=function(a){return a.isInAABB(this)},h.prototype.copy=function(){return new h(this)},h.prototype.getExtent=function(){return this.extent.copy()},h.prototype.getMax=function(){return this.max.copy()},h.prototype.getMin=function(){return this.min.copy()},h.prototype.getNormalForPoint=function(a){a=a.sub(this);var b=this.extent.sub(a.getAbs()),c=a.getSignum(),d=e.X_AXIS.scale(c.x),f=b.x;return b.y<f&&(f=b.y,d=e.Y_AXIS.scale(c.y)),b.z<f&&(d=e.Z_AXIS.scale(c.z)),d},h.prototype.includePoint=function(a){return this.min.minSelf(a),this.max.maxSelf(a),this.set(this.min.interpolateTo(this.max,.5)),this.extent.set(this.max.sub(this.min).scaleSelf(.5)),this},h.prototype.intersectsBox=function(a){var b=a.sub(this);return Math.abs(b.x)<=this.extent.x+a.extent.x&&Math.abs(b.y)<=this.extent.y+a.extent.y&&Math.abs(b.z)<=this.extent.z+a.extent.z},h.prototype.intersectsRay=function(a,b,c){var d=a.getDirection().reciprocal(),e=d.x<0,f=d.y<0,g=d.z<0,h=e?this.max:this.min,i=(h.x-a.x)*d.x;h=e?this.min:this.max;var j=(h.x-a.x)*d.x;h=f?this.max:this.min;var k=(h.y-a.y)*d.y;h=f?this.min:this.max;var l=(h.y-a.y)*d.y;if(i>l||k>j)return null;k>i&&(i=k),l<j&&(j=l),h=g?max:min;var m=(h.z-a.z)*d.z;h=g?min:max;var n=(h.z-a.z)*d.z;return i>n||m>j?null:(m>i&&(i=m),n<j&&(j=n),i<c&&j>b?a.getPointAtDistance(i):undefined)},h.prototype.intersectsSphere=function(a,b){arguments.length==1&&(b=a.radius);var c,d=0;return a.x<this.min.x?(c=a.x-this.min.x,d=c*c):a.x>this.max.x&&(c=a.x-this.max.x,d+=c*c),a.y<this.min.y?(c=a.y-this.min.y,d+=c*c):a.y>this.max.y&&(c=a.y-this.max.y,d+=c*c),a.z<this.min.z?(c=a.z-this.min.z,d+=c*c):a.z>this.max.z&&(c=a.z-this.max.z,d+=c*c),d<=b*b},h.prototype.intersectsTriangle=function(a){var b,c,d,e,f,h,i,j;b=a.a.sub(this),c=a.b.sub(this),d=a.c.sub(this),f=c.sub(b),h=d.sub(c),i=b.sub(d),j=f.getAbs();if(this.testAxis(f.z,-f.y,j.z,j.y,b.y,b.z,d.y,d.z,this.extent.y,this.extent.z))return!1;if(this.testAxis(-f.z,f.x,j.z,j.x,b.x,b.z,d.x,d.z,this.extent.x,this.extent.z))return!1;if(this.testAxis(f.y,-f.x,j.y,j.x,c.x,c.y,d.x,d.y,this.extent.x,this.extent.y))return!1;j=h.getAbs();if(this.testAxis(h.z,-h.y,j.z,j.y,b.y,b.z,d.y,d.z,this.extent.y,this.extent.z))return!1;if(this.testAxis(-h.z,h.x,j.z,j.x,b.x,b.z,d.x,d.z,this.extent.x,this.extent.z))return!1;if(this.testAxis(h.y,-h.x,j.y,j.x,b.x,b.y,c.x,c.y,this.extent.x,this.extent.y))return!1;j=i.getAbs();if(this.testAxis(i.z,-i.y,j.z,j.y,b.y,b.z,c.y,c.z,this.extent.y,this.extent.z))return!1;if(this.testAxis(-i.z,i.x,j.z,j.x,b.x,b.z,c.x,c.z,this.extent.x,this.extent.z))return!1;if(this.testAxis(i.y,-i.x,j.y,j.x,c.x,c.y,d.x,d.y,this.extent.x,this.extent.y))return!1;if(g.min(b.x,c.x,d.x)>this.extent.x||g.max(b.x,c.x,d.x)<-this.extent.x)return!1;if(g.min(b.y,c.y,d.y)>this.extent.y||g.max(b.y,c.y,d.y)<-this.extent.y)return!1;if(g.min(b.z,c.z,d.z)>this.extent.z||g.max(b.z,c.z,d.z)<-this.extent.z)return!1;e=f.cross(h);var k=-e.dot(b);return this.planeBoxOverlap(e,k,extent)?!0:!1},h.prototype.planeBoxOverlap=function(a,b,c){var d=new e,f=new e;return a.x>0?(d.x=-c.x,f.x=c.x):(d.x=c.x,f.x=-c.x),a.y>0?(d.y=-c.y,f.y=c.y):(d.y=c.y,f.y=-c.y),a.z>0?(d.z=-c.z,f.z=c.z):(d.z=c.z,f.z=-c.z),a.dot(d)+b>0?!1:a.dot(f)+b<0?!1:!0},h.prototype.set=function(a,b,c){return d.tests.isAABB(a)?(this.extent.set(a.extent),e.set.apply(this,[a])):(d.tests.hasXYZ(a)&&(b=a.y,c=a.z,a=a.a),this.x=a,this.y=b,this.z=c,this.updateBounds(),this)},h.prototype.setExtent=function(a){return this.extent=a.copy(),this.updateBounds()},h.prototype.testAxis=function(a,b,c,d,e,f,g,h,i,j){var k=a*e+b*f,l=a*g+b*h,m,n;k<l?(m=k,n=l):(m=l,n=k);var o=c*i+d*j;return m>o||n<-o},h.prototype.toMesh=function(a){a===undefined&&(a=new f("aabb",8,12));var b=new e(this.min.x,this.max.y,this.max.z),c=new e(this.max.x,this.max.y,this.max.z),d=new e(this.max.x,this.min.y,this.max.z),g=new e(this.min.x,this.min.y,this.max.z),h=new e(this.min.x,this.max.y,this.min.z),i=new e(this.max.x,this.max.y,this.min.z),j=new e(this.max.x,this.min.y,this.min.z),k=new e(this.min.x,this.min.y,this.min.z);return a.addFace(b,c,g,undefined,undefined,undefined,undefined),a.addFace(c,d,g,undefined,undefined,undefined,undefined),a.addFace(i,h,j,undefined,undefined,undefined,undefined),a.addFace(h,k,j,undefined,undefined,undefined,undefined),a.addFace(h,i,b,undefined,undefined,undefined,undefined),a.addFace(i,c,b,undefined,undefined,undefined,undefined),a.addFace(j,k,g,undefined,undefined,undefined,undefined),a.addFace(j,g,d,undefined,undefined,undefined,undefined),a.addFace(h,b,k,undefined,undefined,undefined,undefined),a.addFace(b,g,k,undefined,undefined,undefined,undefined),a.addFace(c,i,j,undefined,undefined,undefined,undefined),a.addFace(c,j,d,undefined,undefined,undefined,undefined),a},h.prototype.toString=function(){return"<aabb> pos: "+this.parent.toString()+" ext: "+this.extent.toString()},h.prototype.updateBounds=function(){return this.extent!==undefined&&(this.min=this.sub(this.extent),this.max=this.add(this.extent)),this},c.exports=h}),g("toxi/geom/Vec3D",["require","exports","module","./Vec2D","../math/mathUtils","../internals"],function(a,b,c){var d=a("../internals"),e,f;a(["./Vec2D","./AABB"],function(a,b){e=a,f=b});var g=a("../math/mathUtils"),h=function(a,b,c){d.tests.hasXYZ(a)?(this.x=a.x,this.y=a.y,this.z=a.z):a===undefined?(this.x=0,this.y=0,this.z=0):(this.x=a,this.y=b,this.z=c)};h.prototype={abs:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this},add:function(a,b,c){return d.tests.hasXYZ(a)?new h(this.x+a.x,this.y+a.y,this.z+a.z):new h(this.x+a,this.y+b,this.z+c)},addSelf:function(a,b,c){return a!==undefined&&b!==undefined&&c!==undefined?(this.x+=a,this.y+=b,this.z+=c):(this.x+=a.x,this.y+=a.y,this.z+=a.z),this},angleBetween:function(a,b){var c;return b?c=this.getNormalized().dot(a.getNormalized()):c=this.dot(a),Math.acos(c)},clear:function(){return this.x=this.y=this.z=0,this},compareTo:function(a){return this.x==a.x&&this.y==a.y&&this.z==a.z?0:this.magSquared()-a.magSqaured()},constrain:function(a,b){var c;return d.tests.isAABB(a)?(b=a.getMax(),c=a.getMin()):c=a,this.x=g.clip(this.x,c.x,b.x),this.y=g.clip(this.y,c.y,b.y),this.z=g.clip(this.z,c.z,b.z),this},copy:function(){return new h(this)},cross:function(a){return new h(this.y*a.z-a.y*this.z,this.z*a.x-a.z*this.x,this.x*a.y-a.x*this.y)},crossInto:function(a,b){var c=a.x,d=a.y,e=a.z;return result.x=this.y*e-d*this.z,result.y=this.z*c-e*this.x,result.z=this.x*d-c*this.y,result},crossSelf:function(a){var b=this.y*a.z-a.y*this.z,c=this.z*a.x-a.z*this.x;return this.z=a.y-a.x*this.y,this.y=c,this.x=b,this},distanceTo:function(a){if(a!==undefined){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return Math.sqrt(b*b+c*c+d*d)}return NaN},distanceToSquared:function(a){if(a!==undefined){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d}return NaN},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},equals:function(a){return d.tests.hasXYZ(a)?this.x==a.x&&this.y==a.y&&this.z==a.z:!1},equalsWithTolerance:function(a,b){return Math.abs(this.x-a.x)<b&&Math.abs(this.y-a.y)<b&&Math.abs(this.z-a.z)<b?!0:!1},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},frac:function(){return this.x-=Math.floor(this.x),this.y-=Math.floor(this.y),this.z-=Math.floor(this.z),this},getAbs:function(){return(new h(this)).abs()},getComponent:function(a){typeof a=="number"&&(a===h.Axis.X?a=0:a===h.Axis.Y?a=1:a=2);switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z}},getConstrained:function(a){return(new h(this)).constrain(a)},getFloored:function(){return(new h(this)).floor()},getFrac:function(){return(new h(this)).frac()},getInverted:function(){return new h(-this.x,-this.y,-this.z)},getLimited:function(a){return this.magSquared()>a*a?this.getNormalizedTo(a):new h(this)},getNormalized:function(){return(new h(this)).normalize()},getNormalizedTo:function(a){return(new h(this)).normalizeTo(a)},getReciprocal:function(){return this.copy().reciprocal()},getReflected:function(a){return this.copy().reflect(a)},getRotatedAroundAxis:function(a,b){return(new h(this)).rotateAroundAxis(a,b)},getRotatedX:function(a){return(new h(this)).rotateX(a)},getRotatedY:function(a){return(new h(this)).rotateY(a)},getRotatedZ:function(a){return(new h(this)).rotateZ(a)},getSignum:function(){return(new h(this)).signum()},headingXY:function(){return Math.atan2(this.y,this.x)},headingXZ:function(){return Math.atan2(this.z,this.x)},headingYZ:function(){return Math.atan2(this.y,this.z)},immutable:function(){return this},interpolateTo:function(a,b,c){return c===undefined?new h(this.x+(a.x-this.x)*b,this.y+(a.y-this.y)*b,this.z+(a.z-this.z)*b):new h(c.interpolate(this.y,a.y,b),c.interpolate(this.y,a.y,b),c.interpolate(this.z,a.z,b))},interpolateToSelf:function(a,b,c){return c===undefined?(this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b):(this.x=c.interpolate(this.x,a.x,b),this.y=c.interpolate(this.y,a.y,b),this.z=c.interpolate(this.z,a.z,b)),this},invert:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},isInAABB:function(a,b){if(b){var c=b.x;if(this.x<a.x-c||this.x>a.x+c)return!1;c=b.y;if(this.y<a.y-c||this.y>a.y+c)return!1;c=b.y;if(this.z<a.z-c||this.y>a.z+c)return!1}return!0},isMajorAxis:function(a){var b=g.abs(this.x),c=g.abs(this.y),d=g.abs(this.z),e=1-a;if(b>e){if(c<a)return d<a}else if(c>e){if(b<a)return d<a}else if(d>e&&b<a)return c<a;return!1},isZeroVector:function(){return Math.abs(this.x)<g.EPS&&Math.abs(this.y)<g.EPS&&g.abs(this.z)<g.EPS},jitter:function(a,b,c){if(b===undefined||c===undefined)b=c=a;return this.x+=g.normalizedRandom()*a,this.y+=g.normalizedRandom()*b,this.z+=g.normalizedRandom()*c,this},limit:function(a){return this.magSquared()>a*a?this.normalize().scaleSelf(a):this},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},magSquared:function(){return this.x*this.x+this.y*this.y+this.z*this.z},maxSelf:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},minSelf:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},modSelf:function(a,b,c){if(b===undefined||c===undefined)b=c=a;return this.x%=a,this.y%=b,this.z%=c,this},normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return a>0&&(a=1/a,this.x*=a,this.y*=a,this.z*=a),this},normalizeTo:function(a){var b=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return b>0&&(b=a/b,this.x*=b,this.y*=b,this.z*=b),this},reciprocal:function(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this},reflect:function(a){return this.set(a.scale(this.dot(a)*2).subSelf(this))},rotateAroundAxis:function(a,b){var c=a.x,d=a.y,e=a.z,f=c*this.x,g=c*this.y,h=c*this.z,i=d*this.x,j=d*this.y,k=d*this.z,l=e*this.x,m=e*this.y,n=e*this.z;si=Math.sin(b),co=Math.cos(b);var o=c*(f+j+n)+(this.x*(d*d+e*e)-c*(j+n))*co+(-m+k)*si,p=d*(f+j+n)+(this.y*(c*c+e*e)-d*(f+n))*co+(l-h)*si,q=e*(f+j+n)+(this.z*(c*c+d*d)-e*(f+j))*co+(-i+g)*si;return this.x=o,this.y=p,this.z=q,this},rotateX:function(a){var b=Math.cos(a),c=Math.sin(a),d=b*this.z-c*this.y;return this.y=c*this.z+b*this.y,this.z=d,this},rotateY:function(a){var b=Math.cos(a),c=Math.sin(a),d=b*this.x-c*this.z;return this.z=c*this.x+b*this.z,this.x=d,this},rotateZ:function(a){var b=Math.cos(a),c=Math.sin(a),d=b*this.x-c*this.y;return this.y=c*this.x+b*this.y,this.x=d,this},roundToAxis:function(){return Math.abs(this.x)<.5?this.x=0:(this.x=this.x<0?-1:1,this.y=this.z=0),Math.abs(this.y)<.5?this.y=0:(this.y=this.y<0?-1:1,this.x=this.z=0),Math.abs(this.z)<.5?this.z=0:(this.z=this.z<0?-1:1,this.x=this.y=0),this},scale:function(a,b,c){if(d.tests.hasXYZ(a))return new h(this.x*a.x,this.y*a.y,this.z*a.z);if(b===undefined||c===undefined)b=c=a;return new h(this.x*a,this.y*b,this.z*c)},scaleSelf:function(a,b,c){if(d.tests.hasXYZ(a))return this.x*=a.x,this.y*=a.y,this.z*=a.z,this;if(b===undefined||c===undefined)b=c=a;return this.x*=a,this.y*=b,this.z*=c,this},set:function(a,b,c){if(d.tests.hasXYZ(a))return this.x=a.x,this.y=a.y,this.z=a.z,this;if(b===undefined||c===undefined)b=c=a;return this.x=a,this.y=b,this.z=c,this},setXY:function(a){return this.x=a.x,this.y=a.y,this},shuffle:function(a){var b;for(var c=0;c<a;c++)switch(Math.floor(Math.random()*3)){case 0:b=this.x,this.x=this.y,this.z=b;break;case 1:b=this.x,this.x=this.z,this.z=b;break;case 2:b=this.y,this.y=this.z,this.z=b}return this},signum:function(){return this.x=this.x<0?-1:this.x===0?0:1,this.y=this.y<0?-1:this.y===0?0:1,this.z=this.z<0?-1:this.z===0?0:1,this},sub:function(a,b,c){if(d.tests.hasXYZ(a))return new h(this.x-a.x,this.y-a.y,this.z-a.z);if(b===undefined||c===undefined)b=c=a;return new h(this.x-a,this.y-b,this.z-c)},subSelf:function(a,b,c){if(d.tests.hasXYZ(a))return this.x-=a.x,this.y-=a.y,this.z-=a.z,this;if(b===undefined||c===undefined)b=c=a;return this.x-=a,this.y-=b,this.z-=c,this},to2DXY:function(){return new e(this.x,this.y)},to2DXZ:function(){return new e(this.x,this.z)},to2DYZ:function(){return new e(this.y,this.z)},toArray:function(){return[this.x,this.y,this.z]},toArray4:function(a){var b=this.toArray();return b[3]=a,b},toCartesian:function(){var a=this.x*Math.cos(this.z),b=a*Math.cos(this.y),c=this.x*Math.sin(this.z),d=a*Math.sin(this.y);return this.x=b,this.y=c,this.z=d,this},toSpherical:function(){var a=Math.abs(this.x)>g.EPS?this.x:g.EPS,b=this.z,c=Math.sqrt(a*a+this.y*this.y+b*b);return this.z=Math.asin(this.y/c),this.y=Math.atan(b/a)+(a<0?Math.PI:0),this.x=c,this},toString:function(){return"[ x: "+this.x+", y: "+this.y+", z: "+this.z+"]"}},h.MIN_VALUE=new h(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),h.MAX_VALUE=new h(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),h.fromXYTheta=function(a){return new h(Math.cos(a),Math.sin(a),0)},h.fromXZTheta=function(a){return new h(Math.cos(a),0,Math.sin(a))},h.fromYZTheta=function(a){return new h(0,Math.cos(a),Math.sin(a))},h.max=function(a,b){return new h(Math.max(a.x,b.x),Math.max(a.y,b.y),Math.max(a.z,b.z))},h.min=function(a,b){return new h(Math.min(a.x,b.x),Math.min(a.y,b.y),Math.min(a.z,b.z))},h.randomVector=function(){var a=new h(Math.random()*2-1,Math.random()*2-1,Math.random()*2-1);return a.normalize()},h.ZERO=new h(0,0,0),h.X_AXIS=new h(1,0,0),h.Y_AXIS=new h(0,1,0),h.Z_AXIS=new h(0,0,1),h.Axis={X:{getVector:function(){return h.X_AXIS},toString:function(){return"Vec3D.Axis.X"}},Y:{getVector:function(){return h.Y_AXIS},toString:function(){return"Vec3D.Axis.Y"}},Z:{getVector:function(){return h.Z_AXIS},toString:function(){return"Vec3D.Axis.Z"}}},c.exports=h}),g("toxi/geom/Vec2D",["require","exports","module","../math/mathUtils","./Vec3D","./Vec3D","./Vec3D","./Vec3D","../internals"],function(a,b,c){var d=a("../math/mathUtils"),e=a("../internals"),f=e.tests.hasXY,g=e.tests.isRect,h=function(a,b){f(a)?(b=a.y,a=a.x):(a===undefined&&(a=0),b===undefined&&(b=0)),this.x=a,this.y=b};h.Axis={X:{getVector:function(){return h.X_AXIS},toString:function(){return"Vec2D.Axis.X"}},Y:{getVector:function(){return h.Y_AXIS},toString:function(){return"Vec2D.Axis.Y"}}};var i=function(a,b){return f(a)?(b=a.y,a=a.x):a!==undefined&&b===undefined?b=a:a===undefined?a=0:b===undefined&&(b=0),{x:a,y:b}};h.prototype={abs:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},add:function(a,b){var c=new h(a,b);return c.x+=this.x,c.y+=this.y,c},addSelf:function(a,b){var c=i(a,b);return this.x+=c.x,this.y+=c.y,this},angleBetween:function(a,b){if(b===undefined){var c=this.dot(a);return Math.acos(this.dot(a))}var d=b?this.getNormalized().dot(a.getNormalized()):this.dot(a);return Math.acos(d)},clear:function(){return this.x=this.y=0,this},compareTo:function(a){return this.x==a.x&&this.y==a.y?0:this.magSquared()-a.magSquared()},constrain:function(a,b){return f(a)&&f(b)?(this.x=d.clip(this.x,a.x,b.x),this.y=d.clip(this.y,a.y,b.y)):g(a)&&(this.x=d.clip(this.x,a.x,a.x+a.width),this.y=d.clip(this.y,a.y,a.y+a.height)),this},copy:function(){return new h(this)},cross:function(a){return this.x*a.y-this.y*a.x},distanceTo:function(a){if(a!==undefined){var b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)}return NaN},distanceToSquared:function(a){if(a!==undefined){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c}return NaN},dot:function(a){return this.x*a.x+this.y*a.y},equals:function(a){return f(a)?this.x==a.x&&this.y==a.y:!1},equalsWithTolerance:function(a,b){return d.abs(this.x-a.x)<b&&d.abs(this.y-a.y)<b?!0:!1},floor:function(){return this.x=d.floor(this.x),this.y=d.floor(this.y),this},frac:function(){return this.x-=d.floor(this.x),this.y-=d.floor(this.y),this},getAbs:function(){return(new h(this)).abs()},getComponent:function(a){return typeof a=="number"&&(a=a===0?h.Axis.X:h.Axis.Y),a==h.Axis.X?this.x:a==h.Axis.Y?this.y:0},getConstrained:function(a){return(new h(this)).constrain(a)},getFloored:function(){return(new h(this)).floor()},getFrac:function(){return(new h(this)).frac()},getInverted:function(){return new h(-this.x,-this.y)},getLimited:function(a){return this.magSquared()>a*a?this.getNormalizedTo(a):new h(this)},getNormalized:function(){return(new h(this)).normalize()},getNormalizedTo:function(a){return(new h(this)).normalizeTo(a)},getPerpendicular:function(){return(new h(this)).perpendicular()},getReciprocal:function(){return(new h(this)).reciprocal()},getReflected:function(a){return(new h(this)).reflect(a)},getRotated:function(a){return(new h(this)).rotate(a)},getSignum:function(){return(new h(this)).signum()},heading:function(){return Math.atan2(this.y,this.x)},interpolateTo:function(a,b,c){return c===undefined?new h(this.x+(a.x-this.x)*b,this.y+(a.y-this.y)*b):new h(c.interpolate(this.x,a.x,b),c.interpolate(this.y,a.y,b))},interpolateToSelf:function(a,b,c){return c===undefined?(this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b):(this.x=c.interpolate(this.x,a.x,b),this.y=c.interpolate(this.y,a.y,b)),this},invert:function(){return this.x*=-1,this.y*=-1,this},isInCircle:function(a,b){var c=this.sub(a).magSquared();return c<=b*b},isInRectangle:function(a){return this.x<a.x||this.x>a.x+a.width?!1:this.y<a.y||this.y>a.y+a.height?!1:!0},isInTriangle:function(a,b,c){var e=this.sub(a).normalize(),f=this.sub(b).normalize(),g=this.sub(c).normalize(),h=Math.acos(e.dot(f));return h+=Math.acos(f.dot(g)),h+=Math.acos(g.dot(e)),Math.abs(h-d.TWO_PI)<=.005},isMajorAxis:function(a){var b=Math.abs(this.x),c=Math.abs(this.y),d=1-a;return b>d?c<a:c>d?b<a:!1},isZeroVector:function(){return Math.abs(this.x)<d.EPS&&Math.abs(this.y)<d.EPS},jitter:function(a,b){var c=i(a,b);return this.x+=d.normalizedRandom()*c.x,this.y+=d.normalizedRandom()*c.y,this},limit:function(a){return this.magSquared()>a*a?this.normalize().scaleSelf(a):this},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},magSquared:function(){return this.x*this.x+this.y*this.y},max:function(a){return new h(d.max(this.x,a.x),d.max(this.y,a.y))},maxSelf:function(a){return this.x=d.max(this.x,a.x),this.y=d.max(this.y,a.y),this},min:function(a){return new h(d.min(this.x,a.x),d.min(this.y,a.y))},minSelf:function(a){return this.x=d.min(this.x,a.x),this.y=d.min(this.y,a.y),this},normalize:function(){var a=this.x*this.x+this.y*this.y;return a>0&&(a=1/Math.sqrt(a),this.x*=a,this.y*=a),this},normalizeTo:function(a){var b=Math.sqrt(this.x*this.x+this.y*this.y);return b>0&&(b=a/b,this.x*=b,this.y*=b),this},perpendicular:function(){var a=this.x;return this.x=-this.y,this.y=a,this},positiveHeading:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y);return this.y<0?Math.acos(-this.x/a)+d.PI:Math.acos(this.x/a)},reciprocal:function(){return this.x=1/this.x,this.y=1/this.y,this},reflect:function(a){return this.set(a.scale(this.dot(a)*2).subSelf(this))},rotate:function(a){var b=Math.cos(a),c=Math.sin(a),d=b*this.x-c*this.y;return this.y=c*this.x+b*this.y,this.x=d,this},roundToAxis:function(){return Math.abs(this.x)<.5?this.x=0:(this.x=this.x<0?-1:1,this.y=0),Math.abs(this.y)<.5?this.y=0:(this.y=this.y<0?-1:1,this.x=0),this},scale:function(a,b){var c=i(a,b);return new h(this.x*c.x,this.y*c.y)},scaleSelf:function(a,b){var c=i(a,b);return this.x*=c.x,this.y*=c.y,this},set:function(a,b){var c=i(a,b);return this.x=c.x,this.y=c.y,this},setComponent:function(a,b){return typeof a=="number"&&(a=a===0?h.Axis.X:h.Axis.Y),a===h.Axis.X?this.x=b:a===h.Axis.Y&&(this.y=b),this},signum:function(){return this.x=this.x<0?-1:this.x===0?0:1,this.y=this.y<0?-1:this.y===0?0:1,this},sub:function(a,b){var c=i(a,b);return new h(this.x-c.x,this.y-c.y)},subSelf:function(a,b){var c=i(a,b);return this.x-=c.x,this.y-=c.y,this},tangentNormalOfEllipse:function(a,b){var c=this.sub(a),d=b.x*b.x,e=b.y*b.y;return(new h(c.x/d,c.y/e)).normalize()},toArray:function(){return[this.x,this.y]},toCartesian:function(){var a=this.x*Math.cos(this.y);return this.y=this.x*Math.sin(this.y),this.x=a,this},toPolar:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y);return this.y=Math.atan2(this.y,this.x),this.x=a,this},toString:function(){var a="{x:"+this.x+", y:"+this.y+"}";return a}},h.prototype.bisect=function(b){var c=a("./Vec3D"),d=this.sub(b),e=this.add(b),f=d.dot(e);return new c(d.x,d.y,-f/2)},h.prototype.to3DXY=function(){var b=a("./Vec3D");return new b(this.x,this.y,0)},h.prototype.to3DXZ=function(){var b=a("./Vec3D");return new b(this.x,0,this.y)},h.prototype.to3DYZ=function(){var b=a("./Vec3D");return new b(0,this.x,this.y)},h.X_AXIS=new h(1,0),h.Y_AXIS=new h(0,1),h.ZERO=new h,h.MIN_VALUE=new h(Number.MIN_VALUE,Number.MIN_VALUE),h.MAX_VALUE=new h(Number.MAX_VALUE,Number.MAX_VALUE),h.fromTheta=function(a){return new h(Math.cos(a),Math.sin(a))},h.max=function(a,b){return new h(d.max(a.x,b.x),d.max(a.y,b.y))},h.min=function(a,b){return new h(d.min(a.x,b.x),d.min(a.y,b.y))},h.randomVector=function(a){var b=new h(Math.random()*2-1,Math.random()*2-1);return b.normalize()},c.exports=h}),g("toxi/color/TColor",["require","exports","module","../math/mathUtils","../geom/Vec2D","../geom/Vec3D","../internals"],function(a,b,c){var d=a("../internals"),e=a("../math/mathUtils"),f=a("../geom/Vec2D"),g=a("../geom/Vec3D"),h=function(a){return a<0&&(a=4294967295+a+1),a.toString(16)},i=function(a){this.rgb=[],this.hsv=[],this.cmyk=[],this._alpha=1;if(a!==undefined){var b=a.toCMYKAArray();this.cmyk=b.splice(0,4),this.hsv=a.toHSVAArray().splice(0,3),this.rgb=a.toRGBAArray().splice(0,3),this._alpha=a._alpha}};i.prototype={add:function(a){return this.copy().addSelf(a)},addSelf:function(a){return this.rgb[0]=e.min(this.rgb[0]+a.rgb[0],1),this.rgb[1]=e.min(this.rgb[1]+a.rgb[1],1),this.rgb[2]=e.min(this.rgb[2]+a.rgb[2],1),this.setRGB(rgb)},adjustConstrast:function(a){return this.hsv[2]<.5?this.darken(a):this.lighten(a)},adjustHSV:function(a,b,c){return this.setHSV([this.hsv[0]+a,this.hsv[1]+b,this.hsv[2]+c])},adjustRGB:function(a,b,c){return this.setRGB([this.rgb[0]+a,this.rgb[1]+b,this.rgb[2]+c])},alpha:function(){return this._alpha},analog:function(a,b){var c=e.degrees(a);return this.rotateRYB(c*e.normalizedRandom()),this.hsv[1]+=b*e.normalizedRandom(),this.hsv[2]+=b*e.normalizedRandom(),this.setHSV(this.hsv)},black:function(){return this.cmyk[3]},blend:function(a,b){b===undefined&&(b=.5);var c=a.toRGBAArray();return this.rgb[0]+=(c[0]-this.rgb[0])*b,this.rgb[1]+=(c[1]-this.rgb[1])*b,this.rgb[2]+=(c[2]-this.rgb[2])*b,this._alpha+=(a.alpha()-this._alpha)*b,this.setRGB(this.rgb)},blue:function(){return this.rgb[2]},brightness:function(){return this.hsv[2]},complement:function(){return this.rotateRYB(180)},copy:function(){return new i(this)},cyan:function(){return this.cmyk[0]},darken:function(a){return this.hsv[2]=e.clip(this.hsv[2]-a,0,1),this.setHSV(this.hsv)},desaturate:function(a){return this.hsv[1]=e.clip(this.hsv[1]-a,0,1),this.setHSV(this.hsv)},differenceTo:function(a){return i.newRGB(Math.abs(this.rgb[0]-a.rgb[0]),Math.abs(this.rgb[1]-a.rgb[1]),Math.abs(this.rgb[2]-a.rgb[2]))},distanceToCMYK:function(a){var b=a.toCMYKAArray(),c=this.cmyk[0]-b[0],d=this.cmyk[1]-b[1],e=this.cmyk[2]-b[2],f=this.cmyk[3]-b[3];return Math.sqrt(c*c+d*d+e*e+f*f)},distanceToHSV:function(a){var b=this.hsv[0]*e.TWO_PI,c=a.hue()*e.TWO_PI,d=new g(Math.cos(b)*this.hsv[1],Math.sin(b)*this.hsv[1],this.hsv[2]),f=new g(Math.cos(c)*a.saturation(),Math.sin(c)*a.saturation(),a.brightness());return d.distanceTo(f)},distanceToRGB:function(a){var b=a.toRGBAArray(),c=this.rgb[0]-b[0],d=this.rgb[1]-b[1],e=this.rgb[2]-b[2];return Math.sqrt(c*c+d*d+e*e)},equals:function(a){if(d.tests.isTColor(a)){var b=a,c=b.rgb[0]-this.rgb[0],e=b.rgb[1]-this.rgb[1],f=b.rgb[2]-this.rgb[2],g=b.alpha()-this._alpha,h=Math.sqrt(c*c+e*e+f*f+g*g);return h<i.EPS}return!1},getAnalog:function(a,b){return(new i(this)).analog(a,b)},getBlended:function(a,b){return(new i(this)).blend(a,b)},getComplement:function(){return(new i(this)).complement()},getComponentValue:function(a){return a.getComponentValueFor(this)},getDarkened:function(a){return(new i(this)).darken(a)},getDesaturated:function(a){return(new i(this)).desaturate(a)},getDifferenceTo:function(a){return this.copy().differenceTo(a)},getInverted:function(){return(new i(this)).invert()},getLightened:function(a){return(new i(this)).lighten(a)},getRotatedRYB:function(a){return(new i(this)).rotateRYB(a)},getSaturated:function(a){return(new i(this)).saturate(a)},green:function(){return this.rgb[1]},hue:function(){return this.hsv[0]},invert:function(){return this.rgb[0]=1-this.rgb[0],this.rgb[1]=1-this.rgb[1],this.rgb[2]=1-this.rgb[2],this.setRGB(this.rgb)},isBlack:function(){return this.rgb[0]<=i.BLACK_POINT&&this.rgb[0]==this.rgb[1]&&this.rgb[0]==this.rgb[2]},isGrey:function(){return this.hsv[1]<i.GREY_THRESHOLD},isWhite:function(){return this.rgb[0]>=i.WHITE_POINT&&this.rgb[0]==this.rgb[1]&&this.rgb[0]==this.rgb[2]},lighten:function(a){return this.hsv[2]=e.clip(this.hsv[2]+a,0,1),this.setHSV(this.hsv)},luminance:function(){return this.rgb[0]*.299+this.rgb[1]*.587+this.rgb[2]*.114},magenta:function(){return this.cmyk[1]},red:function(){return this.rgb[0]},rotateRYB:function(a){var b=parseInt(e.degrees(a),10),c=this.hsv[0]*360,d=0,f,g;a%=360;var h=0;for(d=0;d<i.RYB_WHEEL.length-1;d++){f=i.RYB_WHEEL[d],g=i.RYB_WHEEL[d+1],g.y<f.y&&(g.y+=360);if(f.y<=c&&c<=g.y){h=f.x+(g.x-f.x)*(c-f.y)/(g.y-f.y);break}}h=(h+a)%360;for(d=0;d<i.RYB_WHEEL.length-1;d++){f=i.RYB_WHEEL[d],g=i.RYB_WHEEL[d+1],g.y<f.y&&(g.y+=360);if(f.x<=h&&h<=g.x){c=f.y+(g.y-f.y)*(h-f.x)/(g.x-f.x);break}}return this.hsv[0]=c%360/360,this.setHSV(this.hsv)},saturate:function(a){return this.hsv[1]=e.clip(this.hsv[1]+a,0,1),this.setHSV(this.hsv)},saturation:function(){return this.hsv[1]},setAlpha:function(a){return this._alpha=a,this},setARGB:function(a){return this.setRGB((a>>16&255)*i.INV8BIT,(a>>8&255)*i.INV8BIT,(a&255)*i.INV8BIT),this._alpha=(a>>>24)*i.INV8BIT,this},setBlack:function(a){return this.cmyk[3]=a,this.setCMYK(cmyk)},setBlue:function(a){return this.rgb[2]=a,this.setRGB(this.rgb)},setBrightness:function(a){return this.hsv[2]=e.clip(a,0,1),this.setHSV(this.hsv)},setCMYK:function(a,b,c,e){return d.tests.isArray(a)&&(b=a[1],c=a[2],e=a[3],a=a[0]),this.cmyk[0]=a,this.cmyk[1]=b,this.cmyk[2]=c,this.cmyk[3]=e,this.rgb=i.cmykToRGB(this.cmyk[0],this.cmyk[1],this.cmyk[2],this.cmyk[3]),this.hsv=i.rgbToHSV(this.rgb[0],this.rgb[1],this.rgb[2]),this},setCyan:function(a){return this.cmyk[0]=a,this.setCMYK(this.cmyk)},setGreen:function(a){return this.rgb[1]=a,this.setRGB(this.rgb)},setHSV:function(a,b,c){d.tests.isArray(a)&&(b=a[1],c=a[2],a=a[0]);var f=[a,b,c];return this.hsv[0]=f[0]%1,this.hsv[0]<0&&this.hsv[0]++,this.hsv[1]=e.clip(f[1],0,1),this.hsv[2]=e.clip(f[2],0,1),this.rgb=i.hsvToRGB(this.hsv[0],this.hsv[1],this.hsv[2]),this.cmyk=i.rgbToCMYK(this.rgb[0],this.rgb[1],this.rgb[2]),this},setHue:function(a){a%=1,a<0&&a++,this.hsv[0]=a,this.setHSV(this.hsv)},setMagenta:function(a){return this.cmyk[1]=a,this.setCMYK(this.cmyk)},setRed:function(a){return this.rgb[0]=a,this.setRGB(this.rgb)},setRGB:function(a,b,c){return d.tests.isArray(a)&&(b=a[1],c=a[2],a=a[0]),this.rgb[0]=e.clip(a,0,1),this.rgb[1]=e.clip(b,0,1),this.rgb[2]=e.clip(c,0,1),this.cmyk=i.rgbToCMYK(this.rgb[0],this.rgb[1],this.rgb[2]),this.hsv=i.rgbToHSV(this.rgb[0],this.rgb[1],this.rgb[2]),this},setSaturation:function(a){return this.hsv[1]=e.clip(a,0,1),this.setHSV(this.hsv)},setYellow:function(a){return this.cmyk[2]=a,this.setCMYK(this.cmyk)},sub:function(a){return this.copy().subSelf(a)},subSelf:function(a){return this.rgb[0]=e.max(this.rgb[0]-a.rgb[0],0),this.rgb[1]=e.max(this.rgb[1]-a.rgb[1],0),this.rgb[2]=e.max(this.rgb[2]-a.rgb[2],0),this.setRGB(this.rgb)},toARGB:function(){var a=parseInt(this.rgb[0]*255,10),b=parseInt(this.rgb[1]*255,10),c=parseInt(this.rgb[2]*255,10),d=parseInt(this._alpha*255,10);return a<<16|b<<8|c|d<<24},toCMYKAArray:function(a){return a===undefined&&(a=[]),a[0]=this.cmyk[0],a[1]=this.cmyk[1],a[2]=this.cmyk[2],a[3]=this.cmyk[3],a[4]=this._alpha,a},toHex:function(){var a=h(this.toARGB());return a.length>6&&(a=a.substring(2)),a},toHSVAArray:function(a){return a===undefined&&(a=[]),a[0]=this.hsv[0],a[1]=this.hsv[1],a[2]=this.hsv[2],a[3]=this._alpha,a},toHSLACSS:function(){var a=this.toHSVAArray();return a[0]=Math.floor(a[0]*360),a[1]=Math.floor(a[1]*100),a[2]=Math.floor(a[2]*100),"hsla("+a[0]+","+a[1]+"%,"+a[2]+"%,"+a[3]+")"},toRGBAArray:function(a,b){return a===undefined&&(a=[]),b==undefined&&(b=0),a[b++]=this.rgb[0],a[b++]=this.rgb[1],a[b++]=this.rgb[2],a[b]=this._alpha,a},toRGBACSS:function(a){a==a||!1;var b=this.toRGBAArray();return a?(b[0]=Math.floor(b[0]*100),b[1]=Math.floor(b[1]*100),b[2]=Math.floor(b[2]*100),"rgba("+b[0]+"%,"+b[1]+"%,"+b[2]+"%,"+b[3]+")"):(b[0]=Math.floor(b[0]*255),b[1]=Math.floor(b[1]*255),b[2]=Math.floor(b[2]*255),"rgba("+b[0]+","+b[1]+","+b[2]+","+b[3]+")")},toString:function(){return"TColor: rgb: "+this.rgb[0]+", "+this.rgb[1]+", "+this.rgb[2]+" hsv: "+this.hsv[0]+","+this.hsv[1]+","+this.hsv[2]+" cmyk: "+this.cmyk[0]+", "+this.cmyk[1]+","+this.cmyk[2]+","+this.cmyk[3]+" alpha: "+this._alpha},yellow:function(){return this.cmyk[2]}},i.INV60DEGREES=60/360,i.INV8BIT=1/255,i.EPS=.001,i.BLACK_POINT=.08,i.WHITE_POINT=1,i.GREY_THRESHOLD=.01,i.cmykToRGB=function(a,b,c,d,e){return e===undefined&&(e=[0,0,0]),e[0]=1-Math.min(1,a+d),e[1]=1-Math.min(1,b+d),e[2]=1-Math.min(1,c+d),e},i.hexToRGB=function(a,b){return b===undefined&&(b=[]),a=a.charAt(0)=="#"?a.substring(1,7):a,b[0]=parseInt(a.substring(0,2),16)*i.INV8BIT,b[1]=parseInt(a.substring(2,4),16)*i.INV8BIT,b[2]=parseInt(a.substring(4,6),16)*i.INV8BIT,b},i.hsvToRGB=function(a,b,c,d){d===undefined&&(d=[]);if(b===0)d[0]=d[1]=d[2]=c;else{a/=i.INV60DEGREES;var e=parseInt(a,10),f=a-e,g=c*(1-b),h=c*(1-b*f),j=c*(1-b*(1-f));e===0?(d[0]=c,d[1]=j,d[2]=g):e==1?(d[0]=h,d[1]=c,d[2]=g):e==2?(d[0]=g,d[1]=c,d[2]=j):e==3?(d[0]=g,d[1]=h,d[2]=c):e==4?(d[0]=j,d[1]=g,d[2]=c):(d[0]=c,d[1]=g,d[2]=h)}return d},i.labToRGB=function(a,b,c,d){d===undefined&&(d=[]);var e=(a+16)/116,f=b/500+e,g=e-c/200,h=0;d[0]=f,d[1]=e,d[2]=g;for(h=0;h<3;h++){var i=Math.pow(d[h],3);i>.008856?d[h]=i:d[h]=(d[h]-16/116)/7.787}f=d[0]*.95047,e=d[1],g=d[2]*1.08883,d[0]=f*3.2406+e*-1.5372+g*-0.4986,d[1]=f*-0.9689+e*1.8758+g*.0415,d[2]=f*.0557+e*-0.204+g*1.057;var j=1/2.4;for(h=0;h<3;h++)d[h]>.0031308?d[h]=1.055*Math.pow(d[h],j)-.055:d[h]=12.92*d[h];return d},i.newARGB=function(a){return i.newRGBA((a>>16&255)*i.INV8BIT,(a>>8&255)*i.INV8BIT,(a&255)*i.INV8BIT,(a>>>24)*i.INV8BIT)},i.newCMYK=function(a,b,c,d){return i.newCMYKA(a,b,c,d,1)},i.newCMYKA=function(a,b,c,d,f){var g=new i;return g.setCMYK([a,b,c,d]),g.setAlpha(e.clip(f,0,1)),g},i.newGray=function(a){return i.newGrayAlpha(a,1)},i.newGrayAlpha=function(a,b){var c=new i;return c.setRGB([a,a,a]),c.setAlpha(b),c},i.newHex=function(a){var b=new i;return b.setRGB(i.hexToRGB(a)),b.setAlpha(1),b},i.newHSV=function(a,b,c){return i.newHSVA(a,b,c,1)},i.newHSVA=function(a,b,c,d){var f=new i;return f.setHSV(a,b,c),f.setAlpha(e.clip(d,0,1)),f},i.newRandom=function(){return i.newRGBA(Math.random(),Math.random(),Math.random(),1)},i.newRGB=function(a,b,c){return i.newRGBA(a,b,c,1)},i.newRGBA=function(a,b,c,d){var f=new i;return f.setRGB([a,b,c]),f.setAlpha(e.clip(d,0,1)),f},i.rgbToCMYK=function(a,b,c,d){return d===undefined&&(d=[]),d[0]=1-a,d[1]=1-b,d[2]=1-c,d[3]=e.min(d[0],d[1],d[2]),d[0]=e.clip(d[0]-d[3],0,1),d[1]=e.clip(d[1]-d[3],0,1),d[2]=e.clip(d[2]-d[3],0,1),d[3]=e.clip(d[3],0,1),d},i.rgbToHex=function(a,b,c){var d=h(e.clip(a,0,1)*255)+h(e.clip(b,0,1)*255)+h(e.clip(c,0,1)*255);return d},i.rgbToHSV=function(a,b,c,d){d===undefined&&(d=[]);var f=0,g=0,h=e.max(a,b,c),j=h-e.min(a,b,c);return h!==0&&(g=j/h),g!==0&&(a==h?f=(b-c)/j:b==h?f=2+(c-a)/j:f=4+(a-b)/j),f*=i.INV60DEGREES,f<0&&(f+=1),d[0]=f,d[1]=g,d[2]=h,d},i.RED=i.newRGB(1,0,0),i.RYB_WHEEL=[new f(0,0),new f(15,8),new f(30,17),new f(45,26),new f(60,34),new f(75,41),new f(90,48),new f(105,54),new f(120,60),new f(135,81),new f(150,103),new f(165,123),new f(180,138),new f(195,155),new f(210,171),new f(225,187),new f(240,204),new f(255,219),new f(270,234),new f(285,251),new f(300,267),new f(315,282),new f(330,298),new f(345,329),new f(360,0)],i.GREEN=i.newRGB(0,1,0),i.BLUE=i.newRGB(0,0,1),i.CYAN=i.newRGB(0,1,1),i.MAGENTA=i.newRGB(1,0,1),i.YELLOW=i.newRGB(1,1,0),i.BLACK=i.newRGB(0,0,0),i.WHITE=i.newRGB(1,1,1),c.exports=i}),g("toxi/color",["require","exports","module","./color/TColor"],function(a,b,c){c.exports={TColor:a("./color/TColor")}}),g("toxi/geom/IsectData2D",["require","exports","module","./Vec2D"],function(a,b,c){var d=a("./Vec2D"),e=function(a){a!==undefined?(this.isIntersection=a.isIntersection,this.dist=a.dist,this.pos=a.pos.copy(),this.dir=a.dir.copy(),this.normal=a.normal.copy()):this.clear()};e.prototype={clear:function(){this.isIntersection=!1,this.dist=0,this.pos=new d,this.dir=new d,this.normal=new d},toString:function(){var a="isec: "+this.isIntersection;return this.isIntersection&&(a+=" at:"+this.pos+" dist:"+this.dist+" normal:"+this.normal),a}},c.exports=e}),g("toxi/geom/Spline2D",["require","exports","module","./Vec2D","./BernsteinPolynomial"],function(a,b,c){var d=a("./Vec2D"),e=a("./BernsteinPolynomial"),f=function(a,b){if(arguments.length===0)this.setTightness(f.DEFAULT_TIGHTNESS),this.pointList=[];else if(arguments.length<3){if(arguments.length==1){this.pointList=a,this.numP=a.length,this.coeffA=[],this.delta=[],this.bi=[];for(var c=0;c<this.numP;c++)this.coeffA[c]=new d,this.delta[c]=new d,this.bi[c]=0}}else this.pointList=a.slice(0),this.bernstein=b,this.setTightness(tightness);this.numP=this.pointList.length,this.bi=[]};f.prototype={add:function(a){return this.pointList.push(a.copy()),this},computeVertices:function(a){this.updateCoefficients();if(this.bernstein===undefined||this.bernstein.resolution!=a)this.bernstein=new e(a);var b=this.bernstein;this.vertices=[],this.findCPoints();var c=new d,f=new d;for(var g=0;g<this.numP-1;g++){var h=this.points[g],i=this.points[g+1];c.set(this.delta[g]).addSelf(h),f.set(i).subSelf(this.delta[g+1]);for(var j=0;j<b.resolution;j++){var k=h.x*b.b0[j]+c.x*b.b1[j]+f.x*b.b2[j]+i.x*b.b3[j],l=h.y*b.b0[j]+c.y*b.b1[j]+f.y*b.b2[j]+i.y*b.b3[j];this.vertices.push(new d(k,l))}}return this.vertices},findCPoints:function(){this.bi[1]=-0.25;var a;this.coeffA[1].set((this.points[2].x-this.points[0].x-this.delta[0].x)*this.tightness,(this.points[2].y-this.points[0].y-this.delta[0].y)*this.tightness);for(a=2;a<this.numP-1;a++)this.bi[a]=-1/(this.invTightness+this.bi[a-1]),this.coeffA[a].set(-(this.points[a+1].x-this.points[a-1].x-this.coeffA[a-1].x)*this.bi[a],-(this.points[a+1].y-this.points[a-1].y-this.coeffA[a-1].y)*this.bi[a]);for(a=this.numP-2;a>0;a--)this.delta[a].set(this.coeffA[a].x+this.delta[a+1].x*this.bi[a],this.coeffA[a].y+this.delta[a+1].y*this.bi[a])},getDecimatedVertices:function(a,b){b===undefined&&(b=!0),(this.vertices===undefined||this.vertices.length<2)&&this.computeVertices(f.DEFAULT_RES);var c=this.getEstimatedArcLength(),d=[],e=a/c,g=0;for(var h=0;h<1;h+=e){var i=h*c;while(i>=this.arcLenIndex[g])g++;var j=this.vertices[g-1],k=this.vertices[g],l=(i-this.arcLenIndex[g-1])/(this.arcLenIndex[g]-this.arcLenIndex[g-1]),m=j.interpolateTo(k,l);this.uniform.push(m)}return b&&d.push(this.vertices[this.vertices.length-1]),d},getEstimatedArcLength:function(){if(this.arcLenIndex===undefined||this.arcLenIndex!==undefined&&this.arcLenIndex.length!=this.vertices.length)this.arcLenIndex=[];var a=0;for(var b=1;b<this.arcLenIndex.length;b++){var c=this.vertices[b-1],d=this.vertices[b];a+=c.distanceTo(d),this.arcLenIndex[b]=a}return a},getNumPoints:function(){return this.numP},getPointList:function(){return this.pointList},getTightness:function(){return this.tightness},setPointList:function(a){return this.pointList=a.slice(0),this},setTightness:function(a){return this.tightness=a,this.invTightness=1/this.tightness,this},updateCoefficients:function(){this.numP=this.pointList.length;if(this.points===undefined||this.points!==undefined&&this.points.length!=this.numP){this.coeffA=[],this.delta=[],this.bi=[];for(var a=0;a<this.numP;a++)this.coeffA[a]=new d,this.delta[a]=new d;this.setTightness(this.tightness)}this.points=this.pointList.slice(0)}},f.DEFAULT_TIGHTNESS=.25,f.DEFAULT_RES=16,c.exports=f}),g("toxi/physics2d/ParticlePath2D",["require","exports","module","../internals","../geom/Spline2D"],function(a,b,c){var d=a("../internals"),e=a("../geom/Spline2D"),f=function(a){toxi.Spline2D.call(this,a),this.particles=[]};d.extend(f,e);var g=function(a,b){return new VerletParticle2D(a,b)};f.prototype.createParticles=function(a,b,c,d){this.particles=[],this.computeVertices(b);var e=0,f=this.getDecimatedVertices(c,!0);for(e=0;e<f;e++){var h=g(v,d);this.particles.push(h),a.addParticle(h)}return this.particles},c.exports=f}),g("toxi/physics2d/VerletParticle2D",["require","exports","module","../internals","../geom/Vec2D"],function(a,b,c){var d=a("../internals"),e=a("../geom/Vec2D"),f=function(a,b,c){this.force=new e,d.tests.hasXY(a)&&(d.tests.isVerletParticle2D(a)?(b=a.y,c=a.weight,a=a.x,this.isLocked=a.isLocked):b===undefined?(b=a.y,c=1,a=a.x):(c=b,b=a.y,a=a.x)),e.apply(this,[a,b]),this.isLocked=!1,this.prev=new e(this),this.temp=new e,c=c||1,this.setWeight(c)};d.extend(f,e),f.prototype.addBehavior=function(a,b){this.behaviors===undefined&&(this.behaviors=[]);if(a===undefined)throw{name:"TypeError",message:"behavior was undefined"};return b=b===undefined?1:b,a.configure(b),this.behaviors.push(a),this},f.prototype.addConstraint=function(a){return this.constraints===undefined&&(this.constraints=[]),this.constraints.push(a),this},f.prototype.addForce=function(a){return this.force.addSelf(a),this},f.prototype.addVelocity=function(a){return this.prev.subSelf(a),this},f.prototype.applyBehaviors=function(){if(this.behaviors!==undefined){var a=0;for(a=0;a<this.behaviors.length;a++)this.behaviors[a].applyBehavior(this)}},f.prototype.applyConstraints=function(){if(this.constraints!==undefined){var a=0;for(a=0;a<this.constraints.length;a++)this.constraints[a].applyConstraint(this)}},f.prototype.clearForce=function(){return this.force.clear(),this},f.prototype.clearVelocity=function(){return this.prev.set(this),this},f.prototype.getInvWeight=function(){return this.invWeight},f.prototype.getPreviousPosition=function(){return this.prev},f.prototype.getVelocity=function(){return this.sub(this.prev)},f.prototype.getWeight=function(){return this.weight},f.prototype.lock=function(){return this.isLocked=!0,this},f.prototype.removeAllBehaviors=function(){return this.behaviors=[],this},f.prototype.removeAllConstraints=function(){return this.constraints=[],this},f.prototype.removeBehavior=function(a){return d.removeItemFrom(a,this.behaviors)},f.prototype.removeConstraint=function(a){return d.removeItemFrom(a,this.constraints)},f.prototype.scaleVelocity=function(a){return this.prev.interpolateToSelf(this,1-a),this},f.prototype.setPreviousPosition=function(a){return this.prev.set(a),this},f.prototype.setWeight=function(a){this.weight=a,this.invWeight=a!==0?1/a:0},f.prototype.unlock=function(){return this.clearVelocity(),this.isLocked=!1,this},f.prototype.update=function(){if(!this.isLocked){var a=this;this.applyBehaviors(),function(){a.temp.set(a),a.addSelf(a.sub(a.prev).addSelf(a.force.scale(a.weight))),a.prev.set(a.temp),a.force.clear()}(),this.applyConstraints()}},c.exports=f}),g("toxi/physics2d/ParticleString2D",["require","exports","module","./VerletParticle2D","./VerletSpring2D"],function(a,b,c){var d=a("./VerletParticle2D"),e=a("./VerletSpring2D"),f=function(){var a={physics:undefined,plist:undefined,pos:undefined,step:undefined,num:undefined,mass:undefined,strength:undefined},b=!1;if(arguments.length===0)throw new Error("Incorrect Parameters");if(arguments.length==1){var c=arguments[0];for(var e in c)a[e]=c[e]}else a.physics=arguments[0],arguments.length==6?(a.pos=arguments[1],a.step=arguments[2],a.num=arguments[3],a.mass=arguments[4],a.strength=arguments[5]):(a.plist=arguments[1],a.strength=arguments[2]);a.num!==undefined&&a.pos!==undefined&&a.step!==undefined&&a.mass!==undefined&&(b=!0);if(!b&&a.plist===undefined)throw new Error("Incorrect Parameters, please supply plist or num, pos, step & mass");this.physics=a.physics,this.links=[];var f,g,h,i,j=0;if(b){var k=a.pos.copy(),l=a.step,m=a.mass,n=l.magnitude();this.particles=[],i=a.strength;for(j=0;j<a.num;j++)g=new d(k.copy(),m),this.particles.push(g),this.physics.particles.push(g),f!==undefined&&(h=this.createSpring(f,g,n,i),this.links.push(h),this.physics.addSpring(h)),f=g,k.addSelf(l)}else{i=a.strength,this.particles=a.plist||[];for(j=0;j<this.particles.length;j++)g=this.particles[j],this.physics.addParticle(g),f!==undefined&&(h=this.createSpring(f,g,f.distanceTo(g),i),this.links.push(h),this.physics.addSpring(h)),f=g}};f.prototype={clear:function(){for(var a=0,b=this.links.length;a<b;a++)this.physics.removeSpringElements(this.links[a]);this.particles=[],this.links=[]},createSpring:function(a,b,c,d){return new e(a,b,c,d)},getHead:function(){return this.particles[0]},getNumParticles:function(){return this.particles.length},getTail:function(){return this.particles[this.particles.length-1]}},c.exports=f}),g("toxi/physics2d/behaviors/ConstantForceBehavior",["require","exports","module","../../geom/Vec2D"],function(a,b,c){var d=a("../../geom/Vec2D"),e=function(a){this.force=a,this.scaleForce=new d,this.timeStep=0};e.prototype={applyBehavior:function(a){a.addForce(this.scaledForce)},configure:function(a){this.timeStep=a,this.setForce(this.force)},getForce:function(){return this.force},setForce:function(a){this.force=a,this.scaledForce=this.force.scale(this.timeStep)},toString:function(){return"behavior force: "+this.force+" scaledForce: "+this.scaledForce+" timeStep: "+this.timeStep}},c.exports=e}),g("toxi/physics2d/behaviors/GravityBehavior",["require","exports","module","../../internals","./ConstantForceBehavior"],function(a,b,c){var d=a("../../internals"),e=a("./ConstantForceBehavior"),f=function(a){e.apply(this,[a])};d.extend(f,e),f.prototype.configure=function(a){this.timeStep=a,this.scaledForce=this.force.scale(a*a)},c.exports=f}),g("toxi/physics2d/behaviors",["require","exports","module","./behaviors/AttractionBehavior","./behaviors/ConstantForceBehavior","./behaviors/GravityBehavior"],function(a,b,c){c.exports={AttractionBehavior:a("./behaviors/AttractionBehavior"),ConstantForceBehavior:a("./behaviors/ConstantForceBehavior"),GravityBehavior:a("./behaviors/GravityBehavior")}}),g("toxi/physics2d/constraints/AngularConstraint",["require","exports","module","../../math/mathUtils","../../geom/Vec2D"],function(a,b,c){var d=a("../../math/mathUtils"),e=a("../../geom/Vec2D"),f=function(a,b){if(arguments.length>1){var c=a;this.theta=b,this.rootPos=new e(c)}else this.rootPos=new e,this.theta=a;parseInt(this.theta,10)!=this.theta&&(this.theta=d.radians(this.theta))};f.prototype.applyConstraint=function(a){var b=a.sub(this.rootPos),c=toxi.MathUtils.floor(b.heading()/this.theta)*this.theta;a.set(this.rootPos.add(toxi.Vec2D.fromTheta(c).scaleSelf(b.magnitude())))},c.exports=f}),g("toxi/physics2d/constraints",["require","exports","module","./constraints/AngularConstraint","./constraints/AxisConstraint","./constraints/CircularConstraint","./constraints/MaxConstraint","./constraints/MinConstraint","./constraints/RectConstraint"],function(a,b,c){c.exports={AngularConstraint:a("./constraints/AngularConstraint"),AxisConstraint:a("./constraints/AxisConstraint"),CircularConstraint:a("./constraints/CircularConstraint"),MaxConstraint:a("./constraints/MaxConstraint"),MinConstraint:a("./constraints/MinConstraint"),RectConstraint:a("./constraints/RectConstraint")}}),g("toxi/geom/IsectData3D",["require","exports","module","./Vec3D"],function(a,b,c){var d=a("./Vec3D"),e=function(a){a!==undefined?(this.isIntersection=a.isIntersection,this.dist=a.dist,this.pos=a.pos.copy(),this.dir=a.dir.copy(),this.normal=a.normal.copy()):this.clear()};e.prototype={clear:function(){this.isIntersection=!1,this.dist=0,this.pos=new d,this.dir=new d,this.normal=new d},toString:function(){var a="isec: "+this.isIntersection;return this.isIntersection&&(a+=" at:"+this.pos+" dist:"+this.dist+" normal:"+this.normal),a}},c.exports=e}),g("toxi/geom/Ray3DIntersector",["require","exports","module","./IsectData3D","../math/mathUtils"],function(a,b,c){var d=a("./IsectData3D"),e=a("../math/mathUtils");Ray3DIntersector=function(a){this.ray=a,this.isec=new d},Ray3DIntersector.prototype={getIntersectionData:function(){return this.isec},intersectsRay:function(a){var b=this.ray.dir.cross(a.dir),c=this.ray.sub(a),d=e.abs(b.x),f=e.abs(b.y),g=e.abs(b.z),h;return g>d&&g>f?h=(c.x*a.dir.y-c.y*a.dir.x)/b.z:d>f?h=(c.y*a.dir.z-c.z*a.dir.y)/b.x:h=(c.z*a.dir.x-c.x*a.dir.z)/b.y,this.isec.isIntersection=h<=e.EPS&&!isFinite(h),this.isec.pos=this.ray.getPointAtDistance(-h),this.isec.isIntersection}},c.exports=Ray3DIntersector}),g("toxi/geom/Ray3D",["require","exports","module","../internals","./Vec3D","./Line3D"],function(a,b,c){var d=a("../internals").extend,e=a("./Vec3D"),f=a("./Line3D"),g=function(a,b,c,d){var f,g;arguments.length==4?(f=new e(a,b,c),g=d):arguments.length==2?(f=a,g=b):(f=new e,g=e.Y_AXIS.copy()),e.apply(this,[f]),this.dir=g};d(g,e),g.prototype.getDirection=function(){return this.dir.copy()},g.prototype.getDistanceToPoint=function(a){var b=a.sub(this);return b.distanceTo(this.dir.scale(b.dot(this.dir)))},g.prototype.getPointAtDistance=function(a){return this.add(this.dir.scale(a))},g.prototype.setDirection=function(a){return this.dir.set(a).normalize(),this},g.prototype.toLine3DWithPointAtDistance=function(a){return new f(this,this.getPointAtDistance(a))},g.prototype.toString=function(){return"origin: "+this.parent.toString.call(this)+" dir: "+this.dir},c.exports=g}),g("toxi/geom/Cone",["require","exports","module","../internals","./Vec3D","./mesh/TriangleMesh"],function(a,b,c){var d=a("../internals").extend,e=a("./Vec3D"),f=a("./mesh/TriangleMesh"),g=function(a,b,c,d,f){e.apply(this,[a]),this.dir=b.getNormalized(),this.radiusNorth=c,this.radiusSouth=d,this.length=f};d(g,e),g.prototype.toMesh=function(a){var b={mesh:undefined,steps:NaN,thetaOffset:0,topClosed:!0,bottomClosed:!0};if(arguments.length==1)if(typeof arguments[0]=="object"){var c=arguments[0];b.mesh=c.mesh,b.steps=c.steps||c.resolution||c.res,b.thetaOffset=c.thetaOffset||b.thetaOffset,b.topClosed=c.topClosed||b.topClosed,b.bottomClosed=c.bottomClosed||b.bottomClosed}else b.steps=arguments[0];else arguments.length==2?(b.steps=arguments[0],b.thetaOffset=arguments[1]):arguments.length==5&&(b.mesh=arguments[0],b.steps=arguments[1],b.thetaOffset=arguments[2],b.topClosed=arguments[3],b.bottomClosed=arguments[4]);var d=this.add(.01,.01,.01),e=d.cross(this.dir.getNormalized()).normalize(),g=this.dir.scale(this.length*.5),h=this.sub(g),i=this.add(g),k=[],l=[],m=Math.PI*2/b.steps,n=0;for(n=0;n<b.steps;n++){var o=n*m+b.thetaOffset,p=e.getRotatedAroundAxis(this.dir,o);k[n]=p.scale(this.radiusSouth).addSelf(h),l[n]=p.scale(this.radiusNorth).addSelf(i)}var q=b.steps*2+2,r=b.steps*2+(b.topClosed?b.steps:0)+(b.bottomClosed?b.steps:0),s=b.mesh||new f("cone",q,r);for(n=0,j=1;n<b.steps;n++,j++)j==b.steps&&(j=0),s.addFace(k[n],l[n],k[j],undefined,undefined,undefined,undefined),s.addFace(k[j],l[n],l[j],undefined,undefined,undefined,undefined),b.bottomClosed&&s.addFace(h,k[n],k[j],undefined,undefined,undefined,undefined),b.topClosed&&s.addFace(l[n],i,l[j],undefined,undefined,undefined,undefined);return s},c.exports=g}),g("toxi/geom/AxisAlignedCylinder",["require","exports","module","./Cone"],function(a,b,c){var d=a("./Cone"),e=function(a,b,c){this.pos=a===undefined?undefined:a.copy(),this.setRadius(b),this.setLength(c)};e.prototype={containsPoint:function(a){throw Error("AxisAlignedCylinder.containsPoint(): not implmented")},getLength:function(){return this.length},getMajorAxis:function(){throw Error("AxisAlignedCylinder.getMajorAxis(): not implemented")},getPosition:function(){return this.pos.copy()},getRadius:function(){return this.radius},setLength:function(a){this.length=a},setPosition:function(a){this.pos.set(a)},setRadius:function(a){this.radius=a,this.radiusSquared=a*a},toMesh:function(a,b,c){var e={mesh:undefined,steps:12,thetaOffset:0};if(arguments.length==1&&typeof arguments[0]=="object")for(var f in arguments[0])e[f]=arguments[0][f];else arguments.length==2&&(e.steps=arguments[0],e.thetaOffset=arguments[1]);var g=new d(this.pos,this.getMajorAxis().getVector(),this.radius,this.radius,this.length);return g.toMesh(e.mesh,e.steps,e.thetaOffset,!0,!0)}},c.exports=e}),g("toxi/geom/XAxisCylinder",["require","exports","module","../internals","../math/mathUtils","./Vec3D","./AxisAlignedCylinder"],function(a,b,c){var d=a("../internals").extend,e=a("../math/mathUtils"),f=a("./Vec3D"),g=a("./AxisAlignedCylinder"),h=function(a,b,c){g.apply(this,[a,b,c])};d(h,g),h.prototype.containsPoint=function(a){if(e.abs(a.x-this.pos.x)<this.length*.5){var b=a.y-this.pos.y,c=a.z-this.pos.z;if(Math.abs(c*c+b*b)<this.radiusSquared)return!0}return!1},h.prototype.getMajorAxis=function(){return f.Axis.X},c.exports=h}),g("toxi/geom/YAxisCylinder",["require","exports","module","../internals","../math/mathUtils","./Vec3D","./AxisAlignedCylinder"],function(a,b,c){var d=a("../internals").extend,e=a("../math/mathUtils"),f=a("./Vec3D"),g=a("./AxisAlignedCylinder"),h=function(a,b,c){g.apply(this,[a,b,c])};d(h,g),h.prototype.containsPoint=function(a){if(e.abs(a.y-this.pos.y)<this.length*.5){var b=a.x-this.pos.x,c=a.z-this.pos.z;if(Math.abs(c*c+b*b)<this.radiusSquared)return!0}return!1},h.prototype.getMajorAxis=function(){return f.Axis.Y},c.exports=h}),g("toxi/geom/ZAxisCylinder",["require","exports","module","../internals","../math/mathUtils","./Vec3D","./AxisAlignedCylinder"],function(a,b,c){var d=a("../internals").extend,e=a("../math/mathUtils"),f=a("./Vec3D"),g=a("./AxisAlignedCylinder"),h=function(a,b,c){g.apply(this,[a,b,c])};d(h,g),h.prototype.containsPoint=function(a){if(e.abs(a.z-this.pos.z)<this.length*.5){var b=a.x-this.pos.x,c=a.y-this.pos.y;if(Math.abs(b*b+c*c)<this.radiusSquared)return!0}return!1},h.prototype.getMajorAxis=function(){return f.Axis.Z},c.exports=h}),g("toxi/geom/Plane",["require","exports","module","../internals","../math/mathUtils","./Ray3D","./Vec3D","./mesh/TriangleMesh"],function(a,b,c){var d=a("../internals").extend,e=a("../math/mathUtils"),f=a("./Ray3D"),g=a("./Vec3D"),h=a("./mesh/TriangleMesh"),i=function(a,b){var c,d;arguments.length===0?(c=new g,d=g.Y_AXIS.copy()):arguments.length==1?(c=arguments[0].computeCentroid(),d=arguments[0].computeNormal()):(c=arguments[0],d=arguments[1].getNormalized()),g.apply(this,[c]),this.normal=d};d(i,g),i.Classifier={FRONT:"front",BACK:"back",ON_PLANE:"on plane"},i.XY=new i(new g,g.Z_AXIS),i.XZ=new i(new g,g.Y_AXIS),i.YZ=new i(new g,g.X_AXIS),i.prototype.classifyPoint=function(a,b){var c=this.sub(a).normalize().dot(this.normal);return c<-b?i.Classifier.FRONT:c>b?i.Classifier.BACK:i.Classifier.ON_PLANE},i.prototype.containsPoint=function(a){return this.classifyPoint(a,e.EPS)==i.Classifier.ON_PLANE},i.prototype.getDistanceToPoint=function(a){var b=this.normal.dot(a.sub(this)),c=this.normal.magSquared(),d=a.add(this.normal.scale(b/c));return d.distanceTo(a)},i.prototype.getIntersectionWithRay=function(a){var b=this.normal.dot(a.getDirection()),c;return b>e.EPS?(c=this.normal.dot(this.sub(a))/b,a.getPointAtDistance(c)):undefined},i.prototype.getProjectedPoint=function(a){var b,c;return this.normal.dot(this.sub(a))<0?b=this.normal.getInverted():b=this.normal,c=(new f(a,b)).getPointAtDistance(this.getDistanceToPoint(a)),c},i.prototype.intersectRayDistance=function(a){var b=this.normal.dot(this),c=this.normal.dot(a)+b,d=this.normal.dot(a.dir);return e.abs(d)<e.EPS?-1:-(c/d)},i.prototype.toMesh=function(a,b){var c,d,e,f,g,a,b,i,j;arguments.length==1?(c=a,d=new h("plane",4,2)):(d=a,c=b)},c.exports=i}),g("toxi/geom/mesh/BezierPatch",["require","exports","module","../Vec3D","./TriangleMesh"],function(a,b,c){var d=a("../Vec3D"),e=a("./TriangleMesh"),f=function(a){this.points=a===undefined?[]:a;for(var b=0;b<4;b++)for(var c=0;c<4;c++)this.points[b][c]=new d};f.prototype={computePointAt:function(a,b){return this.computePointAt(a,b,this.points)},set:function(a,b,c){return this.points[b][a].set(c),this},toMesh:function(a,b){var c,d;b===undefined?(c=new e,d=a):(c=a,d=b);var f=new Array(d+1),g=new Array(d+1),h=1/d;for(var i=0;i<=d;i++){for(var j=0;j<=d;j++){var k=this.computePointAt(j*h,i*h,this.points);j>0&&i>0&&(c.addFace(k,f[j-1],g[j-1]),c.addFace(k,g[j-1],g[j])),f[j]=k}var l=g;g=f,f=l}return c}},f.computePointAt=function(a,b,c){var e=1-a,f=e*e*3*a,g=e*e*e,h=a*a,i=1-b,j=b*b*3,k=i*i*3,l=i*i*i,m=b*b*b,n=e*h*3,o=a*h,p=i*j,q=k*b,r=c[0],s=c[1],t=c[2],u=c[3],v=g*(r[0].x*l+r[1].x*q+r[2].x*p+r[3].x*m)+f*(s[0].x*l+s[1].x*q+s[2].x*p+s[3].x*m)+n*(t[0].x*l+t[1].x*q+t[2].x*p+t[3].x*m)+o*(u[0].x*l+u[1].x*q+u[2].x*p+u[3].x*m),w=g*(r[0].y*l+r[1].y*q+r[2].y*p+r[3].y*m)+f*(s[0].y*l+s[1].y*q+s[2].y*p+s[3].y*m)+n*(t[0].y*l+t[1].y*q+t[2].y*p+t[3].y*m)+o*(u[0].y*l+u[1].y*q+u[2].y*p+u[3].y*m),x=g*(r[0].z*l+r[1].z*q+r[2].z*p+r[3].z*m)+f*(s[0].z*l+s[1].z*q+s[2].z*p+s[3].z*m)+n*(t[0].z*l+t[1].z*q+t[2].z*p+t[3].z*m)+o*(u[0].z*l+u[1].z*q+u[2].z*p+u[3].z*m);return new d(v,w,x)},c.exports=f}),g("toxi/geom/mesh/SuperEllipsoid",["require","exports","module","../../math/mathUtils","./TriangleMesh"],function(a,b,c){var d=a("../../math/mathUtils"),e=a("./TriangleMesh"),f=function(a,b){this.p1=a,this.p2=b};f.prototype={computeVertexFor:function(a,b,c){b-=d.HALF_PI;var e=d.cos(b),f=d.cos(c),g=d.sin(b),h=d.sin(c),i=d.sign(e)*Math.pow(d.abs(e),this.p1);return a.x=i*d.sign(f)*Math.pow(Math.abs(f),this.p2),a.y=d.sign(g)*Math.pow(Math.abs(g),this.p1),a.z=i*d.sign(h)*Math.pow(d.abs(h),this.p2),a},getPhiRange:function(){return d.TWO_PI},getPhiResolutionLimit:function(a){return a/2},getThetaRange:function(){return d.TWO_PI},getThetaResolutionLimit:function(a){return a}},c.exports=f}),g("toxi/geom/mesh",["require","exports","module","./mesh/BezierPatch","./mesh/BoxSelector","./mesh/DefaultSelector","./mesh/Face","./mesh/PlaneSelector","./mesh/SphereFunction","./mesh/SphericalHarmonics","./mesh/SurfaceMeshBuilder","./mesh/SuperEllipsoid","./mesh/TriangleMesh","./mesh/Vertex","./mesh/VertexSelector"],function(a,b,c){c.exports={BezierPatch:a("./mesh/BezierPatch"),BoxSelector:a("./mesh/BoxSelector"),DefaultSelector:a("./mesh/DefaultSelector"),Face:a("./mesh/Face"),PlaneSelector:a("./mesh/PlaneSelector"),SphereFunction:a("./mesh/SphereFunction"),SphericalHarmonics:a("./mesh/SphericalHarmonics"),SurfaceMeshBuilder:a("./mesh/SurfaceMeshBuilder"),SuperEllipsoid:a("./mesh/SuperEllipsoid"),TriangleMesh:a("./mesh/TriangleMesh"),Vertex:a("./mesh/Vertex"),VertexSelector:a("./mesh/VertexSelector")}}),g("toxi/processing/ToxiclibsSupport",["require","exports","module","../geom/Matrix4x4","../geom/Vec3D","../geom/mesh/TriangleMesh"],function(a,b,c){var d=a("../geom/Matrix4x4"),e=a("../geom/Vec3D"),f=a("../geom/mesh/TriangleMesh"),g=function(a,b){if(typeof Processing=="undefined")throw new Error("Processing.js has not been loaded");this.sketch=a,this.app=a,b!==undefined?this.gfx=a:this.gfx=this.app,this._normalMap=(new d).translateSelf(128,128,128).scaleSelf(127)};g.prototype={box:function(a,b){var c=a.toMesh();b===undefined&&(b=!1),b&&c.computeVertexNormals(),this.mesh(c,b,0)},circle:function(a,b){this.gfx.ellipse(a.x,a.y,b,b)},cone:function(){var a=arguments[0],b=6,c=0,d=!0,e=!0,g=!1;arguments.length==5?(b=arguments[1],d=arguments[2],e=arguments[3],g=arguments[4]):arguments.length==3&&(b=arguments[1],g=arguments[2]);var h=a.toMesh({mesh:new f,steps:b,thetaOffset:c,topClosed:d,bottomClosed:e});g&&h.computeVertexNormals(),window.mesh=h,this.mesh(h,g,0)},cylinder:function(a,b,c){if(arguments.length==1)this.mesh(a.toMesh(),!1,0);else{var d=a.toMesh(b,0);c===undefined&&(c=!1),c&&d.computeVertexNormals(),this.mesh(d,c,0)}},ellipse:function(a,b){var c=a.getRadii();b===undefined&&(b=this.app.CENTER),b===this.app.CENTER?this.gfx.ellipse(a.x,a.y,c.x*2,c.y*2):b===this.app.RADIUS?this.gfx.ellipse(a.x,a.y,c.x*2,c.y*2):(b===this.app.CORNER||this.gfx.ellipseMode===this.app.CORNERS)&&this.gfx.ellipse(a.x-c.x,a.y-c.y,c.x*2,c.y*2)},getGraphics:function(){return this.gfx},line:function(){var a,b;if(arguments.length==1){var c=arguments[0];a=c.a,b=c.b}else a=arguments[0],b=arguments[1];a.z===undefined?this.gfx.line(a.x,a.y,b.x,b.y):this.gfx.line(a.x,a.y,a.z,b.x,b.y,b.z)},lineStrip2D:function(a){this.processVertices2D(a,this.app.POLYGON,!1)},lineStrip3D:function(a){this.processVertices3D(a,this.app.POLYGON,!1)},mesh:function(a,b,c){b===undefined&&(b=!1),c===undefined&&(c=0),this.gfx.beginShape(this.app.TRIANGLES);var d=0,e=a.faces.length;if(b)for(d=0;d<e;d++){var f=a.faces[d];this.gfx.normal(f.a.normal.x,f.a.normal.y,f.a.normal.z),this.gfx.vertex(f.a.x,f.a.y,f.a.z),this.gfx.normal(f.b.normal.x,f.b.normal.y,f.b.normal.z),this.gfx.vertex(f.b.x,f.b.y,f.b.z),this.gfx.normal(f.c.normal.x,f.c.normal.y,f.c.normal.z),this.gfx.vertex(f.c.x,f.c.y,f.c.z)}else for(var d=0;d<e;d++){var f=a.faces[d];this.gfx.normal(f.normal.x,f.normal.y,f.normal.z),this.gfx.vertex(f.a.x,f.a.y,f.a.z),this.gfx.vertex(f.b.x,f.b.y,f.b.z),this.gfx.vertex(f.c.x,f.c.y,f.c.z)}this.gfx.endShape();if(c>0){var g=0,h=this.gfx.stroke;h&&(g=this.gfx.strokeColor),e=a.vertices.length;if(b)for(d=0;d<e;d++){var i=a.vertices[d],j=i.add(i.normal.scale(c));n=i.normal.scale(127),this.gfx.stroke(n.x+128,n.y+128,n.z+128),this.gfx.line(i.x,i.y,i.z,j.x,j.y,j.z)}else{var k=1/3;e=a.faces.length;for(d=0;d<e;d++){var f=a.faces[d],l=f.a.add(f.b).addSelf(f.c).scaleSelf(k),m=l.add(f.normal.scale(c)),n=f.normal.scale(127);this.gfx.stroke(n.x+128,n.y+128,n.z+128),this.gfx.line(l.x,l.y,l.z,m.x,m.y,m.z)}}h?this.gfx.stroke(g):this.gfx.noStroke()}},meshNormalMapped:function(a,b,c){this.gfx.beginShape(this.app.TRIANGLES);var d=0,e=a.faces.length;if(b)for(d=0;d<e;d++){var f=a.faces[d],g=this._normalMap.applyTo(f.a.normal);this.gfx.fill(g.x,g.y,g.z),this.gfx.normal(f.a.normal.x,f.a.normal.y,f.a.normal.z),this.gfx.vertex(f.a.x,f.a.y,f.a.z),g=this._normalMap.applyTo(f.b.normal),this.gfx.fill(g.x,g.y,g.z),this.gfx.normal(f.b.normal.x,f.b.normal.y,f.b.normal.z),this.gfx.vertex(f.b.x,f.b.y,f.b.z),g=this._normalMap.applyTo(f.c.nromal),this.gfx.fil(g.x,g.y,g.z),this.gfx.normal(f.c.normal.x,f.c.normal.y,f.c.normal.z),this.gfx.vertex(f.c.x,f.c.y,f.c.z)}else for(d=0;d<e;d++){var f=a.faces[d];this.gfx.normal(f.normal.x,f.normal.y,f.normal.z),this.gfx.vertex(f.a.x,f.a.y,f.a.z),this.gfx.vertex(f.b.x,f.b.y,f.b.z),this.gfx.vertex(f.c.x,f.c.y,f.c.z)}this.gfx.endShape();if(c>0)if(b){e=a.vertices.length;for(d=0;d<e;d++){var h=a.vertices[d],i=h.add(h.normal.scale(c)),g=h.normal.scale(127);this.gfx.stroke(g.x+128,g.y+128,g.z+128),this.gfx.line(h.x,h.y,h.z,i.x,i.y,i.z)}}else{e=a.faces.length;for(d=0;d<e;d++){var f=a.faces[d],j=f.getCentroid(),k=j.add(f.normal.scale(c)),g=f.normal.scale(127);this.gfx.stroke(g.x+128,g.y+128,g.z+128),this.gfx.line(j.x,j.y,j.z,k.x,k.y,k.z)}}},origin:function(){var a=undefined,b=undefined;arguments.length==1?(b=arguments[0],a=e.ZERO):(a=arguments[0],b=arguments[1]),this.gfx.stroke(255,0,0),this.gfx.line(a.x,a.y,a.z,a.x+b,a.y,a.z),this.gfx.stroke(0,255,0),this.gfx.line(a.x,a.y,a.z,a.x,a.y+b,a.z),this.gfx.stroke(0,0,255),this.gfx.line(a.x,a.y,a.z,a.x,a.y,a.z+b)},plane:function(a,b){this.mesh(a.toMesh(b),!1,0)},point:function(a){a.z===undefined?this.gfx.point(a.x,a.y):this.gfx.point(a.x,a.y,a.z)},points2D:function(a){this.processVertices2D(a,this.app.POINTS,!1)},points3D:function(a){this.processVertices3D(a,this.app.POINTS,!1)},polygon2D:function(a){this.processVertices2D(a.vertices,this.app.POLYGON,!1)},processVertices2D:function(a,b,c){if(a.hasNext===undefined||a.next===undefined)a=new this.app.ObjectIterator(a);this.gfx.beginShape(b);for(var d=void 0;a.hasNext()&&((d=a.next())||!0);)this.gfx.vertex(d.x,d.y);c?this.gfx.endShape(this.app.CLOSE):this.gfx.endShape()},processVertices3D:function(a,b,c){if(a.hasNext===undefined||a.next===undefined)a=new this.app.ObjectIterator(a);this.gfx.beginShape(b);for(var d=void 0;a.hasNext()&&((d=a.next())||!0);)this.gfx.vertex(d.x,d.y,d.z);c?this.gfx.endShape(this.app.CLOSE):this.gfx.endShape()},ray:function(a,b){var c=a.getPointAtDistance(b);a.z===undefined?this.gfx.line(a.x,a.y,c.x,c.y):this.gfx.line(a.x,a.y,a.z,c.x,c.y,c.z)},rect:function(a,b){b===undefined&&(b=this.app.CORNER);if(b===this.app.CORNER)this.gfx.rect(a.x,a.y,a.width,a.height);else if(b===this.app.CORNERS)this.gfx.rect(a.x,a.y,a.x+a.width,a.y+a.height);else if(b===this.app.CENTER)this.gfx.rect(a.x+a.widt*.5,a.y+a.height*.5,a.width,a.height);else if(b===this.app.RADIUS){var c=a.width*.5,d=a.height*.5;this.gfx.rect(a.x+c,a.y+d,c,d)}},setGraphics:function(a){this.gfx=a},sphere:function(a,b,c){this.mesh(a.toMesh(b),c)},texturedMesh:function(a,b,c){this.gfx.beginShape(this.app.TRIANGLES),this.gfx.texture(b);var d=0,e=a.faces.length;if(c)for(d=0;d<e;d++){var f=a.faces[d];f.uvA!==undefined&&f.uvB!==undefined&&f.uvC!==undefined?(this.gfx.normal(f.a.normal.x,f.a.normal.y,f.a.normal.z),this.gfx.vertex(f.a.x,f.a.y,f.a.z,f.uvA.x,f.uvA.y),this.gfx.normal(f.b.normal.x,f.b.normal.y,f.b.normal.z),this.gfx.vertex(f.b.x,f.b.y,f.b.z,f.uvB.x,f.uvB.y),this.gfx.normal(f.c.normal.x,f.c.normal.y,f.c.normal.z),this.gfx.vertex(f.c.x,f.c.y,f.c.z,f.uvC.x,f.uvC.y)):(this.gfx.vertex(f.a.x,f.a.y,f.a.z),this.gfx.vertex(f.b.x,f.b.y,f.b.z),this.gfx.vertex(f.c.x,f.c.y,f.c.z))}else for(d=0;d<e;d++){var f=a.faces[d];this.gfx.normal(f.normal.x,f.normal.y,f.normal.z),f.uvA!==undefined&&f.uvB!==undefined&&f.uvC!==undefined?(this.gfx.vertex(f.a.x,f.a.y,f.a.z,f.uvA.x,f.uvA.y),this.gfx.vertex(f.b.x,f.b.y,f.b.z,f.uvB.x,f.uvB.y),this.gfx.vertex(f.c.x,f.c.y,f.c.z,f.uvC.x,f.uvC.y)):(this.gfx.vertex(f.a.x,f.a.y,f.a.z),this.gfx.vertex(f.b.x,f.b.y,f.b.z),this.gfx.vertex(f.c.x,f.c.y,f.c.z))}this.gfx.endShape()},triangle:function(a,b){var c=function(){return a.a!==undefined&&a.b!==undefined&&a.c!==undefined?a.a.x!==undefined:!1},d=function(){return c()?a.a.z!==undefined:!1};(b||b===undefined)&&this.gfx.beginShape(this.app.TRIANGLES);if(d()){var e=a.computeNormal();this.gfx.normal(e.x,e.y,e.z),this.gfx.vertex(a.a.x,a.a.y,a.a.z),this.gfx.vertex(a.b.x,a.b.y,a.b.z),this.gfx.vertex(a.c.x,a.c.y,a.c.z)}else this.gfx.vertex(a.a.x,a.a.y),this.gfx.vertex(a.b.x,a.b.y),this.gfx.vertex(a.c.x,a.c.y);(b||b===undefined)&&this.gfx.endShape()},vertex:function(a){a.z===undefined?this.gfx.vertex(a.x,a.y):this.gfx.vertex(a.x,a.y,a.z)}},c.exports=g}),g("toxi/processing",["require","exports","module","./processing/ToxiclibsSupport"],function(a,b,c){c.exports={ToxiclibsSupport:a("./processing/ToxiclibsSupport")}}),g("toxi/geom/Ray2D",["require","exports","module","../internals","./Vec2D","./Line2D"],function(a,b,c){var d=a("../internals").extend,e=a("./Vec2D"),f=a("./Line2D"),g=function(a,b,c){var d,f;arguments.length==3?(e.apply(this,[a,b]),this.dir=c.getNormalized()):arguments.length==2?(e.apply(this,[a]),this.dir=b.getNormalized()):arguments.length===0&&(e.apply(this),this.dir=e.Y_AXIS.copy())};d(g,e),g.prototype.getDirection=function(){return this.dir.copy()},g.prototype.getDistanceToPoint=function(a){var b=a.sub(this);return b.distanceTo(this.dir.scale(b.dot(this.dir)))},g.prototype.getPointAtDistance=function(a){return this.add(this.dir.scale(a))},g.prototype.setDirection=function(a){return this.dir.set(a).normalize(),this},g.prototype.toLine2DWithPointAtDistance=function(a){return new f(this,this.getPointAtDistance(a))},g.prototype.toString=function(){return"origin: "+e.prototype.toString.apply(this)+" dir: "+this.dir},c.exports=g}),g("toxi/geom/Line2D",["require","exports","module","./Ray2D","../internals"],function(a,b,c){var d=a("./Ray2D"),e=a("../internals"),f=function(a,b){this.a=a,this.b=b};f.prototype={closestPointTo:function(a){var b=this.b.sub(this.a),c=a.sub(this.a).dot(b)/b.magSquared();return c<0?this.a.copy():c>1?this.b.copy():this.a.add(b.scaleSelf(c))},copy:function(){return new f(this.a.copy(),this.b.copy())},equals:function(a){if(this==a)return!0;if(!e.tests.isLine2D(a))return!1;var b=a;return(this.a.equals(b.a)||this.a.equals(b.b))&&(this.b.equals(b.b)||this.b.equals(b.a))},getDirection:function(){return this.b.sub(this.a).normalize()},getLength:function(){return this.a.distanceTo(this.b)},getLengthSquared:function(){return this.a.distanceToSquared(this.b)},getMidPoint:function(){return this.a.add(this.b).scaleSelf(.5)},getNormal:function(){return this.b.sub(this.a).perpendicular()},getTheta:function(){return this.a.angleBetween(this.b,!0)},hasEndPoint:function(a){return this.a.equals(a)||this.b.equals(a)},intersectLine:function(a){var b,c=(a.b.y-a.a.y)*(this.b.x-this.a.x)-(a.b.x-a.a.x)*(this.b.y-this.a.y),d=(a.b.x-a.a.x)*(this.a.y-a.a.y)-(a.b.y-a.a.y)*(this.a.x-a.a.x),e=(this.b.x-this.a.x)*(this.a.y-a.a.y)-(this.b.y-this.a.y)*(this.a.x-a.a.x);if(c!==0){var g=d/c,h=e/c;g<0||g>1||h<0||h>1?b=new f.LineIntersection(f.LineIntersection.Type.NON_INTERSECTING,undefined):b=new f.LineIntersection(f.LineIntersection.Type.INTERSECTING,this.a.interpolateTo(this.b,g))}else d===0&&e===0?b=new f.LineIntersection(f.LineIntersection.Type.COINCIDENT,undefined):b=new f.LineIntersection(f.LineIntersection.Type.COINCIDENT,undefined);return b},offsetAndGrowBy:function(a,b,c){var d=this.getMidPoint(),e=this.getDirection(),f=e.getPerpendicular();return c!==undefined&&d.sub(c).dot(f)<0&&f.invert(),f.normalizeTo(a),this.a.addSelf(f),this.b.addSelf(f),e.scaleSelf(b),this.a.subSelf(e),this.b.addSelf(e),this},scale:function(a){var b=(1-a)*.5,c=this.a.interpolateTo(this.b,b);return this.b.interpolateToSelf(this.a,b),this.a.set(c),this},set:function(a,b){return this.a=a,this.b=b,this},splitIntoSegments:function(a,b,c){return f.splitIntoSegments(this.a,this.b,b,a,c)},toRay2D:function(){return new d(this.a.copy(),this.b.sub(this.a).normalize())}},f.splitIntoSegments=function(a,b,c,d,e){d===undefined&&(d=[]),e&&d.push(a.copy());var f=a.distanceTo(b);if(f>c){var g=a.copy(),h=b.sub(a).limit(c);while(f>c)g.addSelf(h),d.push(g.copy()),f-=c}return d.push(b.copy()),d},f.LineIntersection=function(a,b){this.type=a,this.pos=b},f.LineIntersection.prototype={getPos:function(){return this.pos.copy()},getType:function(){return this.type},toString:function(){return"type: "+this.type+" pos: "+this.pos}},f.LineIntersection.Type={COINCIDENT:0,PARALLEL:1,NON_INTERSECTING:2,INTERSECTING:3},c.exports=f}),g("toxi/geom/Rect",["require","exports","module","../math/mathUtils","./Vec2D","./Line2D","./Polygon2D","../internals"],function(a,b,c){var d=a("../internals"),e=a("../math/mathUtils"),f=a("./Vec2D"),g=a("./Line2D"),h=a("./Polygon2D"),i=function(a,b,c,e){if(arguments.length==2){if(!d.tests.hasXY(a))throw new Error("Rect received incorrect parameters");this.x=a.x,this.y=a.y,this.width=b.x-this.x,this.height=b.y-this.y}else if(arguments.length==4)this.x=a,this.y=b,this.width=c,this.height=e;else if(arguments.length==1){var f=arguments[0];d.tests.hasXYWidthHeight(f)&&(this.x=f.x,this.y=f.y,this.width=f.width,this.height=f.height)}else if(arguments.length>0)throw new Error("Rect received incorrect parameters")};i.fromCenterExtent=function(a,b){return new i(a.sub(b),a.add(b))},i.prototype={containsPoint:function(a){var b=a.x,c=a.y;return b<this.x||b>=this.x+this.width?!1:c<this.y||c>=this.y+this.height?!1:!0},copy:function(){return new i(this.x,this.y,this.width,this.height)},getArea:function(){return this.width*this.height},getAspect:function(){return this.width/this.height},getBottom:function(){return this.y+this.height},getBottomRight:function(){return new f(this.x+this.width,this.y+this.height)},getCentroid:function(){return new f(this.x+this.width*.5,this.y+this.height*.5)},getDimensions:function(){return new f(this.width,this.height)},getEdge:function(a){var b;switch(a){case 0:b=new g(new f(this.x,this.y),new f(this.x+this.width,this.y));break;case 1:b=new g(new f(this.x+this.width,this.y),new f(this.x+this.width,this.y+this.height));break;case 2:b=new g(new f(this.x,this.y+this.height),new f(this.x+this.width,this.y+this.height));break;case 3:b=new g(new f(this.x,this.y),new f(this.x,this.y+this.height));break;default:throw new Error("edge ID needs to be 0...3")}return b},getLeft:function(){return this.x},getRight:function(){return this.x+this.width},getTop:function(){return this.y},getTopLeft:function(){return new f(this.x,this.y)},intersectsRay:function(a,b,c){var d=a.getDirection().reciprocal(),e=d.x<0,f=d.y<0,g=this.getTopLeft(),h=this.getBottomRight(),i=e?h:g,j=(i.x-a.x)*d.x;i=e?g:h;var k=(i.x-a.x)*d.x;i=f?h:g;var l=(i.y-a.y)*d.y;i=f?g:h;var m=(i.y-a.y)*d.y;return j>m||l>k?undefined:(l>j&&(j=l),m<k&&(k=m),j<c&&k>b?a.getPointAtDistance(j):undefined)},intersectsRect:function(a){return!(this.x>a.x+a.width||this.x+this.width<a.x||this.y>a.y+a.height||this.y+this.height<a.y)},scale:function(a){var b=this.getCentroid();return this.width*=a,this.height*=a,this.x=b.x-this.width*.5,this.y=b.y-this.height*.5,this},set:function(a,b,c,d){if(arguments.length==-1)this.y=a.y,this.width=a.width,this.height=a.height,this.x=a.x;else if(arguments.length===4)this.x=a,this.y=b,this.width=c,this.height=d;else throw new Error("Rect set() received wrong parameters")},setDimensions:function(a){return this.width=a.x,this.height=a.y,this},setPosition:function(a){return this.x=a.x,this.y=a.y,this},toPolygon2D:function(){var a=new h;return a.add(new f(this.x,this.y)),a.add(new f(this.x+this.width,this.y)),a.add(new f(this.x+this.width,this.y+this.height)),a.add(new f(this.x,this.y+this.height)),a},toString:function(){return"rect: {x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},union:function(a){var b=e.max(this.x+this.width,a.x+a.width);return this.x=e.min(this.x,a.x),this.width=b-this.x,b=e.max(this.y+this.height,a.y+a.height),this.y=e.min(this.y,a.y),this.height=b-this.y,this}},c.exports=i}),g("toxi/physics2d/VerletPhysics2D",["require","exports","module","../internals","./behaviors/GravityBehavior","../geom/Rect","../geom/Vec2D"],function(a,b,c){var d=a("../internals"),e=a("./behaviors/GravityBehavior"),f=a("../geom/Rect"),g=a("../geom/Vec2D"),h=function(a,b,c,f){var h={numIterations:50,drag:0,timeStep:1},i;arguments.length==1&&(arguments[0].gravity||arguments[0].numIterations||arguments[0].timeStep||arguments[0].drag)&&(i=arguments[0],i.gravity!==undefined&&(a=i.gravity),i.numIterations!==undefined&&(h.numIterations=i.gravity),i.drag!==undefined&&(h.drag=i.drag),i.timeStep!==undefined&&(h.timeStep=i.timeStep)),this.behaviors=[],this.particles=[],this.springs=[],this.numIterations=h.numIterations,this.timeStep=h.timeStep,this.setDrag(h.drag),a&&(d.tests.isParticleBehavior(a)?this.addBehavior(a):d.tests.hasXY(a)&&this.addBehavior(new e(new g(a))))};h.addConstraintToAll=function(a,b){for(var c=0;c<b.length;c++)b[c].addConstraint(a)},h.removeConstraintFromAll=function(a,b){for(var c=0;c<b.length;c++)b[c].removeConstraint(a)},h.prototype={addBehavior:function(a){a.configure(this.timeStep),this.behaviors.push(a)},addParticle:function(a){return this.particles.push(a),this},addSpring:function(a){return this.getSpring(a.a,a.b)===undefined&&this.springs.push(a),this},clear:function(){return this.particles=[],this.springs=[],this},constrainToBounds:function(){var a,b=0;for(b=0;b<this.particles.length;b++)a=this.particles[b],a.bounds!==undefined&&a.constrain(a.bounds);if(this.worldBounds!==undefined)for(b=0;b<this.particles.length;b++)a=this.particles[b],a.constrain(this.worldBounds)},getCurrentBounds:function(){var a=new g(Number.MAX_VALUE,Number.MAX_VALUE),b=new g(Number.MIN_VALUE,Number.MIN_VALUE),c=0,d;for(c=0;c<this.particles.length;c++)d=this.particles[c],a.minSelf(d),b.maxSelf(d);return new f(a,b)},getDrag:function(){return 1-this.drag},getNumIterations:function(){return this.numIterations},getSpring:function(a,b){var c=0;for(c=0;c<this.springs.length;c++){var d=this.springs[c];if(d.a===a&&d.b===b||d.a===b&&d.b===b)return d}return undefined},getTimeStep:function(){return this.timeStep},getWorldBounds:function(){return this.worldBounds},removeBehavior:function(a){return d.removeItemFrom(a,this.behaviors)},removeParticle:function(a){return d.removeItemFrom(a,this.particles)},removeSpring:function(a){return d.removeItemFrom(a,this.springs)},removeSpringElements:function(a){return this.removeSpring(a)!==undefined?this.removeParticle(a.a)&&this.removeParticle(a.b):!1},setDrag:function(a){this.drag=1-a},setNumIterations:function(a){this.numIterations=a},setTimeStep:function(a){this.timeStep=a;var b=0;for(b=0;b<this.behaviors.length;b++){var c=this.behaviors[b];c.configure(a)}},setWorldBounds:function(a){return this.worldBounds=a,this},update:function(){return this.updateParticles(),this.updateSprings(),this.constrainToBounds(),this},updateParticles:function(){var a=0,b=0,c,d;for(a=0;a<this.behaviors.length;a++){c=this.behaviors[a];for(b=0;b<this.particles.length;b++)d=this.particles[b],c.applyBehavior(d)}for(b=0;b<this.particles.length;b++)d=this.particles[b],d.scaleVelocity(this.drag),d.update()},updateSprings:function(){var a=0,b=0;for(a=this.numIterations;a>0;a--)for(b=0;b<this.springs.length;b++){var c=this.springs[b];c.update(a===1)}}},c.exports=h}),g("toxi/physics2d",["require","exports","module","./physics2d/ParticlePath2D","./physics2d/ParticleString2D","./physics2d/PullBackString2D","./physics2d/VerletConstrainedSpring2D","./physics2d/VerletMinDistanceSpring2D","./physics2d/VerletParticle2D","./physics2d/VerletPhysics2D","./physics2d/VerletSpring2D","./physics2d/behaviors","./physics2d/constraints"],function(a,b,c){c.exports={ParticlePath2D:a("./physics2d/ParticlePath2D"),ParticleString2D:a("./physics2d/ParticleString2D"),PullBackString2D:a("./physics2d/PullBackString2D"),VerletConstrainedSpring2D:a("./physics2d/VerletConstrainedSpring2D"),VerletMinDistanceSpring2D:a("./physics2d/VerletMinDistanceSpring2D"),VerletParticle2D:a("./physics2d/VerletParticle2D"),VerletPhysics2D:a("./physics2d/VerletPhysics2D"),VerletSpring2D:a("./physics2d/VerletSpring2D")},c.exports.behaviors=a("./physics2d/behaviors"),c.exports.constraints=a("./physics2d/constraints")}),g("toxi/geom/Triangle2D",["require","exports","module","./Vec2D","./Line2D","./Rect","./Circle","./Polygon2D","../math/mathUtils"],function(d,e,f){var g=d("./Vec2D"),h=d("./Line2D"),i=d("./Rect"),j=d("./Circle"),k=d("./Polygon2D"),l=d("../math/mathUtils"),m=function(a,b,c){arguments.length===3&&(this.a=a.copy(),this.b=b.copy(),this.c=c.copy())};m.createEquilateralFrom=function(a,b){var c=a.interpolateTo(b,.5),d=a.sub(b),e=d.getPerpendicular();return c.addSelf(e.normalizeTo(d.magnitude()*l.SQRT3/2)),new m(a,b,c)},m.isClockwise=function(a,b,c){var d=(b.x-a.x)*(c.y-a.y)-(c.x-a.x)*(b.y-a.y);return d<0},m.prototype={adjustTriangleSizeBy:function(a,b,c){arguments.length==1&&(b=a,c=a),this.computeCentroid();var d=(new h(this.a.copy(),this.b.copy())).offsetAndGrowBy(a,1e5,this.centroid),e=(new h(this.b.copy(),this.c.copy())).offsetAndGrowBy(b,1e5,this.centroid),f=(new h(this.c.copy(),this.a.copy())).offsetAndGrowBy(c,1e5,this.centroid);return this.a=d.intersectLine(f).getPos(),this.b=d.intersectLine(e).getPos(),this.c=e.intersectLine(f).getPos(),this.computeCentroid(),this},computeCentroid:function(){return this.centroid=this.a.add(this.b).addSelf(this.c).scaleSelf(1/3),this.centroid},containsPoint:function(a){var b=a.sub(this.a).normalize(),c=a.sub(this.b).normalize(),d=a.sub(this.c).normalize(),e=Math.acos(b.dot(c));return e+=Math.acos(c.dot(d)),e+=Math.acos(d.dot(b)),l.abs(e-l.TWO_PI)<=.01},copy:function(){return new m(this.a.copy(),this.b.copy(),this.c.copy())},flipVertexOrder:function(){var a=this.a;return this.a=this.c,this.c=a,this},getArea:function(){return this.b.sub(this.a).cross(this.c.sub(this.a))*.5},getBounds:function(){return new i(g.min(g.min(a,b),c),g.max(g.max(a,b),c))},getCircumCircle:function(){var a=this.a.bisect(this.b).cross(this.b.bisect(this.c)),b=new g(a.x/a.z,a.y/a.z),c=this.a.distanceTo(this.b),d=this.b.distanceTo(this.c),e=this.c.distanceTo(this.a),f=c*d*e/Math.sqrt((c+d+e)*(-c+d+e)*(c-d+e)*(c+d-e));return new j(b,f)},getCircumference:function(){return this.a.distanceTo(this.b)+this.b.distanceTo(this.c)+this.c.distanceTo(this.a)},getClosestPointTo:function(a){var b=new h(this.a,this.b),c=b.closestPointTo(a),d=b.set(this.b,this.c).closestPointTo(a),e=b.set(this.c,this.a).closestPointTo(a),f=a.sub(c).magSquared(),g=a.sub(d).magSquared(),i=a.sub(e).magSquared(),j=f,k=c;return g<j&&(j=g,k=d),i<j&&(k=e),k},intersectsTriangle:function(a){if(this.containsPoint(a.a)||this.containsPoint(a.b)||this.containsPoint(a.c))return!0;if(a.containsPoint(this.a)||a.containsPoint(this.b)||a.containsPoint(this.c))return!0;var b=[new h(this.a,this.b),new h(this.b,this.c),new h(this.c,this.a)],c=[new h(a.a,a.b),new h(a.b,a.c),new h(a.c,a.a)];for(var d=0,e=b.length;d<e;d++){var f=b[d];for(var g=0,i=c.length;g<i;g++){var j=c[g],k=f.intersectLine(j).getType();if(k!=h.LineIntersection.Type.NON_INTERSECTING&&k!=h.LineIntersection.Type.PARALLEL)return!0}}return!1},isClockwise:function(){return m.isClockwise(this.a,this.b,this.c)},set:function(a,b,c){this.a=a,this.b=b,this.c=c},toPolygon2D:function(){var a=new k;return a.add(this.a.copy()),a.add(this.b.copy()),a.add(this.c.copy()),a},toString:function(){return"Triangle2D: "+this.a+","+this.b+","+this.c}},f.exports=m}),g("toxi/geom/Polygon2D",["require","exports","module","./Vec2D","./Line2D","./Triangle2D","../internals"],function(a,b,c){var d=a("../internals"),e=a("./Vec2D"),f=a("./Line2D"),g=a("./Triangle2D"),h=function(){this.vertices=[];var a,b;if(arguments.length>1)for(a=0,b=arguments.length;a<b;a++)this.add(arguments[a].copy());else if(arguments.length==1){var c=arguments[0];if(d.tests.isArray(c))for(a=0,b=c.length;a<b;a++)this.add(c[a].copy())}};h.prototype={add:function(a){this.vertices.indexOf(a)<0&&this.vertices.push(a)},containsPoint:function(a){var b=this.vertices.length,c=0,d=b-1,e=!1,f=a.x,g=a.y;for(c=0;c<b;c++){var h=this.vertices[c],i=this.vertices[d];(h.y<g&&i.y>=g||i.y<g&&h.y>=g)&&h.x+(g-h.y)/(i.y-h.y)*(i.x-h.x)<f&&(e=!e),d=c}return e},containsPoly:function(a){for(var b=0,c=a.vertices.length;b<c;b++)if(!this.containsPoint(a.vertices[b]))return!1;return!0},flipVertexOrder:function(){return this.vertices.reverse(),this},getArea:function(){var a=0,b=this.vertices.length;for(var c=0;c<b;c++){var d=this.vertices[c],e=this.vertices[(c+1)%b];a+=d.x*e.y,a-=d.y*e.x}return a*=.5,a},getCentroid:function(){var a=new e,b=this.vertices.length;for(var c=0;c<b;c++){var d=this.vertices[c],f=this.vertices[(c+1)%b],g=d.x*f.y-f.x*d.y;a.x+=(d.x+f.x)*g,a.y+=(d.y+f.y)*g}return a.scale(1/(this.getArea()*6))},getCircumference:function(){var a=0;for(var b=0,c=this.vertices.length;b<c;b++)a+=this.vertices[b].distanceTo(this.vertices[(b+1)%c]);return a},getEdges:function(){var a=this.vertices.length,b=[];for(var c=0;c<a;c++)b[c]=new f(this.vertices[c],this.vertices[(c+1)%a]);return b},getNumPoints:function(){return this.vertices.length},isClockwise:function(){return this.vertices.length>2?g.isClockwise(this.vertices[0],this.vertices[1],this.vertices[2]):!1},intersectsPoly:function(a){if(!this.containsPoly(a)){var b=this.getEdges(),c=a.getEdges();for(var d=0,e=b.length;d<e;d++)for(var g=0,h=c.length,i=b[d];g<h;g++)if(i.intersectLine(c[g]).getType()==f.LineIntersection.Type.INTERSECTING)return!0;return!1}return!0},rotate:function(a){for(var b=0,c=this.vertices.length;b<c;b++)this.vertices[b].rotate(a)},scale:function(){var a,b;if(arguments.length==1){var c=arguments[0];d.tests.hasXY(c)?(a=c.x,b=c.y):(a=c,b=c)}else if(arguments.length==2)a=arguments[0],b=arguments[1];else throw"Invalid argument(s) passed.";for(var e=0,f=this.vertices.length;e<f;e++)this.vertices[e].scaleSelf(a,b);return this},translate:function(){var a,b;if(arguments.length==1&&d.tests.hasXY(arguments[0]))a=arg.x,b=arg.y;else if(arguments.length==2)a=arguments[0],b=arguments[1];else throw"Invalid argument(s) passed.";for(var c=0,e=this.vertices.length;c<e;c++)this.vertices[c].addSelf(a,b);return this},smooth:function(a,b){var c=this.getCentroid(),d=this.vertices.length,e=[];for(var f=0,g=d-1,h=1;f<d;f++){var i=this.vertices[f],j=this.vertices[g].sub(i).addSelf(this.vertices[h].sub(i)).addSelf(i.sub(c).scaleSelf(b));e.push(i.add(j.scaleSelf(a))),g++,g==d&&(g=0),h++,h==d&&(h=0)}return this.vertices=e,this},toString:function(){var a="";for(var b=0;b<this.vertices.length;b++)a+=this.vertices[b],b<this.vertices.length-1&&(a+=", ");return a}},c.exports=h}),g("toxi/geom/Ellipse",["require","exports","module","../internals","../math/mathUtils","./Vec2D","./Polygon2D"],function(a,b,c){var d=a("../internals"),e=a("../math/mathUtils"),f=a("./Vec2D"),g=a("./Polygon2D"),h=function(a,b,c,e){this.radius=new f,arguments.length===0?(f.apply(this,[0,0]),this.setRadii(1,1)):d.tests.hasXY(a)?(f.apply(this,[a.x,a.y]),d.tests.hasXY(b)?this.setRadii(b.x,b.y):this.setRadii(b,c)):e===undefined?c===undefined?(f.apply(this,[0,0]),this.setRadii(a,b)):(f.apply(this,[a,b]),this.setRadii(c,c)):(console.log("yup"),f.apply(this,[a,b]),this.setRadii(c,e))};d.extend(h,f),h.prototype.containsPoint=function(a){var b=this.getFoci();return a.distanceTo(b[0])+a.distanceTo(b[1])<2*e.max(this.radius.x,this.radius.y)},h.prototype.getArea=function(){return e.PI*radius.x*radius.y},h.prototype.getCircumference=function(){return Math.sqrt(.5*this.radius.magSquared())*e.TWO_PI},h.prototype.getFoci=function(){var a=[];return this.radius.x>this.radius.y?(a[0]=this.sub(this.focus,0),a[1]=this.add(this.focus,0)):(a[0]=this.sub(0,this.focus),a[1]=this.add(0,this.focus)),a},h.prototype.getRadii=function(){return this.radius.copy()},h.prototype.setRadii=function(a,b){return d.tests.hasXY(a)&&(b=a.y,a=a.x),this.radius.set(a,b),this.focus=this.radius.magnitude(),this},h.prototype.toPolygon2D=function(a){var b=new g,c=e.TWO_PI/a;for(var d=0;d<a;d++){var h=f.fromTheta(d*c).scaleSelf(this.radius).addSelf(this);b.add(h)}return b},c.exports=h}),g("toxi/geom/Circle",["require","exports","module","../internals","../math/mathUtils","./Vec2D","./Ellipse"],function(a,b,c){var d=a("../internals"),e=a("../math/mathUtils"),f=a("./Vec2D"),g=a("./Ellipse"),h=function(a,b,c){arguments.length==1?d.tests.isCircle(a)?g.apply(this,[a,a.radius.x]):g.apply(this,[0,0,a]):arguments.length==2?g.apply(this,[a,b]):g.apply(this,[a,b,c,c])};d.extend(h,g),h.from2Points=function(a,b){var c=a.interpolateTo(b,.5),d=c.distanceTo(a);return new h(c,d)},h.from3Points=function(a,b,c){var d,g=b.sub(a),i=c.sub(b),j,k;if(e.abs(g.x)>1e-7||e.abs(i.y)>1e-7){var l=g.y/g.x,m=i.y/i.x;if(e.abs(l-m)>1e-7&&l!==0){var n=(l*m*(a.y-c.y)+m*(a.x+b.x)-l*(b.x+c.x))/(2*(m-l)),o=-(n-(a.x+b.x)/2)/l+(a.y+b.y)/2;j=new f(n,o),k=j.distanceTo(a),d=new h(j,k)}}else j=(new f(b.x+c.x,a.y+b.y)).scaleSelf(.5),k=j.distanceTo(a),d=new h(j,k);return d},h.prototype.containsPoint=function(a){return this.distanceToSquared(a)<=this.radius.x*this.radius.x},h.prototype.getCircumference=function(){return e.TWO_PI*this.radius.x},h.prototype.getRadius=function(){return this.radius.x},h.prototype.getTangentPoints=function(a){var b=this.interpolateTo(a,.5);return this.intersectsCircle(new h(b,b.distanceTo(a)))},h.prototype.intersectsCircle=function(a){var b,c=a.sub(this),d=c.magnitude(),e=this.radius.x,f=a.radius.x;if(d<=e+f&&d>=Math.abs(e-f)){var g=(e*e-f*f+d*d)/(2*d);d=1/d;var h=this.add(c.scale(g*d)),i=Math.sqrt(e*e-g*g);c.perpendicular().scaleSelf(i*d);var j=h.add(c),k=h.sub(c);b=[j,k]}return b},h.prototype.setRadius=function(a){return this.setRadii(a,a),this},c.exports=h}),g("toxi/geom",["require","exports","module","./geom/AABB","./geom/BernsteinPolynomial","./geom/Circle","./geom/CircleIntersector","./geom/Cone","./geom/Ellipse","./geom/IsectData2D","./geom/IsectData3D","./geom/Line2D","./geom/Line3D","./geom/Matrix4x4","./geom/Plane","./geom/Polygon2D","./geom/Quaternion","./geom/Ray2D","./geom/Ray3D","./geom/Ray3DIntersector","./geom/Rect","./geom/Sphere","./geom/Spline2D","./geom/Triangle2D","./geom/Triangle3D","./geom/Vec2D","./geom/Vec3D","./geom/XAxisCylinder","./geom/YAxisCylinder","./geom/ZAxisCylinder","./geom/mesh"],function(a,b,c){c.exports={AABB:a("./geom/AABB"),BernsteinPolynomial:a("./geom/BernsteinPolynomial"),Circle:a("./geom/Circle"),CircleIntersector:a("./geom/CircleIntersector"),Cone:a("./geom/Cone"),Ellipse:a("./geom/Ellipse"),IsectData2D:a("./geom/IsectData2D"),IsectData3D:a("./geom/IsectData3D"),Line2D:a("./geom/Line2D"),Line3D:a("./geom/Line3D"),Matrix4x4:a("./geom/Matrix4x4"),Plane:a("./geom/Plane"),Polygon2D:a("./geom/Polygon2D"),Quaternion:a("./geom/Quaternion"),Ray2D:a("./geom/Ray2D"),Ray3D:a("./geom/Ray3D"),Ray3DIntersector:a("./geom/Ray3DIntersector"),Rect:a("./geom/Rect"),Sphere:a("./geom/Sphere"),Spline2D:a("./geom/Spline2D"),Triangle2D:a("./geom/Triangle2D"),Triangle3D:a("./geom/Triangle3D"),Vec2D:a("./geom/Vec2D"),Vec3D:a("./geom/Vec3D"),XAxisCylinder:a("./geom/XAxisCylinder"),YAxisCylinder:a("./geom/YAxisCylinder"),ZAxisCylinder:a("./geom/ZAxisCylinder")},c.exports.mesh=a("./geom/mesh")}),g("toxi/main",["./color","./geom","./internals","./math","./physics2d","./processing","./THREE","./utils"],function(a,b,c,d,e,f,g,h){return{color:a,geom:b,internals:c,math:d,physics2d:e,processing:f,THREE:g,utils:h}}),g("toxi",["./toxi/main"],function(a){return a}),toxi=e("toxi")})()